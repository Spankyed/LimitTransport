var Hi=function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=30)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.GameScenes=i.GameScenes;var a=n(6);t.ModuleName=a.ModuleName;var s=n(25);t.WeatherState=s.WeatherState;var o=n(24);t.AssetsManager=o.AssetsManager;var r=n(2);t.GuiManager=r.GuiManager;var c=n(3);t.SceneManager=c.SceneManager;var l=n(9);t.GlobalManager=l.GlobalManager;var u=n(23);t.AnimationCon=u.AnimationCon;var h=n(4);t.AnimationGui=h.AnimationGui;var p=n(22);t.particleCon=p.particleCon;var d=n(21);t.GuiCreate=d.GuiCreate;var g=n(20);t.Panels=g.Panels;var m=n(1);t.Module=m.Module;var f=n(19);t.Guis=f.Guis;var y=n(18);t.StartGui=y.StartGui;var B=n(17);t.GameSceneGui=B.GameSceneGui;var b=n(5);t.DisplayPool=b.DisplayPool},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.initUI=function(){},e.prototype.show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addEvent()},e.prototype.hide=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.updateData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isInit||(this.initUI(),this.isInit=!0)},e.prototype.addClick=function(e,t){return e.onPointerUpObservable.add(t)},e.prototype.removeClick=function(e,t){e.onPointerUpObservable.remove(t)},e.prototype.delayEnable=function(e,t){e.mouseEnable=e.mouseChildren=!1,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){this.timeoutId=0,e.mouseEnable=e.mouseChildren=!0},t||500)},e.prototype.dispose=function(){},e}();t.Module=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.guiPoll={},this._lastGui=null,this._fullscreenUI=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("GUI")}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.changeGui=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=this._fullscreenUI.rootContainer.children.length,a=0;a<i;a++)this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0]);this._fullscreenUI.addControl(e),this._lastGui=e},e.prototype.appendGui=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._fullscreenUI.addControl(e),this._lastGui=e},e.prototype.removeGui=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._fullscreenUI.removeControl(this._lastGui)},e.prototype.removeAll=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=this._fullscreenUI.rootContainer.children.length,a=0;a<i;a++)this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0])},e.prototype.openPanel=function(e){},e.prototype.closePanel=function(e){},Object.defineProperty(e.prototype,"fullscreenUI",{get:function(){return this._fullscreenUI},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastGui",{get:function(){return this._lastGui},enumerable:!0,configurable:!0}),e}();t.GuiManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._canvas=document.querySelector("#renderCanvas"),this._engine=new BABYLON.Engine(this._canvas,!0);var e=function(){var e=new BABYLON.Scene(this._engine),t=e._onPointerUp,n=e._onPointerDown,i=e._onPointerMove,a=BABYLON.Tools.GetPointerPrefix();return this._canvas.removeEventListener(a+"move",i),this._canvas.removeEventListener(a+"down",n),window.removeEventListener(a+"up",t),e._onPointerUp=function(e){void 0!==e.pointerId&&t(e)},e._onPointerDown=function(e){void 0!==e.pointerId&&n(e)},e._onPointerMove=function(e){void 0!==e.pointerId&&i(e)},this._canvas.addEventListener(a+"move",e._onPointerMove,!1),this._canvas.addEventListener(a+"down",e._onPointerDown,!1),window.addEventListener(a+"up",e._onPointerUp,!1),new BABYLON.FreeCamera("baseCamera",new BABYLON.Vector3(0,0,0),e),e}.bind(this);this._scene=e(),this._engine.runRenderLoop(function(){this._scene.render(),TWEEN.update()}.bind(this)),window.addEventListener("resize",function(){this._engine.resize()}.bind(this))}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),e.prototype.change=function(t){for(var n=0,i=e.ins.scene.meshes;n<i.length;n++)i[n].dispose();e.ins.stage=t},e}();t.SceneManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){this.show=function(e,t,n){var i=[];i.push({frame:0,value:.1}),i.push({frame:10,value:1});var a=new BABYLON.Animation("","scaleX",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);a.setKeys(i);var s=new BABYLON.Animation("","scaleY",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);s.setKeys(i),e.animations=[],e.animations.push(a,s),this.advancedTexture.addControl(e),t&&t(),this.scene.beginAnimation(e,0,10,!1,2,function(){n&&n()})},this.hide=function(e,t,n){var i=this,a=[];a.push({frame:0,value:1}),a.push({frame:10,value:.1});var s=new BABYLON.Animation("","scaleX",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);s.setKeys(a);var o=new BABYLON.Animation("","scaleY",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);o.setKeys(a),e.animations=[],e.animations.push(s,o),t&&t(),this.scene.beginAnimation(e,0,10,!1,2,function(){i.advancedTexture.removeControl(e),n&&n()})},this.scene=e,this.advancedTexture=t};t.AnimationGui=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.displayPool={}}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e}();t.DisplayPool=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.LOADING_GUI="LoadingScene",e.WAITING_PANEL="WaitingPanel",e.MSG_PANEL="MsgPanel",e.RULE_PANEL="RulePanel",e.LOSE_PANEL="LosePanel",e.GAME_START_GUI="GameStartScene",e.GAME_PLAY_SCENE="GamePlayScene",e.GAME_PLAY_GUI="GamePlayGui"}(t.ModuleName||(t.ModuleName={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.gold=new BABYLON.Observable,this.key=new BABYLON.Observable}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e}();t.EventCon=i},function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(0),o=n(0),r=n(0),c=n(7),l=n(16),u=n(0),h=n(0),p=n(15),d=n(14),g=n(0),m=function(e){function t(){var t=e.call(this)||this;return t.importMeshes=[{rootUrl:s.AssetsManager.ins.resourceObject.models.gameScene.car.rootUrl,sceneFilename:s.AssetsManager.ins.resourceObject.models.gameScene.car.sceneFilename},{rootUrl:s.AssetsManager.ins.resourceObject.models.gameScene.wheel.rootUrl,sceneFilename:s.AssetsManager.ins.resourceObject.models.gameScene.wheel.sceneFilename},{rootUrl:s.AssetsManager.ins.resourceObject.models.gameScene["map"+localStorage.map].rootUrl,sceneFilename:s.AssetsManager.ins.resourceObject.models.gameScene["map"+localStorage.map].sceneFilename}],t}return a(t,e),Object.defineProperty(t,"ins",{get:function(){return this.instance||(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){o.DisplayPool.ins.displayPool[r.ModuleName.GAME_PLAY_SCENE]=this},t.prototype.resetGame=function(){var e=this;this.importMeshes=[{rootUrl:s.AssetsManager.ins.resourceObject.models.gameScene.car.rootUrl,sceneFilename:s.AssetsManager.ins.resourceObject.models.gameScene.car.sceneFilename},{rootUrl:s.AssetsManager.ins.resourceObject.models.gameScene.wheel.rootUrl,sceneFilename:s.AssetsManager.ins.resourceObject.models.gameScene.wheel.sceneFilename},{rootUrl:s.AssetsManager.ins.resourceObject.models.gameScene["map"+localStorage.map].rootUrl,sceneFilename:s.AssetsManager.ins.resourceObject.models.gameScene["map"+localStorage.map].sceneFilename}],s.SceneManager.ins.engine.displayLoadingUI(),s.SceneManager.ins.engine.loadingUIText="Initializing...",this.ImportMeshes(this.importMeshes,function(t){l.ExGameScene.ins.creatScene();var n=s.SceneManager.ins.scene;e.scene=s.SceneManager.ins.scene,e.score=0;var i="当前得分:"+e.score+"分";c.EventCon.ins.gold.notifyObservers(i),e.display=l.ExGameScene.ins.display,n.meshes.forEach(function(t){e.display.shadowGenerator.getShadowMap().renderList.push(t)}),n.getMeshByName("car").scaling=new BABYLON.Vector3(.001,.001,.001),n.getMeshByName("car").rotation=new BABYLON.Vector3(1*-Math.PI,.5*Math.PI,.5*Math.PI),n.getMeshByName("car").position=new BABYLON.Vector3(1.7,0,.6),e.scene.getMeshByName("car")._children.forEach(function(e){e.material&&e.material.subMaterials&&e.material.subMaterials.forEach(function(e){e.backFaceCulling=!1})}),n.getMeshByName("w1").rotation=new BABYLON.Vector3(0,0,.5*-Math.PI),n.getMeshByName("w1").scaling=new BABYLON.Vector3(.001,.001,.001),n.getMeshByName("w1").position=new BABYLON.Vector3(1.02,-1.2,2.38),n.getMeshByName("w1").isVisible=!1;var a=n.getMeshByName("default");console.log("新地图"),console.log(a.name),a.scaling.copyFromFloats(1,1,1),a.bakeCurrentTransformIntoVertices(),a.material=e.display.terrainMaterial,new d.UseMaterial(n).setCarMaterial();var o,r=new p.CannonCreateObj(s.SceneManager.ins.scene,e.display.shadowGenerator,{x:parseInt(localStorage.car_x),y:parseInt(localStorage.car_y),z:parseInt(localStorage.car_z)});r.HeightMap(a),r.carCtrl(),setInterval(function(){e.display.light3.position=new BABYLON.Vector3(e.scene.getMeshByName("carBox").position.x,e.scene.getMeshByName("carBox").position.y+1,e.scene.getMeshByName("carBox").position.z-0)},500),e.waterRenderList(),localStorage.weatherState==g.WeatherState.RAIN_DAY&&(e.setLightning(),e.setRain(),e.setCarLight(),e.scene.fogMode=BABYLON.Scene.FOGMODE_EXP,e.scene.fogDensity=.005,e.scene.fogColor=new BABYLON.Color3(.3,.3,.3),(o=new BABYLON.GlowLayer("glow",n)).addIncludedOnlyMesh(e.scene.getMeshByName("Jeep GC-P 25")),o.addIncludedOnlyMesh(e.scene.getMeshByName("Jeep GC-P 20")),o.addIncludedOnlyMesh(e.scene.getMeshByName("lighting")),e.display.postProcess.depth=.08,e.display.postProcess1.depth=.08,e.display.light.intensity=.1,e.display.light2.intensity=.1,e.display.light3.intensity=.2,e.display.lensFlareSystem3.dispose()),localStorage.weatherState==g.WeatherState.SUNNY_DAY&&(e.scene.fogMode=BABYLON.Scene.FOGMODE_EXP,e.scene.fogDensity=.001,e.scene.fogColor=new BABYLON.Color3(1,1,1),e.scene.getMeshByName("Plane001").material.alpha=0,(o=new BABYLON.GlowLayer("glow",n)).addIncludedOnlyMesh(e.scene.getMeshByName("Jeep GC-P 20")),o.addIncludedOnlyMesh(e.scene.getMeshByName("lighting")),e.scene.getMeshByName("Jeep GC-P 25").material.alpha=.3,e.display.postProcess.depth=0,e.display.postProcess1.depth=0,e.display.light.intensity=.2,e.display.light2.intensity=.2,e.display.light3.intensity=1),localStorage.weatherState==g.WeatherState.NIGHT_DAY&&(e.scene.fogMode=BABYLON.Scene.FOGMODE_EXP,e.scene.fogDensity=.009,e.scene.fogColor=new BABYLON.Color3(0,0,0),e.setCarLight(),e.scene.getMeshByName("Plane001").material.alpha=.3,(o=new BABYLON.GlowLayer("glow",n)).addIncludedOnlyMesh(e.scene.getMeshByName("Jeep GC-P 25")),o.addIncludedOnlyMesh(e.scene.getMeshByName("Jeep GC-P 20")),e.scene.getMeshByName("Jeep GC-P 25").material.alpha=1,e.display.postProcess.depth=0,e.display.postProcess1.depth=0,e.display.light.intensity=.1,e.display.light2.intensity=.1,e.display.light3.intensity=.3,e.display.lensFlareSystem3.dispose()),localStorage.weatherState==g.WeatherState.AFTERNOON_DAY&&(e.scene.fogMode=BABYLON.Scene.FOGMODE_EXP,e.scene.fogDensity=.001,e.scene.fogColor=new BABYLON.Color3(1,90/255,0),e.setCarLight(),e.scene.getMeshByName("Plane001").material.alpha=.3,(o=new BABYLON.GlowLayer("glow",n)).addIncludedOnlyMesh(e.scene.getMeshByName("Jeep GC-P 25")),o.addIncludedOnlyMesh(e.scene.getMeshByName("Jeep GC-P 20")),e.scene.getMeshByName("Jeep GC-P 25").material.alpha=1,e.display.postProcess.depth=0,e.display.postProcess1.depth=0,e.display.light.intensity=.1,e.display.light2.intensity=.1,e.display.light3.intensity=.3),e.display.steering.parent=e.scene.getMeshByName("carBox"),e.display.steering.position.z=.7,e.display.steering.position.x=.8,e.display.steering.position.y=-.76,e.scene.getMeshByName("Jeep GC-P 15").position=new BABYLON.Vector3(0,0,0),e.scene.getMeshByName("Jeep GC-P 15").parent=e.display.steering,e.setCameraParent(),c.EventCon.ins.key.add(function(t){e.gameDeState=t,console.log(t),e.viewCtrl(t)}),setTimeout(function(){s.SceneManager.ins.engine.hideLoadingUI()},500)})},t.prototype.waterRenderList=function(){var e=this;this.display.water.addToRenderList(this.scene.getMeshByName("default")),this.display.water.addToRenderList(this.scene.getMeshByName("skyBox")),this.display.water.addToRenderList(this.scene.getMeshByName("car")),this.display.water.addToRenderList(this.scene.getMeshByName("w1_1")),this.display.water.addToRenderList(this.scene.getMeshByName("w2_1")),this.display.water.addToRenderList(this.scene.getMeshByName("w3_1")),this.display.water.addToRenderList(this.scene.getMeshByName("w4_1")),console.log(this.scene.getMeshByName("car")),this.scene.getMeshByName("car")._children.forEach(function(t){e.display.water.addToRenderList(t)}),"1"==localStorage.map&&(this.display.waterMesh.position.y=123),"2"==localStorage.map&&(this.display.waterMesh.position.y=43)},t.prototype.setLightning=function(){var e=this;setInterval(function(){e.display.light3.intensity=2,e.scene.getMeshByName("lighting").visibility=2,e.display.lighting.position.y=e.scene.getMeshByName("carBox").absolutePosition.y+100,e.display.lighting.position.z=600*Math.random()-300,e.display.lighting.position.x=600*Math.random()-300,setTimeout(function(){e.display.light3.intensity=.3,e.scene.getMeshByName("lighting").visibility=0},100),setTimeout(function(){e.display.light3.intensity=1,e.display.lighting.position.z=600*Math.random()-300,e.display.lighting.position.x=600*Math.random()-300,e.scene.getMeshByName("lighting").visibility=1},500),setTimeout(function(){e.display.light3.intensity=.3,e.scene.getMeshByName("lighting").visibility=0},600)},6e3)},t.prototype.setRain=function(){var e=this,t=new h.particleCon(new BABYLON.Vector3(0,50,0),this.scene,this.display.particleRain);t.start(),s.SceneManager.ins.engine.runRenderLoop(function(){t.Position(new BABYLON.Vector3(e.scene.getMeshByName("car").absolutePosition.x+50,e.scene.getMeshByName("car").absolutePosition.y+50,e.scene.getMeshByName("car").absolutePosition.z))})},t.prototype.setCarLight=function(){var e=this;this.display.light4.intensity=10,s.SceneManager.ins.engine.runRenderLoop(function(){e.display.lightLook.parent=e.scene.getMeshByName("carBox"),e.display.lightLook.position.x=12,e.display.light4.position=new BABYLON.Vector3(e.scene.getMeshByName("carBox").position.x,e.scene.getMeshByName("carBox").position.y+.3,e.scene.getMeshByName("carBox").position.z),e.display.light4.setDirectionToTarget(new BABYLON.Vector3(e.display.lightLook.absolutePosition.x,e.display.lightLook.absolutePosition.y,e.display.lightLook.absolutePosition.z))})},t.prototype.viewCtrl=function(e){1==e.view?(this.display.camera2.detachControl(s.SceneManager.ins.canvas,!1),this.scene.activeCamera=this.display.camera,this.display.camera.alpha=1*-Math.PI,this.display.camera.beta=1.260483446598473,this.display.camera.attachControl(s.SceneManager.ins.canvas,!0)):(this.display.camera.detachControl(s.SceneManager.ins.canvas,!1),this.scene.activeCamera=this.display.camera2,this.display.camera2.rotation=new BABYLON.Vector3(.1,.5*Math.PI,0),this.display.camera2.attachControl(s.SceneManager.ins.canvas,!0))},t.prototype.setCameraParent=function(){this.display.camera2Box.parent=this.scene.getMeshByName("carBox"),this.display.camera.setTarget(this.scene.getMeshByName("carBox")),this.display.camera.target=this.scene.getMeshByName("carBox")},t.prototype.removeEvent=function(){},Object.defineProperty(t.prototype,"gold",{get:function(){return this._gold},enumerable:!0,configurable:!0}),t.prototype.ImportMeshes=function(e,t){var n=e.length,i=[],a=[],o=0;e.forEach(function(e){BABYLON.SceneLoader.ImportMesh("",e.rootUrl,e.sceneFilename,s.SceneManager.ins.scene,function(e,s){try{i.push(e),a.push(s),++o==n&&t(i,a)}catch(e){console.error(e)}})})},t}(u.GameScenes);t.ExGameSceneCon=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),a=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.openModule=function(e){for(var t,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];(t=i.DisplayPool.ins.displayPool[e]).show.apply(t,n)},e}();t.GlobalManager=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.creatUI()}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatUI=function(){this.parent=new BABYLON.GUI.Rectangle;var e='\n            <style>\n            .button-play{\n                position: fixed;\n                top: 50%;\n                left:50%;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 42px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n                width: 200px;\n                height: 80px;\n                margin-left: -100px;\n                margin-top: 200px;\n            }\n            .button-play:active{\n              transform: scale(0.8);\n            }\n            .weather-config{\n                position: fixed;\n                top: 50%;\n                left:50%;\n                display: block;\n                background: #ffffff;\n                color: #82bab3;\n                border: 0px solid ;\n                font-size: 24px;\n                border-radius: 5px;\n                transform: scale(1);\n                width: 1000px;\n                height: 260px;\n                margin-left: -500px;\n                margin-top: -200px;\n                text-align: center;\n               \n            }\n            .weather-config ul li{\n                display: inline-block;\n                height: 200px;\n                width: 200px;\n                margin: 0px 5px;\n                border: 1px solid #cccccc;\n                cursor: pointer;\n                background-size: 100% 100%;\n                text-shadow: 0px 0px 5px #444;\n            }\n            \n            .weather-config ul li:hover{\n                border: 1px solid royalblue;\n            }\n            .we-active{\n                border: 3px solid #000 !important;\n                opacity: 0.8;\n            }\n            .yw-text{\n              font-size: 14px;\n            }\n            .box-tip{\n            margin-top: 60px;\n            }\n            \n            .map-list{\n                margin-top:-30px;\n                position: relative;\n                top: -30px;\n            }\n            .map-list select{\n                background: transparent;\n                padding: 7px;\n                color: #82bab3;\n                position: relative;\n                top: -2px;\n                font-size: 18px;\n                border-radius: 5px;\n                border: 1px solid #82bab3;\n            }\n            .box-tip{\n                background: rgba(0,0,0,0.2);\n                color: #ffffff;\n                padding: 10px;\n                font-size: 16px;\n                letter-spacing: 3px;\n                position: fixed;\n                bottom: 30px;\n                width:100%;\n                padding-left:20px;\n                text-align: center;\n            }\n\n            .about-btn{\n                position: fixed;\n                top: 20px;\n                left:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            .game-bg{\n                position: fixed;\n                top: 0;\n                left:0;\n                width:100%;\n                height:100%;\n                background-color: #349ccd;\n                background-size:100% 100%;\n            }\n            .logo{\n                position: fixed;\n                top: 5%;\n                left:50%;\n                width:500px;\n                height:160px;\n                margin-left:-250px;\n               \n                background-size:100% 100%;\n            }\n\n            </style>\n        \n            <div class="game-bg" id="GAME_BG">\n            <div>\n            <button class="about-btn" onclick="window.location.href=\'https://github.com/renjianfeng/LimitTransport\'">About The Author And Github</button>\n            </div>\n\n            <div class="logo" id="LOGO"></div>\n\n            <div class="weather-config">\n                <div class="map-list">\n                    <lable>\n                    MAP : <select id="MAP_LIST" name="mapList">\n                            <option value="{map:1,carposition:{ x:0,y:-60,z:160}}">The hills</option>\n                            <option value="{map:2,carposition:{ x:0,y:151,z:226}}">Cliff valley</option>\n                            <option value="{map:3,carposition:{ x:0,y:50,z:140}}">The lakes</option>\n                        </select>\n                    </lable>\n               \n                </div>\n                <ul>\n                  <li id="RAIN_DAY" class="we-active">大雨磅礴<br><span class="yw-text">The heavy rain made</span></li>\n                  <li id="SUNNY_DAY">晴空万里<br><span class="yw-text">a bright sky</span></li>\n                  <li id="AFTERNOON_DAY">晚霞时分<br><span class="yw-text">An evening at the</span></li>\n                  <li id="NIGHT_DAY">漫漫长夜<br><span class="yw-text">All night long</span></li>\n                </ul>\n               \n            </div>\n            \n            <button class="button-play" id="button_play">Play</button>\n            <div class="box-tip">\n            Tips : Direction(方向):[W,S,A,D]；Brake(刹车):[Space]；<br>\n           </div>\n            </div>\n           \n        ',t=document.createElement("div");t.id="startNode",t.innerHTML=e,document.title="LimitTransport(极限驾驶)",this.parent.sceneChild={viewHtml:e,viewNode:t}},Object.defineProperty(e.prototype,"guiObject",{get:function(){return this.parent},enumerable:!0,configurable:!0}),e}();t.ExStartGui=i},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),extendStatics;Object.defineProperty(exports,"__esModule",{value:!0});var ExStartGui_1=__webpack_require__(10),index_1=__webpack_require__(0),index_2=__webpack_require__(0),ExGameSceneCon_1=__webpack_require__(8),public_1=__webpack_require__(0),ExStartGuiCon=function(_super){function ExStartGuiCon(){var e=_super.call(this)||this;return e.scene=ExStartGui_1.ExStartGui.ins.guiObject.sceneChild,e.parent=ExStartGui_1.ExStartGui.ins.guiObject,e.gameSceneObject=ExGameSceneCon_1.ExGameSceneCon.ins,e}return __extends(ExStartGuiCon,_super),Object.defineProperty(ExStartGuiCon,"ins",{get:function(){return this.instance||(this.instance=new ExStartGuiCon),this.instance},enumerable:!0,configurable:!0}),ExStartGuiCon.prototype.addEvent=function(){var e=this;localStorage.weatherState=index_2.WeatherState.RAIN_DAY,document.body.appendChild(this.scene.viewNode),this.doEvents.viewPlay=document.getElementById("button_play").addEventListener("click",this.onClick_startBtn.bind(this)),this.doEvents.SUNNY_DAY=document.getElementById("SUNNY_DAY").addEventListener("click",function(e){localStorage.weatherState=index_2.WeatherState.SUNNY_DAY,console.log("当前dom"),document.querySelectorAll(".weather-config li").forEach(function(e){e.setAttribute("class","")}),e.path[0].setAttribute("class","we-active")}),this.doEvents.RAIN_DAY=document.getElementById("RAIN_DAY").addEventListener("click",function(e){localStorage.weatherState=index_2.WeatherState.RAIN_DAY,document.querySelectorAll(".weather-config li").forEach(function(e){e.setAttribute("class","")}),e.path[0].setAttribute("class","we-active")}),this.doEvents.AFTERNOON_DAY=document.getElementById("AFTERNOON_DAY").addEventListener("click",function(e){localStorage.weatherState=index_2.WeatherState.AFTERNOON_DAY,document.querySelectorAll(".weather-config li").forEach(function(e){e.setAttribute("class","")}),e.path[0].setAttribute("class","we-active")}),this.doEvents.NIGHT_DAY=document.getElementById("NIGHT_DAY").addEventListener("click",function(e){localStorage.weatherState=index_2.WeatherState.NIGHT_DAY,document.querySelectorAll(".weather-config li").forEach(function(e){e.setAttribute("class","")}),e.path[0].setAttribute("class","we-active")}),document.getElementById("LOGO").style.backgroundImage="url("+public_1.AssetsManager.ins.resourceObject.images.gameScene.logo.src+")",this.mapReset(),this.doEvents.MAP_LIST,document.getElementById("MAP_LIST").addEventListener("change",function(t){e.mapReset()}),document.getElementById("RAIN_DAY").style.backgroundImage="url("+public_1.AssetsManager.ins.resourceObject.images.gameScene.rain.src+")",document.getElementById("SUNNY_DAY").style.backgroundImage="url("+public_1.AssetsManager.ins.resourceObject.images.gameScene.sun.src+")",document.getElementById("AFTERNOON_DAY").style.backgroundImage="url("+public_1.AssetsManager.ins.resourceObject.images.gameScene.after.src+")",document.getElementById("NIGHT_DAY").style.backgroundImage="url("+public_1.AssetsManager.ins.resourceObject.images.gameScene.night.src+")"},ExStartGuiCon.prototype.mapReset=function(){document.getElementById("MAP_LIST").value;var _map=eval("("+document.getElementById("MAP_LIST").value+")");console.log(_map),localStorage.map=_map.map,localStorage.car_x=parseInt(_map.carposition.x),localStorage.car_y=parseInt(_map.carposition.y),localStorage.car_z=parseInt(_map.carposition.z),"1"==_map.map&&(document.getElementById("GAME_BG").style.backgroundImage="url("+public_1.AssetsManager.ins.resourceObject.images.gameScene.map1.src+")"),"2"==_map.map&&(document.getElementById("GAME_BG").style.backgroundImage="url("+public_1.AssetsManager.ins.resourceObject.images.gameScene.map2.src+")"),"3"==_map.map&&(document.getElementById("GAME_BG").style.backgroundImage="url("+public_1.AssetsManager.ins.resourceObject.images.gameScene.map3.src+")"),console.log(_map.carposition),console.log(localStorage)},ExStartGuiCon.prototype.onClick_startBtn=function(){_super.prototype.onClick_startBtn.call(this),this.removeEvent()},ExStartGuiCon.prototype.removeEvent=function(){if(_super.prototype.removeEvent.call(this),document.getElementById("startNode"))try{document.body.removeChild(this.scene.viewNode)}catch(e){console.log(e)}},ExStartGuiCon}(index_1.StartGui);exports.ExStartGuiCon=ExStartGuiCon},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.creatUI()}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatUI=function(){this.parent=new BABYLON.GUI.Rectangle;var e='\n            <style>\n            .button-view{\n                position: fixed;\n                top: 20px;\n                left:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            .button-view:active{\n              transform: scale(0.8);\n            }\n            .button-reset{\n                position: fixed;\n                top: 20px;\n                right:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            .about-btn{\n                position: fixed;\n                bottom: 20px;\n                right:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            button:active{\n              transform: scale(0.8);\n            }\n            </style>\n            \n            <button class="button-view" id="button_view">View</button>\n            <button class="button-reset" id="button_reset">Back</button>\n            <div>\n            <button class="about-btn" onclick="window.location.href=\'https://github.com/renjianfeng/LimitTransport\'">About The Author And Github</button>\n            </div>\n        ',t=document.createElement("div");t.id="viewNode",t.innerHTML=e,this.parent.sceneChild={viewHtml:e,viewNode:t}},Object.defineProperty(e.prototype,"guiObject",{get:function(){return this.parent},enumerable:!0,configurable:!0}),e}();t.ExGameSceneGui=i},function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(7),o=n(12),r=function(e){function t(){var t=e.call(this)||this;return t.scene=o.ExGameSceneGui.ins.guiObject.sceneChild,t.parent=o.ExGameSceneGui.ins.guiObject,t}return a(t,e),Object.defineProperty(t,"ins",{get:function(){return this.instance||(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(){var e=[];e.view=!0,console.log("按键事件"),console.log(this.scene.btnLeft),document.body.appendChild(this.scene.viewNode),this.doEvents.viewButton=document.getElementById("button_view").addEventListener("click",function(){e.view=!e.view,s.EventCon.ins.key.notifyObservers(e)}),this.doEvents.viewReset=document.getElementById("button_reset").addEventListener("click",function(){location.reload()})},t.prototype.removeEvent=function(){if(document.getElementById("viewNode"))try{document.body.removeChild(this.scene.viewNode)}catch(e){console.log(e)}},t}(n(0).GameSceneGui);t.ExGameSceneGuiCon=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(){function e(e){this.scene=e}return e.prototype.setCarMaterial=function(){new BABYLON.StandardMaterial("ss",this.scene);var e=new BABYLON.ReflectionProbe("main",64,this.scene);e.renderList.push(this.scene.getMeshByName("default")),e.renderList.push(this.scene.getMeshByName("skyBox")),this.scene.getMaterialByName("Material#2").reflectionTexture=e.cubeTexture,this.scene.getMaterialByName("Material#2").reflectionTexture.level=.4,this.scene.getMeshByName("Jeep GC-P 5").material.reflectionTexture=e.cubeTexture,this.scene.getMaterialByName("Материал #2").reflectionTexture=e.cubeTexture,this.scene.getMaterialByName("Material#12").reflectionTexture=e.cubeTexture,this.scene.getMaterialByName("Материал #13").reflectionTexture=e.cubeTexture,this.scene.getMaterialByName("Material#3").reflectionTexture=e.cubeTexture,this.scene.getMaterialByName("Material#1").reflectionTexture=e.cubeTexture,this.scene.getMeshByName("w1").material.subMaterials[0].reflectionTexture=e.cubeTexture,e.attachToMesh(this.scene.getMeshByName("car"));var t=new BABYLON.PBRMaterial("bxg",this.scene);t.albedoColor=new BABYLON.Color3(1,1,1),t.metallic=1,t.roughness=0,t.reflectionTexture=e.cubeTexture,this.scene.getMeshByName("Jeep GC-P 11").material=t,console.log("灯"),this.scene.getMeshByName("Jeep GC-P 25").material.emissiveColor=new BABYLON.Color3(1,1,1),this.scene.getMeshByName("Jeep GC-P 25").material.emissiveTexture=this.scene.getMeshByName("Jeep GC-P 25").material.diffuseTexture,this.scene.getMeshByName("Jeep GC-P 25").material.disableLighting=!0,this.scene.getMeshByName("Jeep GC-P 25").material.diffuseColor=new BABYLON.Color3(1,1,1),this.scene.getMeshByName("Jeep GC-P 25").material.specularColor=new BABYLON.Color3(1,1,1),this.scene.getMeshByName("Jeep GC-P 25").material.alpha=1,this.scene.getMeshByName("Plane001").material.opacityTexture=this.scene.getMaterialByName("carlight").emissiveTexture,this.scene.getMeshByName("Plane001").material.alpha=.2,this.scene.getMeshByName("Plane001").material.hasAlpha=!1,this.scene.getMeshByName("Plane001").material.backFaceCulling=!1,this.scene.getMeshByName("Jeep GC-P 20").material.emissiveTexture=this.scene.getMeshByName("Jeep GC-P 20").material.diffuseTexture,this.scene.getMeshByName("Jeep GC-P 20").material.emissiveTexture.level=.1,this.scene.getMeshByName("Jeep GC-P 20").material.emissiveColor=new BABYLON.Color3(1,0,0),this.scene.getMeshByName("lighting").material.emissiveColor=new BABYLON.Color3(1,0,0),this.scene.getMeshByName("lighting").material.diffuseColor=new BABYLON.Color3(1,0,0),this.scene.getMeshByName("lighting").material.diffuseTexture=new BABYLON.Texture(i.AssetsManager.ins.resourceObject.textures.gameScene.lighting,this.scene),this.scene.getMeshByName("lighting").material.opacityTexture=new BABYLON.Texture(i.AssetsManager.ins.resourceObject.textures.gameScene.lighting,this.scene),this.scene.getMeshByName("lighting").material.emissiveTexture=new BABYLON.Texture(i.AssetsManager.ins.resourceObject.textures.gameScene.lighting,this.scene),this.scene.getMeshByName("lighting").material.emissiveTexture.level=1,this.scene.getMeshByName("lighting").material.backFaceCulling=!1,this.scene.getMeshByName("lighting").material.disableLighting=!0,this.scene.getMeshByName("lighting").material.fogEnabled=!1,console.log("灯光"),console.log(this.scene.getMaterialByName("carlight")),console.log(this.scene.getMeshByName("Jeep GC-P 25").material)},e}();t.UseMaterial=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=function(){function e(e,t,n){this.text={forceOn:0,brakeOn:0},this.babylonWheelBodies=[],this.sphere=[],this.wheelBodies=[],this.zxState=0,this.brakeForce=100,this.maxSteerVal=.5,this.maxForce=1500,this.gravityY=-26,this.options={radius:.5,directionLocal:new CANNON.Vec3(0,0,-1),suspensionStiffness:30,suspensionRestLength:.3,frictionSlip:5,dampingRelaxation:2.3,dampingCompression:4.4,maxSuspensionForce:1e7,rollInfluence:.01,axleLocal:new CANNON.Vec3(0,1,0),chassisConnectionPointLocal:new CANNON.Vec3(1,1,0),maxSuspensionTravel:.3,customSlidingRotationalSpeed:-300,useCustomSlidingRotationalSpeed:!0},this.gravity=new BABYLON.Vector3(0,this.gravityY,0),this.scene=e,this.shadowGenerator=t,this.carposition=n,console.log(this.carposition)}return e.prototype.HeightMap=function(e,t){for(var n=e.getVerticesData(BABYLON.VertexBuffer.PositionKind),i=[],a=t||~~(Math.sqrt(n.length/3)-1),s=2*Math.min(e.getBoundingInfo().boundingBox.extendSize.x,e.getBoundingInfo().boundingBox.extendSize.z)/a,o=e.getBoundingInfo().boundingBox.extendSize.y,r=0;r<n.length;r+=3){var c=Math.round(n[r+0]/s+a/2),l=Math.round(-1*(n[r+2]/s-a/2)),u=n[r+1]+o;i[c]||(i[c]=[]),i[c][l]||(i[c][l]=u),i[c][l]=Math.max(u,i[c][l])}for(c=0;c<=a;++c){if(!i[c]){for(var h=1;!i[(c+h)%a];)h++;i[c]=i[(c+h)%a].slice()}for(l=0;l<=a;++l)if(!i[c][l]){var p;for(h=1;void 0===p;)p=i[c][(l+h++)%a];i[c][l]=p}}var d=new CANNON.Heightfield(i,{elementSize:s});console.log(e.getBoundingInfo().boundingBox),this.heightBody=new CANNON.Body({mass:0,shape:d}),this.heightBody.position.y=-e.getBoundingInfo().boundingBox.extendSize.y,this.heightBody.position.x=-e.getBoundingInfo().boundingBox.extendSize.x,this.heightBody.position.z=e.getBoundingInfo().boundingBox.extendSize.z,this.heightBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2),this.world=this.createPhysics(this.heightBody)},e.prototype.createPhysics=function(e){this.world=new CANNON.World,this.world.gravity.set(this.gravity.x,this.gravity.y,this.gravity.z),this.world.broadphase=new CANNON.NaiveBroadphase,this.world.defaultContactMaterial.friction=.001;var t=new CANNON.Material("groundMaterial"),n=new CANNON.Material("wheelMaterial"),i=window.wheelGroundContactMaterial=new CANNON.ContactMaterial(n,t,{friction:0,restitution:0,contactEquationStiffness:1e3});return this.world.addContactMaterial(i),this.world.add(e),this.cannonCar=this.createCannonVehicle(),this.world},e.prototype.createCannonVehicle=function(){var e=this,t=new CANNON.Vec3(4,1,.5);this.chassisShape=new CANNON.Box(t),this.chassisBody=new CANNON.Body({mass:500}),this.chassisBody.addShape(this.chassisShape),this.chassisBody.position.set(this.carposition.x,this.carposition.y,this.carposition.z),this.chassisBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2),this.chassisBody.angularVelocity.set(0,0,.2),this.babylonCarBox=this.createBabylonChassisBody(this.chassisBody),this.vehicle=new CANNON.RaycastVehicle({chassisBody:this.chassisBody}),this.options.chassisConnectionPointLocal.set(2.5,1.2,-.3),this.vehicle.addWheel(this.options),this.options.chassisConnectionPointLocal.set(2.5,-1.2,-.3),this.vehicle.addWheel(this.options),this.options.chassisConnectionPointLocal.set(-2.5,1.2,-.3),this.vehicle.addWheel(this.options),this.options.chassisConnectionPointLocal.set(-2.5,-1.2,-.3),this.vehicle.addWheel(this.options),this.vehicle.addToWorld(this.world);for(var n=[],a=0;a<this.vehicle.wheelInfos.length;a++){var s=this.vehicle.wheelInfos[a],o=new CANNON.Cylinder(s.radius,s.radius,s.radius/2,20),r=new CANNON.Body({mass:800});r.type=CANNON.Body.KINEMATIC,r.collisionFilterGroup=0;var c=new CANNON.Quaternion;c.setFromAxisAngle(new CANNON.Vec3(1,0,0),Math.PI/2),r.addShape(o,new CANNON.Vec3,c),n.push(r),this.createBabylonWheelBodies(r),this.world.add(r)}var l=this.scene.getMeshByName("w1").clone();l.isVisible=!0,l.name="w1_1",l.rotation.z=.5*-Math.PI,this.shadowGenerator.getShadowMap().renderList.push(l),l.material.subMaterials.forEach(function(e){e.backFaceCulling=!1});var u=this.scene.getMeshByName("w1").clone();u.isVisible=!0,u.rotation.z=.5*-Math.PI,u.name="w2_1",this.shadowGenerator.getShadowMap().renderList.push(u);var h=this.scene.getMeshByName("w1").clone();h.isVisible=!0,h.rotation.z=.5*-Math.PI,h.name="w3_1",this.shadowGenerator.getShadowMap().renderList.push(h);var p=this.scene.getMeshByName("w1").clone();return p.isVisible=!0,p.rotation.z=.5*-Math.PI,p.name="w4_1",u.scaling.x=-this.scene.getMeshByName("w1").scaling.x,u.position.y=-this.scene.getMeshByName("w1").position.y,p.scaling.x=-this.scene.getMeshByName("w1").scaling.x,p.position.y=-this.scene.getMeshByName("w1").position.y,this.shadowGenerator.getShadowMap().renderList.push(p),this.world.addEventListener("postStep",function(){e.scene.getMeshByName("w1").rotation.y=3;for(var t=0;t<e.vehicle.wheelInfos.length;t++){e.vehicle.updateWheelTransform(t);var i=e.vehicle.wheelInfos[t].worldTransform,a=n[t];a.position.copy(i.position),a.quaternion.copy(i.quaternion),e.babylonWheelBodies[t]&&(e.babylonWheelBodies[t].position=a.position,e.babylonWheelBodies[t].rotationQuaternion=new BABYLON.Quaternion(i.quaternion.x,i.quaternion.y,i.quaternion.z,i.quaternion.w)),l.parent=e.babylonWheelBodies[0],u.parent=e.babylonWheelBodies[1],h.parent=e.babylonWheelBodies[2],p.parent=e.babylonWheelBodies[3]}}),i.SceneManager.ins.engine.runRenderLoop(function(){e.world&&e.world.step(1/60),e.babylonCarBox&&(e.babylonCarBox.position=e.chassisBody.position,e.babylonCarBox.rotationQuaternion=new BABYLON.Quaternion(e.chassisBody.quaternion.x,e.chassisBody.quaternion.y,e.chassisBody.quaternion.z,e.chassisBody.quaternion.w))}),this.vehicle},e.prototype.createBabylonChassisBody=function(e){var t=e.shapes[0].halfExtents,n=BABYLON.MeshBuilder.CreateBox("carBox",{height:2*t.y,width:2*t.x,depth:2*t.z},this.scene);return n.rotationQuaternion=new BABYLON.Quaternion,n.isVisible=!1,this.scene.getMeshByName("car").parent=n,n},e.prototype.createBabylonWheelBodies=function(e){var t=e.shapes[0].boundingSphereRadius,n=BABYLON.MeshBuilder.CreateCylinder("wheel",{height:t},this.scene);n.scaling.z=2*t,n.scaling.x=2*t,n.rotationQuaternion=new BABYLON.Quaternion,n.receiveShadows=!0,n.isVisible=!1,this.babylonWheelBodies.push(n)},e.prototype.createBabylonBody=function(e){var t=e.shapes[0].halfExtents,n=BABYLON.MeshBuilder.CreateBox("boxdh",{height:2*t.y,width:2*t.x,depth:2*t.z},this.scene);return n.rotationQuaternion=new BABYLON.Quaternion,n},e.prototype.createCannonBox=function(){var e=new CANNON.Vec3(2,1,.5);this.chassisShape=new CANNON.Box(e),this.boxBody=new CANNON.Body({mass:10}),this.boxBody.addShape(this.chassisShape),this.boxBody.position.set(0,100,140),this.boxBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2),this.boxBody.angularVelocity.set(0,0,.2),this.babylonBox=this.createBabylonBody(this.boxBody),this.world.add(this.boxBody)},e.prototype.carCtrl=function(){var e=this;document.addEventListener("keydown",function(t){console.log(5555666),e.handlerDown(t)}),document.addEventListener("keyup",function(t){e.handlerUp(t)});var t=0;this.scene.onAfterRenderObservable.add(function(){0==e.zxState?t>0?(t-=.03)<=.03&&(t=0):t<0&&(t+=.03)>=-.03&&(t=0):1==e.zxState?t>e.maxSteerVal?t=t:t+=.03:2==e.zxState&&(t<-e.maxSteerVal?t=t:t-=.03),e.cannonCar&&(e.scene.getMeshByName("steering").rotation.x=4*-t,e.cannonCar.setSteeringValue(t,1),e.cannonCar.setSteeringValue(t,0))})},e.prototype.handlerUp=function(e){this.cannonCar.setBrake(0,0),this.cannonCar.setBrake(0,1),this.cannonCar.setBrake(0,2),this.cannonCar.setBrake(0,3),87===e.keyCode&&(this.cannonCar.applyEngineForce(0,0),this.cannonCar.applyEngineForce(0,1),this.cannonCar.applyEngineForce(0,2),this.cannonCar.applyEngineForce(0,3)),83===e.keyCode&&(this.cannonCar.applyEngineForce(0,0),this.cannonCar.applyEngineForce(0,1),this.cannonCar.applyEngineForce(0,2),this.cannonCar.applyEngineForce(0,3)),32===e.keyCode&&(this.cannonCar.setBrake(0,0),this.cannonCar.setBrake(0,1),this.cannonCar.setBrake(0,2),this.cannonCar.setBrake(0,3),this.scene.getMeshByName("Jeep GC-P 20").material.emissiveTexture.level=.1),65===e.keyCode&&(this.zxState=0),68===e.keyCode&&(this.zxState=0)},e.prototype.handlerDown=function(e){this.cannonCar.setBrake(0,0),this.cannonCar.setBrake(0,1),this.cannonCar.setBrake(0,2),this.cannonCar.setBrake(0,3),87===e.keyCode&&(1===this.text.forceOn?(this.cannonCar.applyEngineForce(-this.maxForce,2),this.cannonCar.applyEngineForce(-this.maxForce,3)):2===this.text.forceOn?(this.cannonCar.applyEngineForce(-this.maxForce,0),this.cannonCar.applyEngineForce(-this.maxForce,1)):(this.cannonCar.applyEngineForce(-this.maxForce,0),this.cannonCar.applyEngineForce(-this.maxForce,1),this.cannonCar.applyEngineForce(-this.maxForce,2),this.cannonCar.applyEngineForce(-this.maxForce,3))),83===e.keyCode&&(1===this.text.forceOn?(this.cannonCar.applyEngineForce(this.maxForce,2),this.cannonCar.applyEngineForce(this.maxForce,3)):2===this.text.forceOn?(this.cannonCar.applyEngineForce(this.maxForce,0),this.cannonCar.applyEngineForce(this.maxForce,1)):(this.cannonCar.applyEngineForce(this.maxForce,0),this.cannonCar.applyEngineForce(this.maxForce,1),this.cannonCar.applyEngineForce(this.maxForce,2),this.cannonCar.applyEngineForce(this.maxForce,3))),32===e.keyCode&&(1===this.text.brakeOn?(this.cannonCar.setBrake(this.brakeForce,2),this.cannonCar.setBrake(this.brakeForce,3)):2===this.text.brakeOn?(this.cannonCar.setBrake(this.brakeForce,0),this.cannonCar.setBrake(this.brakeForce,1)):(this.cannonCar.setBrake(this.brakeForce,0),this.cannonCar.setBrake(this.brakeForce,1),this.cannonCar.setBrake(this.brakeForce,2),this.cannonCar.setBrake(this.brakeForce,3)),this.scene.getMeshByName("Jeep GC-P 20").material.emissiveTexture.level=1),65===e.keyCode&&(this.zxState=2),68===e.keyCode&&(this.zxState=1)},e}();t.CannonCreateObj=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=n(0),s=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatScene=function(){this.scene=a.SceneManager.ins.scene,this.scene.clearColor=new BABYLON.Color4(52/255,156/255,1);var e=new BABYLON.ArcRotateCamera("ArcRotateCamera",1,.8,10,new BABYLON.Vector3(0,200,0),this.scene);e.alpha=1*-Math.PI,e.beta=1.260483446598473,e.attachControl(a.SceneManager.ins.canvas,!1),e.upperRadiusLimit=15,e.lowerRadiusLimit=15,this.scene.activeCamera=e;var t=BABYLON.MeshBuilder.CreateBox("camera2Box",{height:2,width:2,depth:2},this.scene);t.isVisible=!1,t.rotation=new BABYLON.Vector3(.5*Math.PI,0,0);var n=BABYLON.MeshBuilder.CreateBox("steering",{height:2e3,width:2e3,depth:2e3},this.scene);n.visibility=0,n.scaling=new BABYLON.Vector3(.001,.001,.001),n.rotation=new BABYLON.Vector3(0,.3,.5*Math.PI);var s=new BABYLON.UniversalCamera("UniversalCamera",new BABYLON.Vector3(.2,1.1,.6),this.scene);s.rotation.y=.5*Math.PI,s.attachControl(a.SceneManager.ins.canvas),s.detachControl(a.SceneManager.ins.canvas),s.minZ=0,s.parent=t;var o=new BABYLON.HemisphericLight("HemiLight",new BABYLON.Vector3(0,10,0),this.scene);o.intensity=.1;var r=new BABYLON.HemisphericLight("HemiLight",new BABYLON.Vector3(0,-10,0),this.scene);r.intensity=.1;var c=new BABYLON.DirectionalLight("DirectionalLight",new BABYLON.Vector3(.2,-.3,.2),this.scene);c.intensity=.2,c.shadowFrustumSize=200,c.shadowMinZ=-100,c.shadowMaxZ=100;var l=BABYLON.Mesh.CreateBox("skyBox",1e3,this.scene),u=new BABYLON.StandardMaterial("skyBox",this.scene);u.backFaceCulling=!1,u.reflectionTexture=i.AssetsManager.ins.resourceObject.cubeTextures.gameScene.skybox.clone(),u.reflectionTexture.coordinatesMode=BABYLON.Texture.SKYBOX_MODE,u.diffuseColor=new BABYLON.Color3(0,0,0),u.specularColor=new BABYLON.Color3(0,0,0),u.disableLighting=!1,l.material=u;var h=new BABYLON.TerrainMaterial("terrainMaterial",this.scene);"1"==localStorage.map?h.mixTexture=i.AssetsManager.ins.resourceObject.textures.gameScene.maptr2.clone():h.mixTexture=i.AssetsManager.ins.resourceObject.textures.gameScene.maptr.clone(),h.diffuseTexture1=i.AssetsManager.ins.resourceObject.textures.gameScene.grass.clone(),h.diffuseTexture1.uScale=20,h.diffuseTexture1.vScale=20,h.diffuseTexture2=i.AssetsManager.ins.resourceObject.textures.gameScene.grass.clone(),h.diffuseTexture2.uScale=20,h.diffuseTexture2.vScale=20,h.diffuseTexture3=i.AssetsManager.ins.resourceObject.textures.gameScene.ground.clone(),h.diffuseTexture3.uScale=20,h.diffuseTexture3.vScale=20;var p=new BABYLON.ParticleSystem("particles",2e3,this.scene);p.particleTexture=i.AssetsManager.ins.resourceObject.textures.gameScene.yu.clone(),p.minEmitBox=new BABYLON.Vector3(-100,-100,0),p.maxEmitBox=new BABYLON.Vector3(100,100,0),p.color1=new BABYLON.Color4(1,1,1,1),p.color2=new BABYLON.Color4(1,1,1,1),p.colorDead=new BABYLON.Color4(1,1,1,1),p.gravity=new BABYLON.Vector3(0,-9.81,-2),p.minSize=5,p.maxSize=5,p.minLifeTime=5,p.maxLifeTime=5,p.emitRate=600,p.blendMode=BABYLON.ParticleSystem.BLENDMODE_STANDARD,p.direction1=new BABYLON.Vector3(1,1,1),p.direction2=new BABYLON.Vector3(-1,-1,-1),p.minEmitPower=1,p.maxEmitPower=1,p.updateSpeed=.3;var d=new BABYLON.ShadowGenerator(4096,c);d.bias=4e-4,d.usePercentageCloserFiltering=!0,d.filteringQuality=.1,d.forceBackFacesOnly=!0;var g=new BABYLON.RefractionPostProcess("Refraction","",new BABYLON.Color3(1,1,1),.05,.01,1,e),m=new BABYLON.RefractionPostProcess("Refraction","",new BABYLON.Color3(1,1,1),.05,.01,1,s),f=new BABYLON.VideoTexture("video",[i.AssetsManager.ins.resourceObject.binarys.gameScene.rain.url],this.scene,!0);this.scene.registerBeforeRender(function(){1==f.isReady()&&(f.video.loop=!0,f.video.play())}),g.refractionTexture=f,m.refractionTexture=f;var y=new BABYLON.SpotLight("spotLight",new BABYLON.Vector3(0,0,0),new BABYLON.Vector3(1,0,0),1.2,1.3,this.scene);y.range=60,y.intensity=0,y.projectionTexture=new BABYLON.Texture(i.AssetsManager.ins.resourceObject.textures.gameScene.stainedGlass,this.scene);var B=BABYLON.Mesh.CreateGround("lighting",200,200,0,this.scene);B.rotation.z=.5*-Math.PI,B.billboardMode=2;var b=new BABYLON.StandardMaterial("lightingMaterial",this.scene);B.material=b,B.visibility=0,B.rotation.y=.5*-Math.PI;var v=BABYLON.Mesh.CreateGround("ground1",3,3,0,this.scene);v.isVisible=!1;var N=BABYLON.Mesh.CreateGround("waterMesh",512,512,32,this.scene,!1);N.position.y=123;var O=new BABYLON.WaterMaterial("water",this.scene,new BABYLON.Vector2(512,512));O.backFaceCulling=!0,O.bumpTexture=new BABYLON.Texture(i.AssetsManager.ins.resourceObject.textures.gameScene.waterbump,this.scene),O.windForce=-10,O.waveHeight=0,O.bumpHeight=.5,O.waterColor=new BABYLON.Color3(158/255,133/255,93/255),O.colorBlendFactor=.4,N.material=O;var A=BABYLON.Mesh.CreateSphere("centerHidenPick",16,.1,this.scene);A.visibility=0,A.position=new BABYLON.Vector3(1350.799,1000.817,-3e3);var M=new BABYLON.LensFlareSystem("lensFlareSystem",A,this.scene);new BABYLON.LensFlare(1.5,1,new BABYLON.Color3(1,1,1),i.AssetsManager.ins.resourceObject.images.gameScene.ty.src,M),new BABYLON.LensFlare(.24,1,new BABYLON.Color3(0,1,0),i.AssetsManager.ins.resourceObject.images.gameScene.Bphl4qj.src,M),new BABYLON.LensFlare(.28,1,new BABYLON.Color3(0,0,1),i.AssetsManager.ins.resourceObject.images.gameScene.Bphl4qj.src,M),new BABYLON.LensFlare(.2,.8,new BABYLON.Color3(.5,.7,1),i.AssetsManager.ins.resourceObject.images.gameScene.IIyZhcg.src,M),new BABYLON.LensFlare(.2,.6,new BABYLON.Color3(.5,.5,1),i.AssetsManager.ins.resourceObject.images.gameScene.HRsf4I5.src,M),new BABYLON.LensFlare(.4,.5,new BABYLON.Color3(.4,.6,.9),i.AssetsManager.ins.resourceObject.images.gameScene.XaJRD9j.src,M),new BABYLON.LensFlare(.1,.35,new BABYLON.Color3(.5,.5,.9),i.AssetsManager.ins.resourceObject.images.gameScene.it5c3Vr.src,M),new BABYLON.LensFlare(.12,-.5,new BABYLON.Color3(.9,.75,.5),i.AssetsManager.ins.resourceObject.images.gameScene.XaJRD9j.src,M),new BABYLON.LensFlare(.25,-.25,new BABYLON.Color3(1,.85,.5),i.AssetsManager.ins.resourceObject.images.gameScene.IIyZhcg.src,M),this.display={camera:e,camera2:s,light:o,light2:r,light3:c,light4:y,lightLook:v,camera2Box:t,skybox:l,particleRain:p,terrainMaterial:h,shadowGenerator:d,waterMesh:N,water:O,steering:n,postProcess:g,postProcess1:m,lensFlareSystem3:M,lighting:B},console.log(this.display)},e}();t.ExGameScene=s},function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),o=n(4),r=n(3),c=n(2),l=n(6),u=n(5),h=function(e){function t(){var t=e.call(this)||this;return t.doEvents=[],t.panelsAn=new o.AnimationGui(r.SceneManager.ins.scene,c.GuiManager.ins.fullscreenUI),t.initUI(),t}return a(t,e),t.prototype.show=function(e){this.updateData(),this.addEvent(),c.GuiManager.ins.changeGui(this.parent)},t.prototype.hide=function(){},t.prototype.onOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onOpened=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.init=function(){u.DisplayPool.ins.displayPool[l.ModuleName.GAME_PLAY_GUI]=this},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.updateData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeEvent(),this.isInit||(this.initUI(),this.isInit=!0)},t.prototype.onClose=function(){},t.prototype.onClosed=function(){this.removeEvent()},t}(s.Module);t.GameSceneGui=h},function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),o=n(4),r=n(3),c=n(2),l=n(5),u=n(6),h=n(9),p=function(e){function t(){var t=e.call(this)||this;return t.doEvents=[],t.panelsAn=new o.AnimationGui(r.SceneManager.ins.scene,c.GuiManager.ins.fullscreenUI),t.initUI(),t}return a(t,e),t.prototype.show=function(e){this.removeEvent(),this.updateData(),this.addEvent(),c.GuiManager.ins.changeGui(this.parent)},t.prototype.hide=function(){var e=this;this.removeEvent(),this.panelsAn.hide(this.view,function(){e.onClose()},function(){e.onClosed()})},t.prototype.onOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onOpened=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.init=function(){l.DisplayPool.ins.displayPool[u.ModuleName.GAME_START_GUI]=this},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.onClick_ruleBtn=function(){},t.prototype.onClick_optionBtn=function(){},t.prototype.onClick_startBtn=function(){h.GlobalManager.ins.openModule(u.ModuleName.GAME_PLAY_GUI),h.GlobalManager.ins.openModule(u.ModuleName.GAME_PLAY_SCENE)},t.prototype.updateData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isInit||(this.initUI(),this.isInit=!0)},t.prototype.onClose=function(){this.removeHtml()},t.prototype.removeHtml=function(){this.section&&document.body.removeChild(this.section)},t.prototype.onClosed=function(){this.removeEvent()},t}(s.Module);t.StartGui=p},function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return e.call(this)||this}return a(t,e),t}(n(1).Module);t.Guis=s},function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),o=n(2),r=n(1),c=n(4),l=function(e){function t(){var t=e.call(this)||this;return t.panelsAn=new c.AnimationGui(s.SceneManager.ins.scene,o.GuiManager.ins.fullscreenUI),t}return a(t,e),t.prototype.show=function(e,t){this.addEvent(),this.panelsAn.show(this.view,e,t)},t.prototype.hide=function(e,t){this.removeEvent(),this.panelsAn.hide(this.view,e,t)},t}(r.Module);t.Panels=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=function(){function e(){this.panelOut=new BABYLON.GUI.StackPanel}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.createList=function(e,t,n){var i,a=this,s=new BABYLON.GUI.Rectangle;for(var o in s.thickness=0,s.isPointerBlocker=!0,s.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,s.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,t)s[o]&&(s[o]=t[o]);return t&&t.isVertical?(this.panelOut.horizontalAlignment=2,this.panelOut.verticalAlignment=0,this.panelOut.isVertical=!0,(i={up:0,down:0}).up=parseInt(this.panelOut.top.toString()),s.onPointerDownObservable.add(function(e){i.down=e.y}),s.onPointerUpObservable.add(function(e){var t=parseInt(a.panelOut.top.toString());if(i.up=t,t>0)a.panelOut.top="0px",i.up=0;else if(parseInt(a.panelOut.top.toString())<parseInt(s.height.toString())-parseInt(a.panelOut.height.toString())){var o=(parseInt(s.height.toString())-parseInt(a.panelOut.height.toString()))*n;a.panelOut.top=o.toString()+"px",i.up=parseInt(a.panelOut.top)}}),s.onPointerMoveObservable.add(function(e){var t=e.y-i.down,s=(i.up+t)*n;a.panelOut.top=s.toString()+"px"})):(this.panelOut.horizontalAlignment=0,this.panelOut.verticalAlignment=2,this.panelOut.isVertical=!1,(i={up:0,down:0}).up=parseInt(this.panelOut.left.toString()),s.onPointerDownObservable.add(function(e){i.down=e.x}),s.onPointerUpObservable.add(function(e){var t=parseInt(a.panelOut.left.toString());if(i.up=t,t>0)a.panelOut.left="0px",i.up=0;else if(parseInt(a.panelOut.left.toString())<parseInt(s.width.toString())-parseInt(a.panelOut.width.toString())){var o=(parseInt(s.width.toString())-parseInt(a.panelOut.width.toString()))*n;a.panelOut.left=o.toString()+"px",i.up=parseInt(a.panelOut.left)}}),s.onPointerMoveObservable.add(function(e){var t=e.x-i.down,a=(i.up+t)*n;this.panelOut.left=a.toString()+"px"})),s.addControl(this.panelOut),s},e.prototype.optionsListCon=function(e,t,n){var a=this,s=i.GuiManager.ins.fullscreenUI.idealWidth/document.getElementById("renderCanvas").offsetWidth,o=this.createList("list",{width:e.bodyWidth,height:e.bodyHeight,top:e.bodyTop,left:e.bodyLeft,isVertical:e.isVertical},s),r=this.panelOut.children.length;if(r>0)for(var c=0;c<r;c++)this.panelOut.removeControl(this.panelOut.children[0]);return t.optionList.forEach(function(t){var i=n(e,t);a.panelOut.addControl(i)}),o},e}();t.GuiCreate=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this.fountain=BABYLON.Mesh.CreateBox("fountain",1,t),this.fountain.isPickable=!1,this.fountain.visibility=0,this.fountain.rotation.x=.9*Math.PI,this.particleSystem=n,this.particleSystem.emitter=this.fountain,this.particleSystem.stop(),this.fountain.position=e}return e.prototype.start=function(){this.particleSystem.start()},e.prototype.stop=function(){this.particleSystem.stop()},e.prototype.Position=function(e){this.fountain.position=e},e.prototype.Parent=function(e){this.fountain.parent=e},e}();t.particleCon=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.animationBody=function(e,t){var n,i,a,s,o,r,c,l;n=null!=e.endattr?e.endattr:BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE,null!=e.mesh?i=e.mesh:(i=null,console.error("动画对象不能为空！")),null!=e.attr?a=e.attr:(a=null,console.error("动画对象属性不能为空！")),s=null!=e.speed?e.speed:10,o=null!=e.keys?e.keys:[],r=null!=e.endCall?e.endCall:function(){},c=null!=e.typeData?e.typedata:BABYLON.Animation.ANIMATIONTYPE_FLOAT,l=null!=e.loop&&e.loop;var u,h=new BABYLON.Animation("myAnimation",a,s,c,n);u=o,h.setKeys(u),i.animations.push(h),this.setbeginAnimation=t.beginAnimation(i,0,o[o.length-1].frame,l),this.setbeginAnimation.onAnimationEnd=function(){r()}},e.prototype.Pause=function(){this.setbeginAnimation.pause()},e.prototype.Reset=function(){this.setbeginAnimation.reset()},e.prototype.Speed=function(e){this.setbeginAnimation.speedRatio=e},e}();t.AnimationCon=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._resourceObject={binarys:{},images:{},models:{},textures:{},cubeTextures:{}}}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourceData",{set:function(e){this._resourceData=e},enumerable:!0,configurable:!0}),e.prototype.loadFile=function(e,t,n,i){var a=new BABYLON.AssetsManager(t);e.forEach(function(e){var t={};this._resourceData[e].models.forEach(function(n){a.addMeshTask("skull task","",n.filePath,n.fileName).onSuccess=function(i){console.log("meshTask"),console.log(i),i.loadedMeshes.forEach(function(e){e.isVisible=!1,e.name="noneisVisible_"+e});var a=i;t[n.name]=a,this._resourceObject.models[e]=t}.bind(this)}.bind(this));var n={};this._resourceData[e].images.forEach(function(t){a.addImageTask("image task",t.filePath+t.fileName).onSuccess=function(i){n[t.name]=i.image,this._resourceObject.images[e]=n}.bind(this)}.bind(this));var i={};this._resourceData[e].textures.forEach(function(t){a.addTextureTask("texture task",t.filePath+t.fileName).onSuccess=function(n){i[t.name]=n.texture,this._resourceObject.textures[e]=i}.bind(this)}.bind(this));var s={};this._resourceData[e].binarys.forEach(function(t){a.addBinaryFileTask("binary task",t.filePath+t.fileName).onSuccess=function(n){console.log(6666677),s[t.name]=n.data,s[t.name].url=n.url,s[t.name].rootUrl=t.filePath,s[t.name].sceneFilename=t.fileName,this._resourceObject.binarys[e]=s,console.log(s[t.name])}.bind(this)}.bind(this));var o={};this._resourceData[e].cubeTextures.forEach(function(t){a.addCubeTextureTask("cubeTexture task",t.filePath+t.fileName).onSuccess=function(n){o[t.name]=n.texture,this._resourceObject.cubeTextures[e]=o}.bind(this)}.bind(this))}.bind(this)),a.load(),a.onProgress=function(e){var t={totalTasksCount:a._totalTasksCount,waitingTasksCount:a._waitingTasksCount,loadCount:(a._totalTasksCount-a._waitingTasksCount)/a._totalTasksCount};i(t)}.bind(this),a.onFinish=function(e){n()}.bind(this)},Object.defineProperty(e.prototype,"resourceObject",{get:function(){return this._resourceObject},enumerable:!0,configurable:!0}),e}();t.AssetsManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.SUNNY_DAY=0]="SUNNY_DAY",e[e.RAIN_DAY=1]="RAIN_DAY",e[e.AFTERNOON_DAY=2]="AFTERNOON_DAY",e[e.NIGHT_DAY=3]="NIGHT_DAY"}(t.WeatherState||(t.WeatherState={}))},function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),o=n(3),r=function(e){function t(){return e.call(this)||this}return a(t,e),t.prototype.dispose=function(){var e;for(e in this.display)console.log(this.display[e]),this.display[e]&&this.display[e].dispose()},t.prototype.show=function(e){this.resetGame(),o.SceneManager.ins.change(this.display)},t.prototype.resetGame=function(){},t.prototype.gameOver=function(){this.removeEvent()},t}(s.Module);t.GameScenes=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.musicLoop=function(){},e}();t.SceneBeforeCall=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e;this.pathFirst=window.resPath,e={binarys:[{name:"rain",filePath:this.pathFirst+"src/Resource/gameScene/binarys/",fileName:"rain.mp4"}],images:[{name:"Bphl4qj",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"Bphl4qj.png"},{name:"HRsf4I5",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"HRsf4I5.png"},{name:"IIyZhcg",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"IIyZhcg.png"},{name:"it5c3Vr",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"it5c3Vr.png"},{name:"ty",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"ty.png"},{name:"XaJRD9j",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"XaJRD9j.png"},{name:"after",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"after.jpg"},{name:"night",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"night.jpg"},{name:"rain",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"rain.jpg"},{name:"sun",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"sun.jpg"},{name:"map1",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"map_1.jpg"},{name:"map2",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"map_2.jpg"},{name:"map3",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"map_3.jpg"},{name:"logo",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"logo.png"}],models:[{name:"car",filePath:this.pathFirst+"src/Resource/gameScene/models/car2/",fileName:"car20.babylon"},{name:"wheel",filePath:this.pathFirst+"src/Resource/gameScene/models/car2/",fileName:"wheel.babylon"},{name:"map1",filePath:this.pathFirst+"src/Resource/gameScene/models/height_m2/",fileName:"height_m18.babylon"},{name:"map2",filePath:this.pathFirst+"src/Resource/gameScene/models/height_m2/",fileName:"height_m15.babylon"},{name:"map3",filePath:this.pathFirst+"src/Resource/gameScene/models/height_m2/",fileName:"height_m2.babylon"}],textures:[{name:"grass",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"grass.png"},{name:"grass2",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"grass.jpg"},{name:"ground",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"ground.jpg"},{name:"maptr",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"maptr.jpg"},{name:"maptr2",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"maptr5.jpg"},{name:"stainedGlass",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"stainedGlass.png"},{name:"waterbump",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"waterbump.png"},{name:"yu",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"yu.png"},{name:"lighting",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"lighting4.png"}],cubeTextures:[{name:"skybox",filePath:this.pathFirst+"src/Resource/gameScene/cubeTextures/skybox/",fileName:"skybox"}]},this._resource={gameScene:e}}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),e}();t.ResourceCon=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(28),a=n(27),s=n(0),o=n(0),r=n(0),c=n(0),l=n(0),u=n(8),h=n(13),p=n(11),d=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.update=function(){localStorage.map="1",localStorage.car_x=0,localStorage.car_y=151,localStorage.car_z=226,s.AssetsManager.ins.resourceData=i.ResourceCon.ins.resource,s.AssetsManager.ins.loadFile(["gameScene"],o.SceneManager.ins.scene,function(){this.initModule(),console.log(c.DisplayPool.ins.displayPool),r.GlobalManager.ins.openModule(l.ModuleName.GAME_START_GUI),a.SceneBeforeCall.ins.musicLoop()}.bind(this),function(e){console.log(e.loadCount)}.bind(this))},e.prototype.addEvent=function(){},e.prototype.initModule=function(){u.ExGameSceneCon.ins.init(),p.ExStartGuiCon.ins.init(),h.ExGameSceneGuiCon.ins.init()},e}();t.Before=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(29);window.addEventListener("load",function(){var e=navigator.userAgent,t=!e.match(/(iPad).*OS\s([\d_]+)/)&&e.match(/(iPhone\sOS)\s([\d_]+)/),n=e.match(/(Android)\s+([\d.]+)/);t||n?document.body.innerHTML='\n    <style>\n        body{\n        text-align: center;\n        font-size: 1rem;\n        color: #349ccd;\n        }\n\n    h1{\n    margin-top: 10rem;\n    }\n    </style> \n    <h1>Hi!</h1>\n    Please access through PC, mobile phone temporarily not supported!" <br>(请通过PC访问，手机暂时不支持！)':i.Before.ins.update()})}]);
//# sourceMappingURL=hi.js.map