{"version":3,"sources":["webpack://Hi/webpack/bootstrap","webpack://Hi/./src/public/index.ts","webpack://Hi/./src/public/components/Module.ts","webpack://Hi/./src/public/manager/GuiManager.ts","webpack://Hi/./src/public/manager/SceneManager.ts","webpack://Hi/./src/public/others/AnimationGui.ts","webpack://Hi/./src/public/others/DisplayPool.ts","webpack://Hi/./src/public/enum/ModuleName.ts","webpack://Hi/./src/other/EventCon.ts","webpack://Hi/./src/Scene/GameScene/ExGameSceneCon.ts","webpack://Hi/./src/public/manager/GlobalManager.ts","webpack://Hi/./src/Gui/StartGui/ExStartGui.ts","webpack://Hi/./src/Gui/StartGui/ExStartGuiCon.ts","webpack://Hi/./src/Gui/GameSceneGui/ExGameSceneGui.ts","webpack://Hi/./src/Gui/GameSceneGui/ExGameSceneGuiCon.ts","webpack://Hi/./src/Scene/GameScene/UseMaterial.ts","webpack://Hi/./src/Scene/GameScene/CannonCreateObj.ts","webpack://Hi/./src/Scene/GameScene/ExGameScene.ts","webpack://Hi/./src/public/components/game/GameSceneGui.ts","webpack://Hi/./src/public/components/game/StartGui.ts","webpack://Hi/./src/public/components/game/Guis.ts","webpack://Hi/./src/public/components/game/Panels.ts","webpack://Hi/./src/public/others/GuiCreate.ts","webpack://Hi/./src/public/others/particleCon.ts","webpack://Hi/./src/public/others/AnimationCon.ts","webpack://Hi/./src/public/manager/AssetsManager.ts","webpack://Hi/./src/public/enum/WeatherState.ts","webpack://Hi/./src/public/components/game/GameScenes.ts","webpack://Hi/./src/other/SceneBeforeCall.ts","webpack://Hi/./src/other/ResourceCon.ts","webpack://Hi/./src/Before.ts","webpack://Hi/./src/Main.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","e","GameScenes_1","GameScenes","ModuleName_1","ModuleName","WeatherState_1","WeatherState","AssetsManager_1","AssetsManager","GuiManager_1","GuiManager","SceneManager_1","SceneManager","GlobalManager_1","GlobalManager","AnimationCon_1","AnimationCon","AnimationGui_1","AnimationGui","particleCon_1","particleCon","GuiCreate_1","GuiCreate","Panels_1","Panels","Module_1","Module","Guis_1","Guis","StartGui_1","StartGui","GameSceneGui_1","GameSceneGui","DisplayPool_1","DisplayPool","initUI","show","args","_i","arguments","length","this","addEvent","hide","removeEvent","updateData","isInit","addClick","display","callback","onPointerUpObservable","add","removeClick","event","remove","delayEnable","delay","mouseEnable","mouseChildren","timeoutId","clearTimeout","setTimeout","dispose","guiPoll","_lastGui","_fullscreenUI","BABYLON","GUI","AdvancedDynamicTexture","CreateFullscreenUI","instance","changeGui","gui","_length","rootContainer","children","removeControl","addControl","appendGui","removeGui","removeAll","openPanel","closePanel","_canvas","document","querySelector","_engine","Engine","createScene","scene","Scene","_onPointerUp","_onPointerDown","_onPointerMove","a","Tools","GetPointerPrefix","removeEventListener","window","pointerId","addEventListener","FreeCamera","Vector3","_scene","runRenderLoop","render","TWEEN","update","resize","change","_a","ins","meshes","stage","advancedTexture","open","opened","keys","push","frame","animationX","Animation","ANIMATIONTYPE_FLOAT","ANIMATIONLOOPMODE_CYCLE","setKeys","animationY","animations","beginAnimation","close","closed","_this","displayPool","LOADING_GUI","WAITING_PANEL","MSG_PANEL","RULE_PANEL","LOSE_PANEL","GAME_START_GUI","GAME_PLAY_SCENE","GAME_PLAY_GUI","EventCon","gold","Observable","index_1","index_2","index_3","EventCon_1","ExGameScene_1","index_4","index_5","CannonCreateObj_1","UseMaterial_1","index_6","ExGameSceneCon","_super","importMeshes","rootUrl","resourceObject","models","gameScene","car","sceneFilename","wheel","localStorage","map","__extends","init","resetGame","engine","displayLoadingUI","loadingUIText","ImportMeshes","newMeshes","ExGameScene","creatScene","score","_str","notifyObservers","forEach","mesh","shadowGenerator","getShadowMap","renderList","getMeshByName","scaling","rotation","Math","PI","position","_children","material","subMaterials","backFaceCulling","isVisible","ground","console","log","copyFromFloats","bakeCurrentTransformIntoVertices","terrainMaterial","UseMaterial","setCarMaterial","gl","cannonCreateObj","CannonCreateObj","x","parseInt","car_x","y","car_y","z","car_z","HeightMap","carCtrl","setInterval","light3","waterRenderList","weatherState","RAIN_DAY","setLightning","setRain","setCarLight","fogMode","FOGMODE_EXP","fogDensity","fogColor","Color3","GlowLayer","addIncludedOnlyMesh","postProcess","depth","postProcess1","light","intensity","light2","lensFlareSystem3","SUNNY_DAY","alpha","NIGHT_DAY","AFTERNOON_DAY","steering","parent","setCameraParent","gameDeState","viewCtrl","hideLoadingUI","water","addToRenderList","waterMesh","visibility","lighting","absolutePosition","random","tailFlower","particleRain","start","Position","light4","lightLook","setDirectionToTarget","view","camera2","detachControl","canvas","activeCamera","camera","beta","attachControl","camera2Box","setTarget","target","_gold","onSuccess","_meshes","_skeletons","_loadCount","list","SceneLoader","ImportMesh","_mesh","_skeleton","error","openModule","moduleName","apply","ExStartGui","creatUI","Rectangle","viewHtml","viewNode","createElement","id","innerHTML","title","sceneChild","ExStartGui_1","ExGameSceneCon_1","public_1","ExStartGuiCon","guiObject","gameSceneObject","body","appendChild","doEvents","viewPlay","getElementById","onClick_startBtn","querySelectorAll","setAttribute","path","style","backgroundImage","images","logo","src","mapReset","MAP_LIST","rain","sun","after","night","_map","eval","carposition","map1","map2","map3","removeChild","ExGameSceneGui","ExGameSceneGui_1","ExGameSceneGuiCon","_btnState","btnLeft","viewButton","viewReset","location","reload","StandardMaterial","probe","ReflectionProbe","getMaterialByName","reflectionTexture","cubeTexture","level","attachToMesh","bxg","PBRMaterial","albedoColor","metallic","roughness","emissiveColor","emissiveTexture","diffuseTexture","disableLighting","diffuseColor","specularColor","opacityTexture","hasAlpha","Texture","textures","fogEnabled","text","forceOn","brakeOn","babylonWheelBodies","sphere","wheelBodies","zxState","brakeForce","maxSteerVal","maxForce","gravityY","options","radius","directionLocal","CANNON","Vec3","suspensionStiffness","suspensionRestLength","frictionSlip","dampingRelaxation","dampingCompression","maxSuspensionForce","rollInfluence","axleLocal","chassisConnectionPointLocal","maxSuspensionTravel","customSlidingRotationalSpeed","useCustomSlidingRotationalSpeed","gravity","pointDepth","pos","getVerticesData","VertexBuffer","PositionKind","matrix","arraySize","sqrt","elementSize","min","getBoundingInfo","boundingBox","extendSize","minY","round","max","loc","slice","newValue","shape","Heightfield","heightBody","Body","mass","quaternion","setFromAxisAngle","world","createPhysics","hBody","World","set","broadphase","NaiveBroadphase","defaultContactMaterial","friction","groundMaterial","Material","wheelMaterial","wheelGroundContactMaterial","ContactMaterial","restitution","contactEquationStiffness","addContactMaterial","cannonCar","createCannonVehicle","sizeXYZ","chassisShape","Box","chassisBody","addShape","angularVelocity","babylonCarBox","createBabylonChassisBody","vehicle","RaycastVehicle","addWheel","addToWorld","wheelInfos","cylinderShape","Cylinder","wheelBody","type","KINEMATIC","collisionFilterGroup","q","Quaternion","createBabylonWheelBodies","w1","clone","w2","w3","w4","updateWheelTransform","worldTransform","copy","rotationQuaternion","w","step","size","shapes","halfExtents","meshFromShape","MeshBuilder","CreateBox","height","width","boundingSphereRadius","CreateCylinder","receiveShadows","createBabylonBody","meshBox","createCannonBox","boxBody","babylonBox","handlerDown","handlerUp","SteerVal","onAfterRenderObservable","setSteeringValue","setBrake","keyCode","applyEngineForce","clearColor","Color4","ArcRotateCamera","upperRadiusLimit","lowerRadiusLimit","UniversalCamera","minZ","HemisphericLight","DirectionalLight","shadowFrustumSize","shadowMinZ","shadowMaxZ","skybox","Mesh","skyboxMaterial","cubeTextures","coordinatesMode","SKYBOX_MODE","TerrainMaterial","mixTexture","maptr2","maptr","diffuseTexture1","grass","uScale","vScale","diffuseTexture2","diffuseTexture3","ParticleSystem","particleTexture","yu","minEmitBox","maxEmitBox","color1","color2","colorDead","minSize","maxSize","minLifeTime","maxLifeTime","emitRate","blendMode","BLENDMODE_STANDARD","direction1","direction2","minEmitPower","maxEmitPower","updateSpeed","ShadowGenerator","bias","usePercentageCloserFiltering","filteringQuality","forceBackFacesOnly","RefractionPostProcess","videoTexture","VideoTexture","binarys","url","registerBeforeRender","isReady","video","loop","play","refractionTexture","SpotLight","range","projectionTexture","stainedGlass","CreateGround","billboardMode","lightingMaterial","WaterMaterial","Vector2","bumpTexture","waterbump","windForce","waveHeight","bumpHeight","waterColor","colorBlendFactor","lens3","CreateSphere","LensFlareSystem","LensFlare","ty","Bphl4qj","IIyZhcg","HRsf4I5","XaJRD9j","it5c3Vr","panelsAn","fullscreenUI","data","onOpen","onOpened","onClose","onClosed","onClick_ruleBtn","onClick_optionBtn","removeHtml","section","panelOut","StackPanel","createList","scaleUi","mouse","rectOut","thickness","isPointerBlocker","verticalAlignment","Control","VERTICAL_ALIGNMENT_TOP","horizontalAlignment","HORIZONTAL_ALIGNMENT_LEFT","isVertical","up","down","top","toString","onPointerDownObservable","topY","onPointerMoveObservable","mul","left","leftY","optionsListCon","config","listTemplate","idealWidth","offsetWidth","prizeDatalist","bodyWidth","bodyHeight","bodyTop","bodyLeft","optionList","_list","particle","fountain","isPickable","particleSystem","emitter","stop","Parent","animationBody","_endattr","_attr","_speed","_keys","_endCall","_typeData","_loop","endattr","attr","speed","endCall","typeData","typedata","animationBox","setbeginAnimation","onAnimationEnd","Pause","pause","Reset","reset","Speed","speedRatio","_resourceObject","resource","_resourceData","loadFile","sceneNames","progress","assetsManager","sceneName","_thisModel","model","addMeshTask","filePath","fileName","task","loadedMeshes","_thisMesh","_thisImage","image","addImageTask","_thisTexture","texture","addTextureTask","_thisBinary","binary","addBinaryFileTask","_thisCubeTexture","addCubeTextureTask","load","onProgress","totalTasksCount","_totalTasksCount","waitingTasksCount","_waitingTasksCount","loadCount","onFinish","j","gameOver","SceneBeforeCall","musicLoop","ResourceCon","pathFirst","resPath","_resource","ResourceCon_1","SceneBeforeCall_1","ExGameSceneGuiCon_1","ExStartGuiCon_1","Before","resourceData","initModule","Before_1","ua","navigator","userAgent","isIphone","match","isAndroid"],"mappings":"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","file":"hi.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 30);\n","\r\nimport {GameScenes} from \"./components/game/GameScenes\";\r\nimport {ResourceData} from \"./interface/ResourceData\";\r\nimport {fileData} from \"./interface/fileData\";\r\nimport {ModuleName} from \"./enum/ModuleName\";\r\nimport {WeatherState} from \"./enum/WeatherState\";\r\nimport {AssetsManager} from \"./manager/AssetsManager\";\r\nimport {GuiManager} from \"./manager/GuiManager\";\r\nimport {SceneManager} from \"./manager/SceneManager\";\r\nimport {GlobalManager} from \"./manager/GlobalManager\";\r\nimport {AnimationCon} from \"./others/AnimationCon\";\r\nimport {AnimationGui} from \"./others/AnimationGui\";\r\nimport {particleCon} from \"./others/particleCon\";\r\nimport {GuiCreate} from \"./others/GuiCreate\";\r\nimport {Panels} from \"./components/game/Panels\";\r\nimport {Module} from \"./components/Module\";\r\nimport {Guis} from \"./components/game/Guis\";\r\nimport {StartGui} from \"./components/game/StartGui\";\r\nimport {GameSceneGui} from \"./components/game/GameSceneGui\";\r\nimport {DisplayPool} from \"./others/DisplayPool\";\r\n\r\n\r\n\r\nexport {\r\n    //UI创建和scene创建\r\n    GameScenes,Panels,Module,Guis,DisplayPool,GameSceneGui,StartGui,\r\n    //other\r\n    AnimationCon,AnimationGui,particleCon,GuiCreate,\r\n    //接口\r\n    ResourceData,fileData,\r\n    //枚举\r\n     ModuleName,WeatherState,\r\n    //管理器\r\n    AssetsManager,GuiManager,SceneManager,GlobalManager,\r\n}","\r\n/**\r\n *Created by cuiliqiang on 2018/3/1\r\n * 组件基类\r\n */\r\n\r\n\r\nexport class Module {\r\n    private timeoutId;\r\n\r\n    /**\r\n     * 显示对象（皮肤）\r\n     */\r\n    protected display: any;\r\n    /**\r\n     * 是否初始化完成\r\n     */\r\n    protected isInit: boolean;\r\n    /**\r\n     * 点击事件回调池\r\n     */\r\n    private clickCallbackPool: any;\r\n\r\n    constructor() {\r\n      //  var skinClass: any = eval(this.module.skinName);\r\n       // this.display = new skinClass();\r\n       // this.clickCallbackPool = {};\r\n    }\r\n\r\n    /**\r\n     * 初始化UI\r\n     */\r\n    protected initUI(): void {\r\n\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    protected show(...args): void {\r\n        this.addEvent();\r\n    }\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(...args): void {\r\n        this.removeEvent();\r\n    }\r\n\r\n    /**\r\n     * 添加事件\r\n     */\r\n    protected addEvent(): void {\r\n\r\n    }\r\n\r\n    /**\r\n     * 移除事件\r\n     */\r\n    protected removeEvent(): void {\r\n\r\n    }\r\n\r\n    /**\r\n     * 更新页面\r\n     * @param args\r\n     */\r\n    public updateData(...args): void {\r\n        if (!this.isInit) {\r\n            this.initUI();\r\n            this.isInit = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 添加点击事件\r\n     * @param display\r\n     *\r\n     * @param callback\r\n     */\r\n    protected addClick(display: any, callback: Function) {\r\n        var _this= display.onPointerUpObservable.add(callback);\r\n        return _this;\r\n    }\r\n\r\n    /**\r\n     * 移除点击事件\r\n     * @param display\r\n     * @param callback\r\n     */\r\n    protected removeClick(display: any, event): void {\r\n        display.onPointerUpObservable.remove(event);\r\n      //  delete this.clickCallbackPool[display.instanceId];\r\n    }\r\n\r\n    /**\r\n     * 延时启用点击事件\r\n     * @param display 显示对象\r\n     * @param {number} delay 延时事件\r\n     */\r\n    protected delayEnable(display: any, delay?: number): void {\r\n        display.mouseEnable = display.mouseChildren = false;\r\n        //如果已经禁用事件重新计算\r\n        if (this.timeoutId) {\r\n            clearTimeout(this.timeoutId);\r\n        }\r\n\r\n        this.timeoutId = setTimeout(function () {\r\n            this.timeoutId = 0;\r\n            display.mouseEnable = display.mouseChildren = true;\r\n        }, delay ? delay : 500);\r\n    }\r\n\r\n\r\n    public dispose(): void {\r\n\r\n    }\r\n}","/**\r\n *Created by renjianfeng\r\n */\r\nexport class GuiManager {\r\n\r\n\r\n    private _fullscreenUI:any;\r\n\r\n    private _lastGui:any;\r\n\r\n    private guiPoll:any={};\r\n\r\n    private static instance: GuiManager;\r\n    public static get ins(): GuiManager {\r\n        if (!this.instance) {\r\n            this.instance = new GuiManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n\r\n    constructor(){\r\n        this._lastGui=null;\r\n        this._fullscreenUI=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI(\"GUI\");\r\n      //  this._fullscreenUI.idealWidth=750;\r\n    }\r\n\r\n    public changeGui(gui,...args){\r\n        var _length=this._fullscreenUI.rootContainer.children.length\r\n        for(var i=0;i<_length;i++){\r\n            this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0])\r\n        }\r\n        this._fullscreenUI.addControl(gui)\r\n        this._lastGui=gui\r\n    }\r\n\r\n\r\n    public appendGui(gui,...args){\r\n        this._fullscreenUI.addControl(gui)\r\n        this._lastGui=gui\r\n    }\r\n\r\n\r\n    public removeGui(gui,...args){\r\n        this._fullscreenUI.removeControl(this._lastGui)\r\n    }\r\n\r\n    public removeAll(gui,...args){\r\n        var _length=this._fullscreenUI.rootContainer.children.length\r\n        for(var i=0;i<_length;i++){\r\n            this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0])\r\n        }\r\n    }\r\n\r\n    public openPanel(gui){\r\n\r\n    }\r\n    public closePanel(gui){\r\n\r\n    }\r\n\r\n\r\n    public get fullscreenUI(){\r\n        return this._fullscreenUI;\r\n    }\r\n\r\n    public get lastGui(){\r\n        return this._lastGui;\r\n    }\r\n}\r\n","\r\n/**\r\n *Created by renjianfeng\r\n */\r\nimport Scene = BABYLON.Scene;\r\n\r\n\r\nexport class SceneManager{\r\n\r\n    public stage;\r\n    private _scene:Scene;\r\n    private _canvas;\r\n    private _engine;\r\n\r\n    private static instance: SceneManager;\r\n\r\n    public static get ins(): SceneManager {\r\n        if (!this.instance) {\r\n            this.instance = new SceneManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n\r\n    this._canvas = document.querySelector(\"#renderCanvas\");\r\n    this._engine = new BABYLON.Engine(this._canvas, true);\r\n        var createScene=function(){\r\n            {\r\n\r\n\r\n                var scene = new BABYLON.Scene(this._engine);\r\n\r\n                //下面的代码是为了设置微信上面的touch事件兼容\r\n\r\n                var n = scene._onPointerUp\r\n                    , o = scene._onPointerDown\r\n                    , r = scene._onPointerMove\r\n                    , a = BABYLON.Tools.GetPointerPrefix();\r\n                    this._canvas.removeEventListener(a + \"move\", r),\r\n                    this._canvas.removeEventListener(a + \"down\", o),\r\n                    window.removeEventListener(a + \"up\", n),\r\n                    scene._onPointerUp = function(e) {\r\n                        void 0 !== e.pointerId && n(e)\r\n                    }\r\n                    ,\r\n                    scene._onPointerDown = function(e) {\r\n                        void 0 !== e.pointerId && o(e)\r\n                    }\r\n                    ,\r\n                    scene._onPointerMove = function(e) {\r\n                        void 0 !== e.pointerId && r(e)\r\n                    }\r\n                    ,\r\n                    this._canvas.addEventListener(a + \"move\", scene._onPointerMove, !1),\r\n                    this._canvas.addEventListener(a + \"down\", scene._onPointerDown, !1),\r\n                    window.addEventListener(a + \"up\", scene._onPointerUp, !1);\r\n\r\n\r\n                //下面的代码是为了设置微信上面的touch事件兼容\r\n                var camera = new BABYLON.FreeCamera(\"baseCamera\", new BABYLON.Vector3(0, 0, 0), scene);\r\n\r\n              //  var sceneCall=new SceneCall(scene)\r\n\r\n             /*   this.stage = BABYLON.MeshBuilder.CreateBox(\"stage\", {}, scene);\r\n\r\n                this.stage.isVisible = false;*/\r\n\r\n                return scene;\r\n            }\r\n        }.bind(this)\r\n\r\n        this._scene = createScene();\r\n\r\n        this._engine.runRenderLoop(function () {\r\n            this._scene.render();\r\n            TWEEN.update();\r\n        }.bind(this));\r\n\r\n        window.addEventListener(\"resize\", function() {\r\n            this._engine.resize();\r\n        }.bind(this));\r\n    }\r\n\r\n   /* public get stage(): any {\r\n        return this._stage;\r\n    }*/\r\n\r\n    public get scene(): Scene {\r\n        return this._scene;\r\n    }\r\n\r\n    public get canvas(): any {\r\n        return this._canvas;\r\n    }\r\n\r\n    public get engine(): any {\r\n        return this._engine;\r\n    }\r\n\r\n    public change(display){\r\n       /* console.log(display)\r\n        var i;\r\n        for(i in display){\r\n            console.log(display[i])\r\n        }*/\r\n\r\n        for(var l of SceneManager.ins.scene.meshes){\r\n            l.dispose()\r\n        }\r\n\r\n        /*var j;\r\n        for(j in SceneManager.ins.stage){\r\n            console.log(SceneManager.ins.stage[j])\r\n            if( SceneManager.ins.stage[j]){\r\n                if(SceneManager.ins.stage[j].getChildMeshes){\r\n                    SceneManager.ins.stage[j].getChildMeshes(false,(child)=>{\r\n                        child.dispose();\r\n                    });\r\n                }\r\n                if( SceneManager.ins.stage[j].dispose){\r\n                    SceneManager.ins.stage[j].dispose()\r\n                }\r\n            }\r\n        }*/\r\n        SceneManager.ins.stage=display;\r\n    }\r\n\r\n  /*  public change(module){\r\n      //  console.log(this._stage._children)\r\n        if(this.stage._children){\r\n            this.stage._children.forEach(function (child) {\r\n                this.stage.removeChild(child)\r\n                child.dispose()\r\n            }.bind(this))\r\n        }\r\n        this.stage.addChild(module)\r\n      //  console.log( this._scene)\r\n    }*/\r\n}","/**\r\n * Created by renjianfeng\r\n * 弹框动画UI控制器\r\n */\r\n\r\nexport class AnimationGui {\r\n    private static instance: AnimationGui;\r\n\r\n    protected scene;\r\n    protected advancedTexture;\r\n\r\n    constructor(scene,advancedTexture){\r\n        this.scene=scene;\r\n        this.advancedTexture=advancedTexture\r\n    }\r\n\r\n    public show = function (gui,open?,opened?) {\r\n        var keys = [];\r\n        keys.push({\r\n            frame: 0,\r\n            value: 0.1\r\n        });\r\n        keys.push({\r\n            frame: 10,\r\n            value: 1\r\n        });\r\n        var animationX = new BABYLON.Animation(\"\", \"scaleX\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationX.setKeys(keys);\r\n        var animationY = new BABYLON.Animation(\"\", \"scaleY\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationY.setKeys(keys);\r\n        gui.animations = [];\r\n        gui.animations.push(animationX,animationY);\r\n        this.advancedTexture.addControl(gui);\r\n        if(open){\r\n            open()\r\n        }\r\n        this.scene.beginAnimation(gui, 0, 10, false,2,()=>{\r\n            if(opened){\r\n                opened()\r\n            }\r\n        });\r\n    };\r\n\r\n    public hide = function(gui,close?,closed?){\r\n        var keys = [];\r\n        keys.push({\r\n            frame: 0,\r\n            value: 1\r\n        });\r\n        keys.push({\r\n            frame: 10,\r\n            value: 0.1\r\n        });\r\n        var animationX = new BABYLON.Animation(\"\", \"scaleX\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationX.setKeys(keys);\r\n        var animationY = new BABYLON.Animation(\"\", \"scaleY\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationY.setKeys(keys);\r\n        gui.animations = [];\r\n        gui.animations.push(animationX,animationY);\r\n        if(close){\r\n            close()\r\n        }\r\n        this.scene.beginAnimation(gui, 0, 10, false,2,()=>{\r\n            this.advancedTexture.removeControl(gui);\r\n            //this.advancedTexture.dispose();\r\n            if(closed){\r\n                closed()\r\n            }\r\n        });\r\n    };\r\n\r\n}\r\n\r\n","export class DisplayPool{\r\n    private static instance: DisplayPool;\r\n\r\n    public static get ins(): DisplayPool {\r\n        if (!this.instance) {\r\n            this.instance = new DisplayPool();\r\n        }\r\n        return this.instance;\r\n    }\r\n    //场景名称\r\n    public displayPool: any = {};\r\n}","/**\r\n *Created by cuiliqiang on 2018/3/13\r\n */\r\nexport enum ModuleName {\r\n    //加载场景\r\n    LOADING_GUI = 'LoadingScene',\r\n    //等待面板\r\n    WAITING_PANEL = 'WaitingPanel',\r\n    //提示信息面板\r\n    MSG_PANEL = 'MsgPanel',\r\n    //游戏规则面板\r\n    RULE_PANEL = 'RulePanel',\r\n    //未中奖面板\r\n    LOSE_PANEL = 'LosePanel',\r\n    //开始场景\r\n    GAME_START_GUI = 'GameStartScene',\r\n    //游戏玩法场景\r\n    GAME_PLAY_SCENE = 'GamePlayScene',\r\n    //游戏玩法场景GUI\r\n    GAME_PLAY_GUI = 'GamePlayGui',\r\n\r\n}\r\n","\r\n/**\r\n * 全局事件传递\r\n * */\r\n\r\nexport class EventCon {\r\n\r\n    private static instance: EventCon;\r\n    public static get ins(): EventCon {\r\n        if (!this.instance) {\r\n            this.instance = new EventCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    //分数显示  从游戏场景到游戏GUI\r\n    public gold;\r\n\r\n    //控制车的方向按键  从游戏GUI到游戏场景\r\n    public key;\r\n\r\n    constructor(){\r\n        this.gold = new BABYLON.Observable();\r\n        this.key = new BABYLON.Observable();\r\n    }\r\n}","import {AssetsManager, SceneManager} from \"../../public/index\";\r\nimport {DisplayPool} from \"../../public/index\";\r\nimport {ModuleName} from \"../../public/index\";\r\nimport {EventCon} from \"../../other/EventCon\";\r\nimport {ExGameScene} from \"./ExGameScene\";\r\nimport {GameScenes} from \"../../public/index\";\r\nimport {particleCon} from \"../../public/index\";\r\nimport {CannonCreateObj} from \"./CannonCreateObj\";\r\nimport {UseMaterial} from \"./UseMaterial\";\r\nimport {WeatherState} from \"../../public/index\";\r\n\r\n\r\nexport class ExGameSceneCon extends GameScenes{\r\n    private _gold;\r\n    private static instance: ExGameSceneCon;\r\n\r\n    public static get ins(): ExGameSceneCon {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameSceneCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n\r\n    protected display;\r\n\r\n    protected scene;\r\n\r\n    private gameDeState;\r\n\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    protected importMeshes=[\r\n        {\r\n            rootUrl:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"car\"].rootUrl,\r\n            sceneFilename:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"car\"].sceneFilename\r\n        },\r\n        {\r\n            rootUrl:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"wheel\"].rootUrl,\r\n            sceneFilename:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"wheel\"].sceneFilename\r\n        },\r\n        {\r\n            rootUrl:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"map\"+localStorage.map].rootUrl,\r\n            sceneFilename:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"map\"+localStorage.map].sceneFilename\r\n        }\r\n    ]\r\n\r\n\r\n    public init(){\r\n        DisplayPool.ins.displayPool[ModuleName.GAME_PLAY_SCENE]=this;\r\n    }\r\n\r\n    protected resetGame(){\r\n\r\n        this.importMeshes=[\r\n            {\r\n                rootUrl:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"car\"].rootUrl,\r\n                sceneFilename:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"car\"].sceneFilename\r\n            },\r\n            {\r\n                rootUrl:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"wheel\"].rootUrl,\r\n                sceneFilename:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"wheel\"].sceneFilename\r\n            },\r\n            {\r\n                rootUrl:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"map\"+localStorage.map].rootUrl,\r\n                sceneFilename:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"map\"+localStorage.map].sceneFilename\r\n            }\r\n        ]\r\n        SceneManager.ins.engine.displayLoadingUI();\r\n        SceneManager.ins.engine.loadingUIText = \"Initializing...\";\r\n        this.ImportMeshes(this.importMeshes,(newMeshes)=>{\r\n            ExGameScene.ins.creatScene()\r\n            var scene=SceneManager.ins.scene;\r\n            this.scene=SceneManager.ins.scene;\r\n            //初始分数\r\n            this.score=0;\r\n            var _str=`当前得分:${this.score}分`\r\n            EventCon.ins.gold.notifyObservers(_str);\r\n            this.display=ExGameScene.ins.display;\r\n\r\n            scene.meshes.forEach((mesh)=>{\r\n                this.display.shadowGenerator.getShadowMap().renderList.push(mesh);\r\n                //mesh.receiveShadows = true;\r\n            })\r\n\r\n\r\n\r\n\r\n           /* gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 4\"))\r\n            gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 3\"))*/\r\n       /*     gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 18\"))\r\n            gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 1\"))\r\n            gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 5\"))\r\n            gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 2\"))*/\r\n\r\n\r\n\r\n            scene.getMeshByName(\"car\").scaling=new BABYLON.Vector3(0.001,0.001,0.001);\r\n            scene.getMeshByName(\"car\").rotation=new BABYLON.Vector3(-Math.PI*1,Math.PI*0.5,Math.PI*0.5)\r\n            scene.getMeshByName(\"car\").position=new BABYLON.Vector3(1.7,0,0.6)\r\n\r\n            this.scene.getMeshByName(\"car\")._children.forEach((mesh)=>{\r\n                if(mesh.material){\r\n                    if(mesh.material.subMaterials){\r\n                        mesh.material.subMaterials.forEach((material)=>{\r\n                            material.backFaceCulling=false;\r\n                        })\r\n                    }else{\r\n                       // mesh.material.backFaceCulling=false;\r\n                    }\r\n                }\r\n            })\r\n\r\n\r\n\r\n\r\n            scene.getMeshByName(\"w1\").rotation=new BABYLON.Vector3(0,0,-Math.PI*0.5)\r\n            scene.getMeshByName(\"w1\").scaling=new BABYLON.Vector3(0.001,0.001,0.001);\r\n            scene.getMeshByName(\"w1\").position=new BABYLON.Vector3(1.02,-1.2,2.38)\r\n            scene.getMeshByName(\"w1\").isVisible=false;\r\n\r\n            var ground = scene.getMeshByName(\"default\");\r\n            console.log(\"新地图\")\r\n            console.log(ground.name)\r\n\r\n            ground.scaling.copyFromFloats(1, 1, 1);\r\n\r\n            ground[\"bakeCurrentTransformIntoVertices\"]();\r\n\r\n            //ground.getVerticesData(BABYLON.VertexBuffer.PositionKind);\r\n\r\n            ground.material=this.display.terrainMaterial;\r\n\r\n\r\n            //设置材质\r\n\r\n            var useMaterial=new UseMaterial(scene)\r\n            useMaterial.setCarMaterial()\r\n\r\n            //创建物理世界\r\n            let cannonCreateObj=new CannonCreateObj(SceneManager.ins.scene,this.display.shadowGenerator,\r\n                {x:parseInt(localStorage.car_x),y:parseInt(localStorage.car_y),z:parseInt(localStorage.car_z),})\r\n            cannonCreateObj.HeightMap(ground);\r\n            cannonCreateObj.carCtrl();\r\n\r\n\r\n            setInterval(()=>{\r\n                this.display.light3.position=new BABYLON.Vector3(\r\n                    this.scene.getMeshByName(\"carBox\").position.x,\r\n                    this.scene.getMeshByName(\"carBox\").position.y+1,\r\n                    this.scene.getMeshByName(\"carBox\").position.z-0\r\n                );\r\n\r\n            },500)\r\n\r\n\r\n         //   this.display.lighting.parent=this.scene.getMeshByName(\"carBox\")\r\n\r\n\r\n            //湖水\r\n            this.waterRenderList()\r\n\r\n\r\n            if(localStorage.weatherState==WeatherState.RAIN_DAY){\r\n                //闪电\r\n                this.setLightning()\r\n\r\n                //下雨\r\n                this.setRain()\r\n\r\n                //车灯\r\n                this.setCarLight()\r\n\r\n\r\n                this.scene.fogMode = BABYLON.Scene.FOGMODE_EXP;\r\n                this.scene.fogDensity = 0.005;\r\n                this.scene.fogColor = new BABYLON.Color3(0.3,0.3,0.3);\r\n\r\n                var gl = new BABYLON.GlowLayer(\"glow\", scene);\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 25\"))\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 20\"))\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"lighting\"))\r\n\r\n                this.display.postProcess.depth=0.08\r\n                this.display.postProcess1.depth=0.08\r\n\r\n                this.display.light.intensity=0.1\r\n                this.display.light2.intensity=0.1\r\n                this.display.light3.intensity=0.2\r\n                this.display.lensFlareSystem3.dispose()\r\n            }\r\n\r\n\r\n            if(localStorage.weatherState==WeatherState.SUNNY_DAY){\r\n\r\n                this.scene.fogMode = BABYLON.Scene.FOGMODE_EXP;\r\n                this.scene.fogDensity = 0.001;\r\n                this.scene.fogColor = new BABYLON.Color3(1,1,1);\r\n\r\n                this.scene.getMeshByName(\"Plane001\").material.alpha=0;\r\n                var gl = new BABYLON.GlowLayer(\"glow\", scene);\r\n               /* gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 25\"))*/\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 20\"))\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"lighting\"))\r\n\r\n                this.scene.getMeshByName(\"Jeep GC-P 25\").material.alpha=0.3;\r\n\r\n                this.display.postProcess.depth=0\r\n                this.display.postProcess1.depth=0\r\n\r\n                this.display.light.intensity=0.2\r\n                this.display.light2.intensity=0.2\r\n                this.display.light3.intensity=1\r\n            }\r\n\r\n\r\n            if(localStorage.weatherState==WeatherState.NIGHT_DAY){\r\n\r\n                this.scene.fogMode = BABYLON.Scene.FOGMODE_EXP;\r\n                this.scene.fogDensity = 0.009;\r\n                this.scene.fogColor = new BABYLON.Color3(0,0,0);\r\n\r\n                //车灯\r\n                this.setCarLight()\r\n\r\n                this.scene.getMeshByName(\"Plane001\").material.alpha=0.3;\r\n                var gl = new BABYLON.GlowLayer(\"glow\", scene);\r\n                 gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 25\"))\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 20\"))\r\n\r\n                this.scene.getMeshByName(\"Jeep GC-P 25\").material.alpha=1;\r\n\r\n                this.display.postProcess.depth=0\r\n                this.display.postProcess1.depth=0\r\n\r\n                this.display.light.intensity=0.1\r\n                this.display.light2.intensity=0.1\r\n                this.display.light3.intensity=0.3\r\n                this.display.lensFlareSystem3.dispose()\r\n            }\r\n\r\n            if(localStorage.weatherState==WeatherState.AFTERNOON_DAY){\r\n\r\n                this.scene.fogMode = BABYLON.Scene.FOGMODE_EXP;\r\n                this.scene.fogDensity = 0.001;\r\n                this.scene.fogColor = new BABYLON.Color3(255/255,90/255,0/255);\r\n\r\n                //车灯\r\n                this.setCarLight()\r\n\r\n                this.scene.getMeshByName(\"Plane001\").material.alpha=0.3;\r\n                var gl = new BABYLON.GlowLayer(\"glow\", scene);\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 25\"))\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 20\"))\r\n\r\n                this.scene.getMeshByName(\"Jeep GC-P 25\").material.alpha=1;\r\n\r\n                this.display.postProcess.depth=0\r\n                this.display.postProcess1.depth=0\r\n\r\n                this.display.light.intensity=0.1\r\n                this.display.light2.intensity=0.1\r\n                this.display.light3.intensity=0.3\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n            this.display.steering.parent=this.scene.getMeshByName(\"carBox\")\r\n            this.display.steering.position.z=0.7\r\n            this.display.steering.position.x=0.8\r\n            this.display.steering.position.y=-0.76\r\n\r\n            this.scene.getMeshByName(\"Jeep GC-P 15\").position=new BABYLON.Vector3(0,0,0)\r\n            this.scene.getMeshByName(\"Jeep GC-P 15\").parent=this.display.steering\r\n\r\n            //设置汽车和相机绑定\r\n            this.setCameraParent()\r\n\r\n\r\n            EventCon.ins.key.add((e)=>{\r\n                this.gameDeState=e\r\n                console.log(e)\r\n                this.viewCtrl(e)\r\n            });\r\n\r\n\r\n            setTimeout(()=>{\r\n                SceneManager.ins.engine.hideLoadingUI();\r\n            },500)\r\n\r\n        })\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    /**\r\n     * 湖水\r\n     * */\r\n\r\n    private waterRenderList():void{\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"default\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"skyBox\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"car\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"w1_1\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"w2_1\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"w3_1\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"w4_1\"));\r\n        console.log(this.scene.getMeshByName(\"car\"))\r\n        this.scene.getMeshByName(\"car\")._children.forEach((mesh)=>{\r\n            this.display.water.addToRenderList(mesh);\r\n        })\r\n\r\n        if(localStorage.map==\"1\"){\r\n            this.display.waterMesh.position.y=123;\r\n        }\r\n\r\n        if(localStorage.map==\"2\"){\r\n            this.display.waterMesh.position.y=43;\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 闪电\r\n     * */\r\n\r\n    private setLightning():void{\r\n        setInterval(()=>{\r\n            this.display.light3.intensity = 2;\r\n            this.scene.getMeshByName(\"lighting\").visibility=2\r\n            this.display.lighting.position.y=this.scene.getMeshByName(\"carBox\").absolutePosition.y+100;\r\n            this.display.lighting.position.z=Math.random()*600-300;\r\n            this.display.lighting.position.x=Math.random()*600-300;\r\n\r\n            setTimeout(()=>{\r\n                this.display.light3.intensity = 0.3;\r\n                this.scene.getMeshByName(\"lighting\").visibility=0\r\n            },100)\r\n\r\n            setTimeout(()=>{\r\n                this.display.light3.intensity = 1;\r\n                this.display.lighting.position.z=Math.random()*600-300;\r\n                this.display.lighting.position.x=Math.random()*600-300;\r\n                this.scene.getMeshByName(\"lighting\").visibility=1\r\n            },500)\r\n\r\n            setTimeout(()=>{\r\n                this.display.light3.intensity = 0.3;\r\n                this.scene.getMeshByName(\"lighting\").visibility=0\r\n            },600)\r\n        },6000)\r\n    }\r\n\r\n\r\n    /**\r\n     * 下雨\r\n     * */\r\n\r\n    private setRain():void{\r\n        //下雨\r\n        var tailFlower=new particleCon(new BABYLON.Vector3(0,50,0),this.scene, this.display.particleRain);\r\n        // tailFlower.Parent(scene.getMeshByName(\"car\"))\r\n        tailFlower.start()\r\n        SceneManager.ins.engine.runRenderLoop(()=>{\r\n            tailFlower.Position(new BABYLON.Vector3(\r\n                this.scene.getMeshByName(\"car\").absolutePosition.x+50,\r\n                this.scene.getMeshByName(\"car\").absolutePosition.y+50,\r\n                this.scene.getMeshByName(\"car\").absolutePosition.z) )\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 设置车灯\r\n     * */\r\n    private setCarLight():void{\r\n        this.display.light4.intensity=10;\r\n        SceneManager.ins.engine.runRenderLoop(()=>{\r\n            this.display.lightLook.parent=this.scene.getMeshByName(\"carBox\")\r\n            this.display.lightLook.position.x=12\r\n            this.display.light4.position=new BABYLON.Vector3(\r\n                this.scene.getMeshByName(\"carBox\").position.x,\r\n                this.scene.getMeshByName(\"carBox\").position.y+0.3,\r\n                this.scene.getMeshByName(\"carBox\").position.z);\r\n            this.display.light4.setDirectionToTarget(\r\n                new BABYLON.Vector3(\r\n                    this.display.lightLook.absolutePosition.x,\r\n                    this.display.lightLook.absolutePosition.y,\r\n                    this.display.lightLook.absolutePosition.z)\r\n            );\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 页面UI控制\r\n     * */\r\n    private viewCtrl(e):void{\r\n        var _state=e[\"view\"];\r\n        if(_state==true){\r\n\r\n            this.display.camera2.detachControl(SceneManager.ins.canvas,false);\r\n            this.scene.activeCamera=this.display.camera\r\n            this.display.camera.alpha=-Math.PI*1;\r\n            this.display.camera.beta=1.260483446598473\r\n            this.display.camera.attachControl(SceneManager.ins.canvas,true);\r\n\r\n        }else{\r\n            this.display.camera.detachControl(SceneManager.ins.canvas,false);\r\n            this.scene.activeCamera=this.display.camera2\r\n            this.display.camera2.rotation=new BABYLON.Vector3(0.1,Math.PI*0.5,0)\r\n            this.display.camera2.attachControl(SceneManager.ins.canvas,true);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 设置相机和汽车绑定\r\n     * */\r\n\r\n    private setCameraParent(){\r\n        this.display.camera2Box.parent=this.scene.getMeshByName(\"carBox\");\r\n        this.display.camera.setTarget(this.scene.getMeshByName(\"carBox\"));\r\n        this.display.camera.target=this.scene.getMeshByName(\"carBox\");\r\n    }\r\n\r\n\r\n    protected removeEvent(){\r\n       // SceneManager.ins.scene.onBeforeRenderObservable.remove(this.beforeEvent)\r\n    }\r\n\r\n    public get gold(){\r\n        return this._gold;\r\n    }\r\n\r\n    public ImportMeshes(importMeshes,onSuccess){\r\n        var _length=importMeshes.length;\r\n        var _meshes=[]\r\n        var _skeletons=[]\r\n        var _loadCount=0;\r\n        importMeshes.forEach((list)=>{\r\n            BABYLON.SceneLoader.ImportMesh(\r\n                \"\",\r\n                list.rootUrl,\r\n                list.sceneFilename,\r\n                SceneManager.ins.scene,\r\n                (_mesh,_skeleton)=> {\r\n                    try {\r\n                        _meshes.push(_mesh)\r\n                        _skeletons.push(_skeleton)\r\n                        _loadCount++\r\n                        if(_loadCount==_length){\r\n                            onSuccess(_meshes,_skeletons)\r\n                        }\r\n                    } catch (e) {\r\n                        console.error(e)\r\n                    }\r\n                }\r\n            );\r\n        })\r\n    }\r\n\r\n}\r\n","\r\n/**\r\n *Created by renjianfeng\r\n */\r\nimport {ModuleName} from \"../enum/ModuleName\";\r\nimport {DisplayPool} from \"../others/DisplayPool\";\r\nexport class GlobalManager {\r\n\r\n    //管理器单例\r\n    private static instance: GlobalManager;\r\n\r\n    public static get ins(): GlobalManager {\r\n        if (!this.instance) {\r\n            this.instance = new GlobalManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    /**\r\n     * 打开一个模块\r\n     * @param {ModuleName} moduleName\r\n     */\r\n    public openModule(moduleName:string, ...args): void {\r\n        DisplayPool.ins.displayPool[moduleName].show(...args)\r\n    }\r\n}","\r\nimport {AssetsManager} from \"../../public/index\";\r\nimport {WeatherState} from \"../../public/index\";\r\n\r\n\r\n\r\nexport class ExStartGui{\r\n\r\n    private sceneCon:any;\r\n    private parent:any;\r\n\r\n    private static instance: ExStartGui;\r\n\r\n    public static get ins(): ExStartGui {\r\n        if (!this.instance) {\r\n            this.instance = new ExStartGui();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        this.creatUI()\r\n    }\r\n\r\n    public creatUI(){\r\n        this.parent=new BABYLON.GUI.Rectangle()\r\n\r\n\r\n\r\n      /*  var tween = new TWEEN.Tween(startBtn);\r\n        tween.to({ scaleX: 0.8 ,scaleY: 0.8}, 500);\r\n        tween.start();\r\n        tween.repeat(Infinity)\r\n        tween.yoyo(true)*/\r\n\r\n        var viewHtml=`\r\n            <style>\r\n            .button-play{\r\n                position: fixed;\r\n                top: 50%;\r\n                left:50%;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 42px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n                width: 200px;\r\n                height: 80px;\r\n                margin-left: -100px;\r\n                margin-top: 200px;\r\n            }\r\n            .button-play:active{\r\n              transform: scale(0.8);\r\n            }\r\n            .weather-config{\r\n                position: fixed;\r\n                top: 50%;\r\n                left:50%;\r\n                display: block;\r\n                background: #ffffff;\r\n                color: #82bab3;\r\n                border: 0px solid ;\r\n                font-size: 24px;\r\n                border-radius: 5px;\r\n                transform: scale(1);\r\n                width: 1000px;\r\n                height: 260px;\r\n                margin-left: -500px;\r\n                margin-top: -200px;\r\n                text-align: center;\r\n               \r\n            }\r\n            .weather-config ul li{\r\n                display: inline-block;\r\n                height: 200px;\r\n                width: 200px;\r\n                margin: 0px 5px;\r\n                border: 1px solid #cccccc;\r\n                cursor: pointer;\r\n                background-size: 100% 100%;\r\n                text-shadow: 0px 0px 5px #444;\r\n            }\r\n            \r\n            .weather-config ul li:hover{\r\n                border: 1px solid royalblue;\r\n            }\r\n            .we-active{\r\n                border: 3px solid #000 !important;\r\n                opacity: 0.8;\r\n            }\r\n            .yw-text{\r\n              font-size: 14px;\r\n            }\r\n            .box-tip{\r\n            margin-top: 60px;\r\n            }\r\n            \r\n            .map-list{\r\n                margin-top:-30px;\r\n                position: relative;\r\n                top: -30px;\r\n            }\r\n            .map-list select{\r\n                background: transparent;\r\n                padding: 7px;\r\n                color: #82bab3;\r\n                position: relative;\r\n                top: -2px;\r\n                font-size: 18px;\r\n                border-radius: 5px;\r\n                border: 1px solid #82bab3;\r\n            }\r\n            .box-tip{\r\n                background: rgba(0,0,0,0.2);\r\n                color: #ffffff;\r\n                padding: 10px;\r\n                font-size: 16px;\r\n                letter-spacing: 3px;\r\n                position: fixed;\r\n                bottom: 30px;\r\n                width:100%;\r\n                padding-left:20px;\r\n                text-align: center;\r\n            }\r\n\r\n            .about-btn{\r\n                position: fixed;\r\n                top: 20px;\r\n                left:20px;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 18px;\r\n                padding: 8px 20px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n            }\r\n            .game-bg{\r\n                position: fixed;\r\n                top: 0;\r\n                left:0;\r\n                width:100%;\r\n                height:100%;\r\n                background-color: #349ccd;\r\n                background-size:100% 100%;\r\n            }\r\n            .logo{\r\n                position: fixed;\r\n                top: 5%;\r\n                left:50%;\r\n                width:500px;\r\n                height:160px;\r\n                margin-left:-250px;\r\n               \r\n                background-size:100% 100%;\r\n            }\r\n\r\n            </style>\r\n        \r\n            <div class=\"game-bg\" id=\"GAME_BG\">\r\n            <div>\r\n            <button class=\"about-btn\" onclick=\"window.location.href='https://github.com/renjianfeng/LimitTransport'\">About The Author And Github</button>\r\n            </div>\r\n\r\n            <div class=\"logo\" id=\"LOGO\"></div>\r\n\r\n            <div class=\"weather-config\">\r\n                <div class=\"map-list\">\r\n                    <lable>\r\n                    MAP : <select id=\"MAP_LIST\" name=\"mapList\">\r\n                            <option value=\"{map:1,carposition:{ x:0,y:-60,z:160}}\">The hills</option>\r\n                            <option value=\"{map:2,carposition:{ x:0,y:151,z:226}}\">Cliff valley</option>\r\n                            <option value=\"{map:3,carposition:{ x:0,y:50,z:140}}\">The lakes</option>\r\n                        </select>\r\n                    </lable>\r\n               \r\n                </div>\r\n                <ul>\r\n                  <li id=\"RAIN_DAY\" class=\"we-active\">大雨磅礴<br><span class=\"yw-text\">The heavy rain made</span></li>\r\n                  <li id=\"SUNNY_DAY\">晴空万里<br><span class=\"yw-text\">a bright sky</span></li>\r\n                  <li id=\"AFTERNOON_DAY\">晚霞时分<br><span class=\"yw-text\">An evening at the</span></li>\r\n                  <li id=\"NIGHT_DAY\">漫漫长夜<br><span class=\"yw-text\">All night long</span></li>\r\n                </ul>\r\n               \r\n            </div>\r\n            \r\n            <button class=\"button-play\" id=\"button_play\">Play</button>\r\n            <div class=\"box-tip\">\r\n            Tips : Direction(方向):[W,S,A,D]；Brake(刹车):[Space]；<br>\r\n           </div>\r\n            </div>\r\n           \r\n        `;\r\n\r\n        var viewNode = document.createElement(\"div\");\r\n        viewNode.id = \"startNode\";\r\n        viewNode.innerHTML = viewHtml;\r\n\r\n        document.title=\"LimitTransport(极限驾驶)\"\r\n\r\n        //this.chassisBody.position.set(0, 151, 226);\r\n\r\n\r\n        //交給控制器做交互\r\n        this.parent.sceneChild={\r\n            viewHtml:viewHtml,\r\n            viewNode:viewNode,\r\n        }\r\n\r\n       // this.sceneCon=new StartGuiCon(this.parent);\r\n    }\r\n\r\n    public get guiObject(){\r\n        return this.parent;\r\n    }\r\n}","import {ExStartGui} from \"./ExStartGui\";\r\nimport {AnimationCon} from \"../../public/index\";\r\nimport {StartGui} from \"../../public/index\";\r\nimport {WeatherState} from \"../../public/index\";\r\nimport {SceneManager} from \"../../public/index\";\r\nimport {ExGameSceneCon} from \"../../Scene/GameScene/ExGameSceneCon\";\r\nimport {EventCon} from \"../../other/EventCon\";\r\nimport {ModuleName} from \"../../public/enum/ModuleName\";\r\nimport {GlobalManager} from \"../../public/manager/GlobalManager\";\r\nimport {AssetsManager} from \"../../public\";\r\nexport class ExStartGuiCon extends StartGui{\r\n\r\n    /**\r\n     * 游戏业务基础数据\r\n     */\r\n\r\n\r\n    private static instance: ExStartGuiCon;\r\n\r\n    public static get ins(): ExStartGuiCon {\r\n        if (!this.instance) {\r\n            this.instance = new ExStartGuiCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        super()\r\n        this.scene=ExStartGui.ins.guiObject.sceneChild;\r\n        this.parent=ExStartGui.ins.guiObject;\r\n        this.gameSceneObject=ExGameSceneCon.ins;\r\n    }\r\n\r\n    public addEvent(){\r\n\r\n        localStorage.weatherState=WeatherState.RAIN_DAY;\r\n\r\n        document.body.appendChild(this.scene.viewNode)\r\n        this.doEvents[\"viewPlay\"]=document.getElementById(\"button_play\").addEventListener(\"click\",this.onClick_startBtn.bind(this))\r\n\r\n\r\n        this.doEvents[\"SUNNY_DAY\"]=document.getElementById(\"SUNNY_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.SUNNY_DAY;\r\n            console.log(\"当前dom\")\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n\r\n        this.doEvents[\"RAIN_DAY\"]=document.getElementById(\"RAIN_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.RAIN_DAY;\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n\r\n        this.doEvents[\"AFTERNOON_DAY\"]=document.getElementById(\"AFTERNOON_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.AFTERNOON_DAY;\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n\r\n        this.doEvents[\"NIGHT_DAY\"]=document.getElementById(\"NIGHT_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.NIGHT_DAY;\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n\r\n       // document.getElementById(\"GAME_BG\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"map1\"].src+\")\"\r\n        document.getElementById(\"LOGO\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"logo\"].src+\")\"\r\n\r\n        this.mapReset()\r\n\r\n        this.doEvents[\"MAP_LIST\"]==document.getElementById(\"MAP_LIST\").addEventListener(\"change\",(e)=>{\r\n            this.mapReset()\r\n        })\r\n\r\n\r\n        document.getElementById(\"RAIN_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"rain\"].src+\")\"\r\n        document.getElementById(\"SUNNY_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"sun\"].src+\")\"\r\n        document.getElementById(\"AFTERNOON_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"after\"].src+\")\"\r\n        document.getElementById(\"NIGHT_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"night\"].src+\")\"\r\n\r\n    }\r\n\r\n\r\n\r\n    protected mapReset(){\r\n        document.getElementById(\"MAP_LIST\")[\"value\"];\r\n        var _map=eval('(' + (document.getElementById(\"MAP_LIST\")[\"value\"]) + ')');\r\n        console.log(_map);\r\n        localStorage.map=_map.map;\r\n        // localStorage.car={x:2,y:0,z:0};\r\n        localStorage.car_x=parseInt(_map.carposition.x);\r\n        localStorage.car_y=parseInt(_map.carposition.y);\r\n        localStorage.car_z=parseInt(_map.carposition.z);\r\n        if(_map.map==\"1\"){\r\n            document.getElementById(\"GAME_BG\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"map1\"].src+\")\"\r\n        }\r\n\r\n        if(_map.map==\"2\"){\r\n            document.getElementById(\"GAME_BG\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"map2\"].src+\")\"\r\n        }\r\n\r\n        if(_map.map==\"3\"){\r\n            document.getElementById(\"GAME_BG\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"map3\"].src+\")\"\r\n        }\r\n        console.log(_map.carposition)\r\n\r\n        console.log(localStorage)\r\n    }\r\n\r\n\r\n    protected onClick_startBtn() {\r\n        super.onClick_startBtn()\r\n        this.removeEvent()\r\n    }\r\n\r\n\r\n    public removeEvent(){\r\n        super.removeEvent()\r\n        if(document.getElementById(\"startNode\")){\r\n            try {\r\n                document.body.removeChild(this.scene.viewNode)\r\n            }catch (e) {\r\n                console.log(e)\r\n            }\r\n        }\r\n    }\r\n}","\r\n\r\nimport {AssetsManager} from \"../../public/index\";\r\n\r\nexport class ExGameSceneGui{\r\n\r\n    private sceneCon:any;\r\n    private parent:any;\r\n\r\n    private static instance: ExGameSceneGui;\r\n\r\n    public static get ins(): ExGameSceneGui {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameSceneGui();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n            this.creatUI()\r\n    }\r\n\r\n    public creatUI(){\r\n\r\n        this.parent=new BABYLON.GUI.Rectangle()\r\n\r\n        var viewHtml=`\r\n            <style>\r\n            .button-view{\r\n                position: fixed;\r\n                top: 20px;\r\n                left:20px;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 18px;\r\n                padding: 8px 20px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n            }\r\n            .button-view:active{\r\n              transform: scale(0.8);\r\n            }\r\n            .button-reset{\r\n                position: fixed;\r\n                top: 20px;\r\n                right:20px;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 18px;\r\n                padding: 8px 20px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n            }\r\n            .about-btn{\r\n                position: fixed;\r\n                bottom: 20px;\r\n                right:20px;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 18px;\r\n                padding: 8px 20px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n            }\r\n            button:active{\r\n              transform: scale(0.8);\r\n            }\r\n            </style>\r\n            \r\n            <button class=\"button-view\" id=\"button_view\">View</button>\r\n            <button class=\"button-reset\" id=\"button_reset\">Back</button>\r\n            <div>\r\n            <button class=\"about-btn\" onclick=\"window.location.href='https://github.com/renjianfeng/LimitTransport'\">About The Author And Github</button>\r\n            </div>\r\n        `;\r\n\r\n        var viewNode = document.createElement(\"div\");\r\n        viewNode.id = \"viewNode\";\r\n        viewNode.innerHTML = viewHtml;\r\n\r\n        //交給控制器做交互\r\n        this.parent.sceneChild={\r\n            viewHtml:viewHtml,\r\n            viewNode:viewNode,\r\n        }\r\n\r\n       // this.sceneCon=new GameSceneGuiCon(this.parent);\r\n    }\r\n\r\n    public get guiObject(){\r\n        return this.parent;\r\n    }\r\n\r\n  /*  public set guiObjectDo(obj){\r\n        this.parent=obj;\r\n    }*/\r\n}","import {EventCon} from \"../../other/EventCon\";\r\nimport {ExGameSceneGui} from \"./ExGameSceneGui\";\r\nimport {GameSceneGui} from \"../../public/index\";\r\n\r\nexport class ExGameSceneGuiCon extends GameSceneGui{\r\n\r\n\r\n    private static instance: ExGameSceneGuiCon;\r\n\r\n    public static get ins(): ExGameSceneGuiCon {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameSceneGuiCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        super()\r\n        this.scene=ExGameSceneGui.ins.guiObject.sceneChild\r\n        this.parent=ExGameSceneGui.ins.guiObject;\r\n    }\r\n\r\n\r\n    public addEvent(){\r\n        var _btnState=[]\r\n        _btnState[\"view\"]=true;\r\n        console.log(\"按键事件\")\r\n        console.log(this.scene.btnLeft)\r\n\r\n       // var viewNode=\r\n        document.body.appendChild(this.scene.viewNode)\r\n\r\n        this.doEvents[\"viewButton\"]=document.getElementById(\"button_view\").addEventListener(\"click\",()=>{\r\n            _btnState[\"view\"]=!_btnState[\"view\"];\r\n            EventCon.ins.key.notifyObservers(_btnState);\r\n        })\r\n\r\n\r\n        this.doEvents[\"viewReset\"]=document.getElementById(\"button_reset\").addEventListener(\"click\",()=>{\r\n            location.reload();\r\n        })\r\n       // document.getElementById(\"viewNode\").innerHTML=this.scene.viewHtml\r\n    }\r\n\r\n\r\n\r\n    public removeEvent(){\r\n        if(document.getElementById(\"viewNode\")){\r\n            try {\r\n                document.body.removeChild(this.scene.viewNode)\r\n            }catch (e) {\r\n                console.log(e)\r\n            }\r\n        }\r\n        //EventCon.ins.gold.remove( this.doEvents[\"gold\"]);\r\n    }\r\n}","import {AssetsManager} from \"../../public\";\r\n\r\nexport class UseMaterial {\r\n\r\n    private scene\r\n    constructor(scene){\r\n        this.scene=scene;\r\n    }\r\n\r\n    public setCarMaterial(){\r\n\r\n\r\n\r\n\r\n\r\n\r\n        var material=new BABYLON.StandardMaterial(\"ss\",this.scene)\r\n\r\n\r\n\r\n        var probe = new BABYLON.ReflectionProbe(\"main\", 64, this.scene);\r\n        probe.renderList.push( this.scene.getMeshByName(\"default\"));\r\n        probe.renderList.push(this.scene.getMeshByName(\"skyBox\"));\r\n        this.scene.getMaterialByName(\"Material#2\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#2\")[\"reflectionTexture\"].level=0.4\r\n        this.scene.getMeshByName(\"Jeep GC-P 5\").material[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Материал #2\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        // scene.getMaterialByName(\"Материал #2\").reflectionTexture.level=0.1\r\n        this.scene.getMaterialByName(\"Material#12\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        // scene.getMaterialByName(\"Material#12\").reflectionTexture.level=0.1\r\n        this.scene.getMaterialByName(\"Материал #13\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#3\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#1\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n\r\n        this.scene.getMeshByName(\"w1\").material.subMaterials[0][\"reflectionTexture\"] = probe.cubeTexture;\r\n\r\n       /* this.scene.getMaterialByName(\"Material#9\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#13\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#10\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#20\")[\"reflectionTexture\"] = probe.cubeTexture;*/\r\n\r\n        // scene.getMaterialByName(\"Материал #13\").reflectionTexture.level=0.1\r\n        probe.attachToMesh(this.scene.getMeshByName(\"car\"));\r\n\r\n\r\n        var bxg = new BABYLON.PBRMaterial(\"bxg\", this.scene);\r\n        bxg.albedoColor=new BABYLON.Color3(1,1,1)\r\n        bxg.metallic=1;\r\n        bxg.roughness=0;\r\n        bxg.reflectionTexture=probe.cubeTexture;\r\n\r\n        this.scene.getMeshByName(\"Jeep GC-P 11\").material=bxg\r\n\r\n\r\n\r\n        console.log(\"灯\")\r\n\r\n\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.emissiveColor=new BABYLON.Color3(1,1,1)\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.emissiveTexture=this.scene.getMeshByName(\"Jeep GC-P 25\").material.diffuseTexture;\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.disableLighting=true;\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.diffuseColor = new BABYLON.Color3(1, 1, 1);\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.specularColor = new BABYLON.Color3(1, 1, 1);\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.alpha=1;\r\n\r\n\r\n\r\n        this.scene.getMeshByName(\"Plane001\").material.opacityTexture=this.scene.getMaterialByName(\"carlight\").emissiveTexture;\r\n        this.scene.getMeshByName(\"Plane001\").material.alpha=0.2;\r\n        this.scene.getMeshByName(\"Plane001\").material.hasAlpha=false;\r\n        this.scene.getMeshByName(\"Plane001\").material.backFaceCulling=false;\r\n\r\n\r\n        this.scene.getMeshByName(\"Jeep GC-P 20\").material.emissiveTexture=this.scene.getMeshByName(\"Jeep GC-P 20\").material.diffuseTexture;\r\n        this.scene.getMeshByName(\"Jeep GC-P 20\").material.emissiveTexture.level=0.1;\r\n        this.scene.getMeshByName(\"Jeep GC-P 20\").material.emissiveColor=new BABYLON.Color3(1,0,0);\r\n\r\n\r\n        this.scene.getMeshByName(\"lighting\").material.emissiveColor=new BABYLON.Color3(1,0,0)\r\n        this.scene.getMeshByName(\"lighting\").material.diffuseColor=new BABYLON.Color3(1,0,0)\r\n        this.scene.getMeshByName(\"lighting\").material.diffuseTexture=new BABYLON.Texture(AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"lighting\"], this.scene)\r\n        this.scene.getMeshByName(\"lighting\").material.opacityTexture=new BABYLON.Texture(AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"lighting\"], this.scene)\r\n        this.scene.getMeshByName(\"lighting\").material.emissiveTexture=new BABYLON.Texture(AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"lighting\"], this.scene)\r\n        this.scene.getMeshByName(\"lighting\").material.emissiveTexture.level=1;\r\n        this.scene.getMeshByName(\"lighting\").material.backFaceCulling=false;\r\n        this.scene.getMeshByName(\"lighting\").material.disableLighting=true;\r\n        this.scene.getMeshByName(\"lighting\").material.fogEnabled=false;\r\n        console.log(\"灯光\")\r\n        console.log(this.scene.getMaterialByName(\"carlight\"))\r\n\r\n       // this.scene.getMeshByName(\"Jeep GC-P 15\").material[\"reflectionTexture\"] = probe.cubeTexture;\r\n\r\n        console.log(this.scene.getMeshByName(\"Jeep GC-P 25\").material)\r\n\r\n    }\r\n}","import {SceneManager} from \"../../public\";\r\n\r\nexport class CannonCreateObj {\r\n    public heightBody;\r\n    public chassisShape;\r\n\r\n    private _gold;\r\n    private vehicle;\r\n    private world;\r\n    private text={\r\n        forceOn:0,\r\n        brakeOn:0,\r\n    };\r\n    private vehicleBox;\r\n    private ground;\r\n    private camera\r\n    private scene\r\n    private gui;\r\n    private shadowGenerator;\r\n    private vehicleSetup;\r\n    private music1;\r\n    private babylonWheelBodies = [];\r\n    private sphere = [];\r\n    private wheelBodies = [];\r\n    private babylonCarBox;\r\n    private chassisBody;\r\n    private cannonCar;\r\n    private zxState=0;\r\n\r\n    private boxBody;\r\n    private babylonBox;\r\n\r\n    private camera2Box;\r\n\r\n    //制动力\r\n    private  brakeForce = 100;\r\n\r\n    //最大转向\r\n    private  maxSteerVal = 0.5;\r\n\r\n    //最大动力\r\n    private  maxForce = 1500;\r\n\r\n    //重力\r\n    private  gravityY = -26;\r\n\r\n    private  carposition;\r\n\r\n\r\n    constructor(scene,shadowGenerator,carposition){\r\n        this.scene=scene;\r\n        this.shadowGenerator=shadowGenerator;\r\n        this.carposition=carposition;\r\n\r\n        console.log(this.carposition)\r\n    }\r\n\r\n\r\n    private  options = {\r\n        radius: 0.5,\r\n        directionLocal: new CANNON.Vec3(0, 0, -1),\r\n        suspensionStiffness: 30,\r\n        suspensionRestLength: 0.3,\r\n        frictionSlip: 5,\r\n        dampingRelaxation: 2.3,\r\n        dampingCompression: 4.4,\r\n        maxSuspensionForce: 10000000,\r\n        rollInfluence:  0.01,\r\n        axleLocal: new CANNON.Vec3(0, 1, 0),\r\n        chassisConnectionPointLocal: new CANNON.Vec3(1, 1, 0),\r\n        maxSuspensionTravel: 0.3,\r\n        customSlidingRotationalSpeed: -300,\r\n        useCustomSlidingRotationalSpeed: true\r\n    };\r\n\r\n    //重力\r\n    private  gravity = new BABYLON.Vector3(0, this.gravityY, 0);\r\n\r\n    public HeightMap(object, pointDepth?:any){\r\n        var pos = object.getVerticesData(BABYLON.VertexBuffer.PositionKind);\r\n        var matrix = [];\r\n        //For now pointDepth will not be used and will be automatically calculated.\r\n        //Future reference - try and find the best place to add a reference to the pointDepth variable.\r\n        var arraySize = pointDepth || ~~(Math.sqrt(pos.length / 3) - 1);\r\n        var dim = Math.min(object.getBoundingInfo().boundingBox.extendSize.x, object.getBoundingInfo().boundingBox.extendSize.z);\r\n        var elementSize = dim * 2 / arraySize;\r\n        var minY = object.getBoundingInfo().boundingBox.extendSize.y;\r\n\r\n        for (var i = 0; i < pos.length; i = i + 3) {\r\n            var x = Math.round((pos[i + 0]) / elementSize + arraySize / 2);\r\n            var z = Math.round(((pos[i + 2]) / elementSize - arraySize / 2) * -1);\r\n            var y = pos[i + 1] + minY;\r\n            if (!matrix[x]) {\r\n                matrix[x] = [];\r\n            }\r\n            if (!matrix[x][z]) {\r\n                matrix[x][z] = y;\r\n\r\n            }\r\n            matrix[x][z] = Math.max(y, matrix[x][z]);\r\n\r\n        }\r\n\r\n\r\n        for (var x = 0; x <= arraySize; ++x) {\r\n            if (!matrix[x]) {\r\n                var loc = 1;\r\n                while (!matrix[(x + loc) % arraySize]) {\r\n                    loc++;\r\n                }\r\n                matrix[x] = matrix[(x + loc) % arraySize].slice();\r\n\r\n            }\r\n            for (var z = 0; z <= arraySize; ++z) {\r\n                if (!matrix[x][z]) {\r\n                    var loc = 1;\r\n                    var newValue;\r\n                    while (newValue === undefined) {\r\n                        newValue = matrix[x][(z + loc++) % arraySize];\r\n                    }\r\n                    matrix[x][z] = newValue;\r\n\r\n                }\r\n            }\r\n        }\r\n        //console.log(elementSize);\r\n        var shape = new CANNON.Heightfield(matrix, {\r\n            elementSize: elementSize\r\n        });\r\n\r\n\r\n        console.log(object.getBoundingInfo().boundingBox)\r\n\r\n\r\n        this.heightBody = new CANNON.Body({mass: 0, shape: shape}); // Step 2\r\n        this.heightBody.position.y = -object.getBoundingInfo().boundingBox.extendSize.y;\r\n        this.heightBody.position.x = -object.getBoundingInfo().boundingBox.extendSize.x;\r\n        this.heightBody.position.z = object.getBoundingInfo().boundingBox.extendSize.z;\r\n        this.heightBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);\r\n\r\n        this.world = this.createPhysics(this.heightBody);\r\n\r\n    }\r\n\r\n\r\n    //创建物理世界\r\n    public createPhysics(hBody){\r\n        this.world = new CANNON.World();\r\n        this.world.gravity.set(this.gravity.x, this.gravity.y, this.gravity.z);\r\n        this.world.broadphase = new CANNON.NaiveBroadphase();\r\n        this.world.defaultContactMaterial.friction = 0.001;\r\n\r\n        var groundMaterial = new CANNON.Material(\"groundMaterial\");\r\n        var wheelMaterial = new CANNON.Material(\"wheelMaterial\");\r\n        var wheelGroundContactMaterial = window[\"wheelGroundContactMaterial\"] = new CANNON.ContactMaterial(wheelMaterial, groundMaterial, {\r\n            friction: 0,\r\n            restitution: 0,\r\n            contactEquationStiffness: 1000\r\n        });\r\n\r\n        // We must add the contact materials to the world\r\n        this.world.addContactMaterial(wheelGroundContactMaterial);\r\n\r\n        //console.log(\"tets\");\r\n        this.world.add(hBody);\r\n        this.cannonCar = this.createCannonVehicle();\r\n       // alert()\r\n        return this.world;\r\n    }\r\n\r\n    //创建车辆\r\n    public createCannonVehicle(){\r\n        var sizeXYZ = new CANNON.Vec3(4, 1, 0.5);\r\n        this.chassisShape = new CANNON.Box(sizeXYZ);\r\n        this.chassisBody = new CANNON.Body({ mass: 500 });\r\n        this.chassisBody.addShape(this.chassisShape);\r\n        this.chassisBody.position.set(this.carposition.x, this.carposition.y, this.carposition.z);\r\n        this.chassisBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);\r\n        this.chassisBody.angularVelocity.set(0, 0, 0.2);\r\n        this.babylonCarBox = this.createBabylonChassisBody(this.chassisBody);\r\n        this.vehicle = new CANNON.RaycastVehicle({\r\n            chassisBody: this.chassisBody,\r\n        });\r\n        this.options.chassisConnectionPointLocal.set(2.5, 1.2, -0.3);\r\n        this.vehicle.addWheel(this.options);\r\n        this.options.chassisConnectionPointLocal.set(2.5, -1.2, -0.3);\r\n        this.vehicle.addWheel(this.options);\r\n        this.options.chassisConnectionPointLocal.set(-2.5, 1.2, -0.3);\r\n        this.vehicle.addWheel(this.options);\r\n        this.options.chassisConnectionPointLocal.set(-2.5, -1.2, -0.3);\r\n        this.vehicle.addWheel(this.options);\r\n        this.vehicle.addToWorld(this.world);\r\n        var wheelBodies = [];\r\n        for(var i=0; i<this.vehicle.wheelInfos.length; i++){\r\n            var wheel = this.vehicle.wheelInfos[i];\r\n            //console.log(wheel);\r\n            var cylinderShape = new CANNON.Cylinder(wheel.radius, wheel.radius, wheel.radius / 2, 20);\r\n            var wheelBody = new CANNON.Body({\r\n                mass: 800\r\n            });\r\n            wheelBody.type = CANNON.Body.KINEMATIC;\r\n\r\n            wheelBody.collisionFilterGroup = 0; // turn off collisions\r\n            var q = new CANNON.Quaternion();\r\n            q.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), Math.PI / 2);\r\n            wheelBody.addShape(cylinderShape, new CANNON.Vec3(), q);\r\n            wheelBodies.push(wheelBody);\r\n            this.createBabylonWheelBodies(wheelBody);\r\n            //  demo.addVisual(wheelBody);\r\n            this.world.add(wheelBody);\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        var w1=this.scene.getMeshByName(\"w1\").clone();w1.isVisible=true;\r\n        w1.name=\"w1_1\";\r\n        w1.rotation.z=-Math.PI*0.5\r\n        this.shadowGenerator.getShadowMap().renderList.push(w1);\r\n\r\n        w1.material.subMaterials.forEach((material)=>{\r\n            material.backFaceCulling=false;\r\n        })\r\n        // w1.flipFaces()\r\n        var w2=this.scene.getMeshByName(\"w1\").clone();w2.isVisible=true;\r\n        w2.rotation.z=-Math.PI*0.5\r\n        w2.name=\"w2_1\";\r\n\r\n        this.shadowGenerator.getShadowMap().renderList.push(w2);\r\n        var w3=this.scene.getMeshByName(\"w1\").clone();w3.isVisible=true;\r\n        w3.rotation.z=-Math.PI*0.5\r\n        w3.name=\"w3_1\";\r\n        this.shadowGenerator.getShadowMap().renderList.push(w3);\r\n\r\n        var w4=this.scene.getMeshByName(\"w1\").clone();w4.isVisible=true;\r\n        w4.rotation.z=-Math.PI*0.5\r\n        w4.name=\"w4_1\";\r\n\r\n        w2.scaling.x=-this.scene.getMeshByName(\"w1\").scaling.x;\r\n        w2.position.y=-this.scene.getMeshByName(\"w1\").position.y;\r\n        w4.scaling.x=-this.scene.getMeshByName(\"w1\").scaling.x;\r\n        w4.position.y=-this.scene.getMeshByName(\"w1\").position.y;\r\n        this.shadowGenerator.getShadowMap().renderList.push(w4);\r\n\r\n        this.world.addEventListener('postStep',()=>{\r\n            this.scene.getMeshByName(\"w1\").rotation.y=3\r\n            for (var i = 0; i < this.vehicle.wheelInfos.length; i++) {\r\n                this.vehicle.updateWheelTransform(i);\r\n                var t = this.vehicle.wheelInfos[i].worldTransform;\r\n                //console.log(t);\r\n                var wheelBody = wheelBodies[i];\r\n                wheelBody.position.copy(t.position);\r\n                wheelBody.quaternion.copy(t.quaternion);\r\n                if(this.babylonWheelBodies[i]){\r\n                  //  console.log(wheelBody.position)\r\n                    this.babylonWheelBodies[i].position = wheelBody.position;\r\n                    this.babylonWheelBodies[i].rotationQuaternion = new BABYLON.Quaternion(t.quaternion.x,t.quaternion.y,t.quaternion.z,t.quaternion.w);\r\n                }\r\n\r\n                w1.parent=this.babylonWheelBodies[0];\r\n                w2.parent=this.babylonWheelBodies[1];\r\n                w3.parent=this.babylonWheelBodies[2];\r\n                w4.parent=this.babylonWheelBodies[3];\r\n            }\r\n        });\r\n        SceneManager.ins.engine.runRenderLoop(()=>{\r\n            if(this.world){\r\n                this.world.step(1.0 / 60.0);\r\n            }\r\n            if(this.babylonCarBox){\r\n                this.babylonCarBox.position = this.chassisBody.position;\r\n                this.babylonCarBox.rotationQuaternion = new BABYLON.Quaternion(this.chassisBody.quaternion.x, this.chassisBody.quaternion.y, this.chassisBody.quaternion.z, this.chassisBody.quaternion.w);\r\n            }\r\n        });\r\n        return this.vehicle;\r\n    }\r\n\r\n    //创建车体\r\n    public createBabylonChassisBody(body){\r\n        var shape = body.shapes[0];\r\n        var size = shape.halfExtents;\r\n        var meshFromShape = BABYLON.MeshBuilder.CreateBox(\"carBox\", {height: size.y * 2, width:size.x * 2, depth:size.z * 2}, this.scene);\r\n        meshFromShape.rotationQuaternion = new BABYLON.Quaternion();\r\n        meshFromShape.isVisible=false;\r\n        //meshFromShape.receiveShadows = true;\r\n       // shadowGenerator.getShadowMap().renderList.push(meshFromShape);\r\n        this.scene.getMeshByName(\"car\").parent= meshFromShape\r\n        //console.log(shadowGenerator.getShadowMap().renderList);\r\n        return meshFromShape;\r\n    };\r\n\r\n    //创建车轮\r\n    public createBabylonWheelBodies(body){\r\n        var shape = body.shapes[0];\r\n        var size = shape.boundingSphereRadius;\r\n        //console.log(shape);\r\n        var wheel = BABYLON.MeshBuilder.CreateCylinder(\"wheel\", {height:size}, this.scene);\r\n        wheel.scaling.z = size * 2;\r\n        wheel.scaling.x = size * 2;\r\n        wheel.rotationQuaternion = new BABYLON.Quaternion();\r\n        wheel.receiveShadows = true;\r\n        wheel.isVisible=false;\r\n        //shadowGenerator.getShadowMap().renderList.push(wheel);\r\n        this.babylonWheelBodies.push(wheel);\r\n    };\r\n\r\n    //创建box\r\n    public createBabylonBody(body){\r\n        var shape = body.shapes[0];\r\n        var size = shape.halfExtents;\r\n        var meshBox = BABYLON.MeshBuilder.CreateBox(\"boxdh\", {height: size.y * 2, width:size.x * 2, depth:size.z * 2}, this.scene);\r\n        meshBox.rotationQuaternion = new BABYLON.Quaternion();\r\n        //meshFromShape.receiveShadows = true;\r\n        //shadowGenerator.getShadowMap().renderList.push(meshBox);\r\n        //console.log(shadowGenerator.getShadowMap().renderList);\r\n        return meshBox;\r\n    };\r\n\r\n\r\n    //创建盒子\r\n    public createCannonBox(){\r\n        var sizeXYZ = new CANNON.Vec3(2, 1, 0.5);\r\n        this.chassisShape = new CANNON.Box(sizeXYZ);\r\n        this.boxBody = new CANNON.Body({ mass: 10 });\r\n        this.boxBody.addShape(this.chassisShape);\r\n        this.boxBody.position.set(0, 100, 140);\r\n        this.boxBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);\r\n        this.boxBody.angularVelocity.set(0, 0, 0.2);\r\n        this.babylonBox = this.createBabylonBody(this.boxBody);\r\n        this.world.add(this.boxBody)\r\n        // babylonBox\r\n    }\r\n\r\n\r\n    /**\r\n     * 汽车控制\r\n     * */\r\n\r\n    public carCtrl(){\r\n\r\n        document.addEventListener(\"keydown\",(e)=>{\r\n            console.log(5555666)\r\n            this.handlerDown(e)\r\n        })\r\n\r\n        document.addEventListener(\"keyup\",(e)=>{\r\n            this.handlerUp(e)\r\n        })\r\n\r\n        var SteerVal=0\r\n        this.scene.onAfterRenderObservable.add(()=>{\r\n            if(this.zxState==0){\r\n                //SteerVal=0\r\n                if(SteerVal>0){\r\n                    SteerVal-=0.03\r\n                    if(SteerVal<=0.03){\r\n                        SteerVal=0\r\n                    }\r\n\r\n                }else if(SteerVal<0){\r\n                    SteerVal+=0.03\r\n\r\n                    if(SteerVal>=-0.03){\r\n                        SteerVal=0\r\n                    }\r\n                }\r\n\r\n\r\n            }else if(this.zxState==1){\r\n                if(SteerVal>this.maxSteerVal){\r\n                    SteerVal=SteerVal\r\n                }else{\r\n                    SteerVal+=0.03\r\n                }\r\n            }else if(this.zxState==2){\r\n                if(SteerVal<-this.maxSteerVal){\r\n                    SteerVal=SteerVal\r\n                }else{\r\n                    SteerVal-=0.03\r\n                }\r\n            }\r\n            if(this.cannonCar){\r\n               /* console.log(\"转向\")\r\n                console.log(SteerVal)*/\r\n\r\n               this.scene.getMeshByName(\"steering\").rotation.x=-SteerVal*4\r\n                this.cannonCar.setSteeringValue(SteerVal, 1);\r\n                this.cannonCar.setSteeringValue(SteerVal, 0);\r\n            }\r\n        })\r\n\r\n\r\n    }\r\n\r\n\r\n    /**\r\n    * 键盘松开\r\n    * */\r\n    public handlerUp(event){\r\n\r\n        this.cannonCar.setBrake(0, 0);\r\n        this.cannonCar.setBrake(0, 1);\r\n        this.cannonCar.setBrake(0, 2);\r\n        this.cannonCar.setBrake(0, 3);\r\n        if(event.keyCode === 87){\r\n            this.cannonCar.applyEngineForce(0, 0);\r\n            this.cannonCar.applyEngineForce(0, 1);\r\n            this.cannonCar.applyEngineForce(0, 2);\r\n            this.cannonCar.applyEngineForce(0, 3);\r\n        }\r\n\r\n        if(event.keyCode === 83){\r\n            this.cannonCar.applyEngineForce(0, 0);\r\n            this.cannonCar.applyEngineForce(0, 1);\r\n            this.cannonCar.applyEngineForce(0, 2);\r\n            this.cannonCar.applyEngineForce(0, 3);\r\n        }\r\n\r\n        if(event.keyCode === 32){\r\n            this.cannonCar.setBrake(0, 0);\r\n            this.cannonCar.setBrake(0, 1);\r\n            this.cannonCar.setBrake(0, 2);\r\n            this.cannonCar.setBrake(0, 3);\r\n            this.scene.getMeshByName(\"Jeep GC-P 20\").material.emissiveTexture.level=0.1;\r\n        }\r\n        if(event.keyCode === 65){\r\n            this.zxState=0\r\n        }\r\n\r\n        if(event.keyCode === 68){\r\n            this.zxState=0\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 键盘按下\r\n     * */\r\n    public handlerDown(event){\r\n\r\n        this.cannonCar.setBrake(0, 0);\r\n        this.cannonCar.setBrake(0, 1);\r\n        this.cannonCar.setBrake(0, 2);\r\n        this.cannonCar.setBrake(0, 3);\r\n\r\n        if(event.keyCode === 87){\r\n            if(this.text.forceOn === 1){\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 2);\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 3);\r\n            } else if(this.text.forceOn === 2){\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 0);\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 1);\r\n            } else {\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 0);\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 1);\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 2);\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 3);\r\n            }\r\n        }\r\n\r\n        if(event.keyCode === 83){\r\n            if(this.text.forceOn === 1){\r\n                this.cannonCar.applyEngineForce(this.maxForce, 2);\r\n                this.cannonCar.applyEngineForce(this.maxForce, 3);\r\n            } else if(this.text.forceOn === 2){\r\n                this.cannonCar.applyEngineForce(this.maxForce, 0);\r\n                this.cannonCar.applyEngineForce(this.maxForce, 1);\r\n            } else {\r\n                this.cannonCar.applyEngineForce(this.maxForce, 0);\r\n                this.cannonCar.applyEngineForce(this.maxForce, 1);\r\n                this.cannonCar.applyEngineForce(this.maxForce, 2);\r\n                this.cannonCar.applyEngineForce(this.maxForce, 3);\r\n            }\r\n        }\r\n\r\n        if(event.keyCode === 32){\r\n            //console.log(text.brakeOn);\r\n            if(this.text.brakeOn === 1){\r\n                this.cannonCar.setBrake(this.brakeForce, 2);\r\n                this.cannonCar.setBrake(this.brakeForce, 3);\r\n            } else if(this.text.brakeOn === 2){\r\n                this.cannonCar.setBrake(this.brakeForce, 0);\r\n                this.cannonCar.setBrake(this.brakeForce, 1);\r\n            }else{\r\n                this.cannonCar.setBrake(this.brakeForce, 0);\r\n                this.cannonCar.setBrake(this.brakeForce, 1);\r\n                this.cannonCar.setBrake(this.brakeForce, 2);\r\n                this.cannonCar.setBrake(this.brakeForce, 3);\r\n            }\r\n\r\n            this.scene.getMeshByName(\"Jeep GC-P 20\").material.emissiveTexture.level=1;\r\n        }\r\n\r\n\r\n        if(event.keyCode === 65){\r\n            this.zxState=2\r\n        }\r\n\r\n        if(event.keyCode === 68){\r\n            this.zxState=1\r\n        }\r\n    }\r\n}","\r\nimport {AssetsManager} from \"../../public/index\"\r\nimport {SceneManager} from \"../../public/index\"\r\nimport {WeatherState} from \"../../public/index\";\r\nimport Texture = BABYLON.Texture;\r\nimport Color3 = BABYLON.Color3;\r\n\r\nexport class ExGameScene{\r\n\r\n    private static instance: ExGameScene;\r\n\r\n    public static get ins(): ExGameScene {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameScene();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    public display;\r\n\r\n    protected scene;\r\n\r\n    constructor(){\r\n       // super()\r\n    }\r\n\r\n\r\n    public creatScene(){\r\n        this.scene=SceneManager.ins.scene\r\n        //设置背景色\r\n        this.scene.clearColor=new BABYLON.Color4(52/255,156/255,255/255)\r\n\r\n        /**\r\n         * 室外相机\r\n         * */\r\n        var  camera = new BABYLON.ArcRotateCamera(\"ArcRotateCamera\", 1, 0.8, 10, new BABYLON.Vector3(0, 200, 0), this.scene);\r\n        camera.alpha=-Math.PI*1\r\n        camera.beta=1.260483446598473\r\n        camera.attachControl(SceneManager.ins.canvas, false);\r\n        camera.upperRadiusLimit=15\r\n        camera.lowerRadiusLimit=15\r\n        this.scene.activeCamera=camera;\r\n\r\n\r\n        /**\r\n         * 室内相机校准模型\r\n         * */\r\n        var camera2Box = BABYLON.MeshBuilder.CreateBox(\"camera2Box\", {height:  2, width: 2, depth: 2}, this.scene);\r\n        camera2Box.isVisible=false;\r\n        camera2Box.rotation=new BABYLON.Vector3(Math.PI*0.5,0,0)\r\n\r\n\r\n        var steering = BABYLON.MeshBuilder.CreateBox(\"steering\", {height:  2000, width: 2000, depth: 2000}, this.scene);\r\n        steering.visibility=0;\r\n        steering.scaling=new BABYLON.Vector3(0.001,0.001,0.001)\r\n        steering.rotation=new BABYLON.Vector3(0,0.3,Math.PI*0.5)\r\n\r\n        /**\r\n         * 室内相机\r\n         * */\r\n        var camera2 = new BABYLON.UniversalCamera(\"UniversalCamera\", new BABYLON.Vector3(0.2, 1.1, 0.6), this.scene);\r\n        camera2.rotation.y=Math.PI*0.5\r\n        camera2.attachControl(SceneManager.ins.canvas);\r\n        camera2.detachControl(SceneManager.ins.canvas);\r\n        camera2.minZ=0;\r\n        camera2.parent=camera2Box;\r\n\r\n\r\n\r\n      /*  this.scene.fogMode = BABYLON.Scene.FOGMODE_EXP;\r\n        this.scene.fogDensity = 0.001;\r\n        this.scene.fogColor = new BABYLON.Color3(1,1,1);*/\r\n\r\n\r\n        /**\r\n         * 环境光\r\n         * */\r\n        var light = new BABYLON.HemisphericLight(\"HemiLight\", new BABYLON.Vector3(0, 10, 0), this.scene);\r\n        light.intensity=0.1\r\n        var light2 = new BABYLON.HemisphericLight(\"HemiLight\", new BABYLON.Vector3(0, -10, 0), this.scene);\r\n        light2.intensity=0.1\r\n\r\n        /**\r\n         * 平行光\r\n         * */\r\n        var light3 = new BABYLON.DirectionalLight(\"DirectionalLight\", new BABYLON.Vector3(0.2, -0.3, 0.2), this.scene);\r\n        light3.intensity=0.2\r\n        //  light3.autoUpdateExtends=false;\r\n        light3.shadowFrustumSize=200\r\n        light3.shadowMinZ=-100\r\n        light3.shadowMaxZ=100\r\n\r\n\r\n\r\n        /**\r\n         * 天空盒子\r\n         * */\r\n        var skybox = BABYLON.Mesh.CreateBox(\"skyBox\", 1000.0, this.scene);\r\n        var skyboxMaterial = new BABYLON.StandardMaterial(\"skyBox\", this.scene);\r\n        skyboxMaterial.backFaceCulling = false;\r\n        skyboxMaterial.reflectionTexture =  AssetsManager.ins.resourceObject[\"cubeTextures\"][\"gameScene\"][\"skybox\"].clone()\r\n        skyboxMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;\r\n        skyboxMaterial.diffuseColor = new BABYLON.Color3(0, 0, 0);\r\n        skyboxMaterial.specularColor = new BABYLON.Color3(0, 0, 0);\r\n        //   skyboxMaterial.emissiveColor  = new BABYLON.Color3(0, 0, 0);\r\n        skyboxMaterial.disableLighting = false;\r\n        skybox.material = skyboxMaterial;\r\n\r\n\r\n\r\n        var terrainMaterial = new BABYLON[\"TerrainMaterial\"](\"terrainMaterial\", this.scene);\r\n\r\n        if(localStorage.map==\"1\"){\r\n            terrainMaterial.mixTexture = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"maptr2\"].clone()\r\n        }else{\r\n            terrainMaterial.mixTexture = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"maptr\"].clone()\r\n        }\r\n\r\n        terrainMaterial.diffuseTexture1 = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"grass\"].clone()\r\n        terrainMaterial.diffuseTexture1.uScale=20\r\n        terrainMaterial.diffuseTexture1.vScale=20\r\n        terrainMaterial.diffuseTexture2 = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"grass\"].clone()\r\n        terrainMaterial.diffuseTexture2.uScale=20\r\n        terrainMaterial.diffuseTexture2.vScale=20\r\n        terrainMaterial.diffuseTexture3 = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"ground\"].clone()\r\n        terrainMaterial.diffuseTexture3.uScale=20\r\n        terrainMaterial.diffuseTexture3.vScale=20\r\n\r\n\r\n    /*    var terrainMaterial = new BABYLON.StandardMaterial(\"texture1\", this.scene);\r\n        terrainMaterial.diffuseTexture = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"ground\"].clone()\r\n        terrainMaterial.specularColor=new BABYLON.Color3(0,0,0)\r\n        terrainMaterial.diffuseTexture[\"uScale\"]=20\r\n        terrainMaterial.diffuseTexture[\"vScale\"]=20*/\r\n\r\n\r\n        //雨粒子\r\n        var particleRain = new BABYLON.ParticleSystem(\"particles\", 2000, this.scene);\r\n\r\n        //粒子的纹理\r\n        particleRain.particleTexture = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"yu\"].clone()\r\n        particleRain.minEmitBox = new BABYLON.Vector3(-100, -100, 0); // Starting all From\r\n        particleRain.maxEmitBox = new BABYLON.Vector3(100, 100, 0); // Starting all From\r\n        particleRain.color1 = new BABYLON.Color4(255/255, 255/255, 255/255 ,1);\r\n        particleRain.color2 = new BABYLON.Color4(255/255, 255/255, 255/255,1);\r\n        particleRain.colorDead = new BABYLON.Color4(255/255, 255/255, 255/255,1);\r\n        particleRain.gravity = new BABYLON.Vector3(0, -9.81, -2);\r\n        particleRain.minSize = 5;\r\n        particleRain.maxSize = 5;\r\n        particleRain.minLifeTime = 5;\r\n        particleRain.maxLifeTime = 5;\r\n\r\n        particleRain.emitRate = 600;\r\n\r\n        // particleSystem.manualEmitCount = 300;\r\n        particleRain.blendMode = BABYLON.ParticleSystem.BLENDMODE_STANDARD;\r\n        particleRain.direction1 = new BABYLON.Vector3(1, 1, 1);\r\n        particleRain.direction2 = new BABYLON.Vector3(-1, -1, -1);\r\n        // Speed\r\n        particleRain.minEmitPower = 1;\r\n        particleRain.maxEmitPower = 1;\r\n        particleRain.updateSpeed = 0.3;\r\n\r\n        var shadowGenerator = new BABYLON.ShadowGenerator(4096, light3);\r\n        shadowGenerator.bias = 0.0004;\r\n        shadowGenerator.usePercentageCloserFiltering = true;\r\n        shadowGenerator.filteringQuality=0.1;\r\n        shadowGenerator.forceBackFacesOnly=true;\r\n\r\n\r\n\r\n\r\n\r\n        var postProcess = new BABYLON.RefractionPostProcess(\"Refraction\", \"\", new BABYLON.Color3(1.0, 1.0, 1.0), 0.05, 0.01, 1.0, camera);\r\n        var postProcess1 = new BABYLON.RefractionPostProcess(\"Refraction\", \"\", new BABYLON.Color3(1.0, 1.0, 1.0), 0.05, 0.01, 1.0, camera2);\r\n\r\n\r\n        var videoTexture =new BABYLON.VideoTexture(\"video\", [AssetsManager.ins.resourceObject[\"binarys\"][\"gameScene\"][\"rain\"].url], this.scene, true);\r\n        this.scene.registerBeforeRender(function(){\r\n            if(videoTexture.isReady()==true){\r\n                videoTexture.video.loop=true   //有效\r\n                videoTexture.video.play()   //有效\r\n            }\r\n        })\r\n\r\n        postProcess.refractionTexture=videoTexture\r\n        postProcess1.refractionTexture=videoTexture\r\n\r\n       // var pipeline = new BABYLON.StandardRenderingPipeline(\"standard\", this.scene, 0.5 / devicePixelRatio, null, [camera]);\r\n        //pipeline.lensTexture = new BABYLON.Texture(\"textures/lensdirt.jpg\", this.scene);\r\n\r\n\r\n\r\n     /*   var pipeline = new BABYLON.DefaultRenderingPipeline(\r\n            \"default\", // The name of the pipeline\r\n            true, // Do you want HDR textures ?\r\n            this.scene, // The scene instance\r\n            [camera] // The list of cameras to be attached to\r\n        );*/\r\n\r\n\r\n\r\n\r\n        var light4 = new BABYLON.SpotLight(\"spotLight\", new BABYLON.Vector3(0, 0, 0), new BABYLON.Vector3(1, 0, 0), 1.2, 1.3, this.scene);\r\n        light4.range=60;\r\n        light4.intensity = 0;\r\n        light4.projectionTexture = new BABYLON.Texture(AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"stainedGlass\"], this.scene);\r\n\r\n\r\n\r\n        var lighting = BABYLON.Mesh.CreateGround(\"lighting\", 200, 200, 0, this.scene);\r\n        lighting.rotation.z=-Math.PI*0.5;\r\n        lighting.billboardMode=2\r\n       // lighting.isVisible=false;\r\n\r\n        var lightingMaterial=new BABYLON.StandardMaterial(\"lightingMaterial\",this.scene)\r\n      //  lightingMaterial.emissiveTexture=new Texture(AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"lighting\"], this.scene)\r\n\r\n      //  lightingMaterial.alphaMode=2;\r\n\r\n        lighting.material=lightingMaterial;\r\n        lighting.visibility=0;\r\n\r\n        lighting.rotation.y=-Math.PI*0.5\r\n\r\n        var lightLook = BABYLON.Mesh.CreateGround(\"ground1\", 3, 3, 0, this.scene);\r\n        lightLook.isVisible=false;\r\n\r\n        // 水材质\r\n        var waterMesh = BABYLON.Mesh.CreateGround(\"waterMesh\", 512, 512, 32, this.scene, false);\r\n        waterMesh.position.y=123;\r\n        var water = new BABYLON[\"WaterMaterial\"](\"water\", this.scene, new BABYLON.Vector2(512, 512));\r\n        water.backFaceCulling = true;\r\n        water.bumpTexture = new BABYLON.Texture(AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"waterbump\"], this.scene);\r\n        water.windForce = -10;\r\n        water.waveHeight = 0;\r\n        water.bumpHeight = 0.5;\r\n        water.waterColor = new BABYLON.Color3(158/255, 133/255, 93/255);\r\n        water.colorBlendFactor = 0.4;\r\n        waterMesh.material = water;\r\n\r\n        var lens3 = BABYLON.Mesh.CreateSphere(\"centerHidenPick\", 16, 0.1, this.scene);\r\n        lens3.visibility=0\r\n        lens3.position=new BABYLON.Vector3(1350.799, 1000.817, -3000)\r\n        //添加光晕\r\n         var lensFlareSystem3 = new BABYLON.LensFlareSystem(\"lensFlareSystem\", lens3, this.scene);\r\n         var flare00 = new BABYLON.LensFlare(1.5, 1, new BABYLON.Color3(1,1,1), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"ty\"].src, lensFlareSystem3);\r\n         var flare01 = new BABYLON.LensFlare(0.24, 1, new BABYLON.Color3(0,1,0), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"Bphl4qj\"].src, lensFlareSystem3);\r\n         var flare02 = new BABYLON.LensFlare(0.28, 1, new BABYLON.Color3(0,0,1), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"Bphl4qj\"].src, lensFlareSystem3);\r\n         var flare03 = new BABYLON.LensFlare(0.2, 0.8, new BABYLON.Color3(.5,.7,1), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"IIyZhcg\"].src, lensFlareSystem3);\r\n         var flare04 = new BABYLON.LensFlare(0.2, 0.6, new BABYLON.Color3(.5,.5,1), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"HRsf4I5\"].src, lensFlareSystem3);\r\n         var flare05 = new BABYLON.LensFlare(0.4, 0.5, new BABYLON.Color3(.4,.6,.9),  AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"XaJRD9j\"].src, lensFlareSystem3);\r\n         var flare06 = new BABYLON.LensFlare(0.1, 0.35, new BABYLON.Color3(.5,.5,.9), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"it5c3Vr\"].src, lensFlareSystem3);\r\n         var flare07 = new BABYLON.LensFlare(0.12, -0.5, new BABYLON.Color3(.9,.75,.5), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"XaJRD9j\"].src, lensFlareSystem3);\r\n         var flare08 = new BABYLON.LensFlare(0.25, -0.25, new BABYLON.Color3(1,.85,.5), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"IIyZhcg\"].src, lensFlareSystem3);\r\n\r\n        this.display={\r\n            camera:camera,\r\n            camera2:camera2,\r\n            light:light,\r\n            light2:light2,\r\n            light3:light3,\r\n            light4:light4,\r\n            lightLook:lightLook,\r\n            camera2Box:camera2Box,\r\n            skybox:skybox,\r\n            particleRain:particleRain,\r\n            terrainMaterial:terrainMaterial,\r\n            shadowGenerator:shadowGenerator,\r\n            waterMesh:waterMesh,\r\n            water:water,\r\n            steering:steering,\r\n            postProcess:postProcess,\r\n            postProcess1:postProcess1,\r\n            lensFlareSystem3:lensFlareSystem3,\r\n            lighting:lighting,\r\n        }\r\n\r\n        console.log(this.display)\r\n\r\n      //  GameSceneCon.ins.resetGame(this.display);\r\n    }\r\n\r\n}\r\n\r\n\r\n","import {Module} from \"../Module\";\r\nimport {AnimationGui} from \"../../others/AnimationGui\";\r\nimport {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {ModuleName} from \"../../enum/ModuleName\";\r\nimport {DisplayPool} from \"../../others/DisplayPool\";\r\n\r\n\r\nexport class GameSceneGui extends Module{\r\n\r\n    //规则元素\r\n    protected section: any;\r\n\r\n    //元素对象集合\r\n    protected scene;\r\n\r\n    //舞台容器\r\n    protected parent;\r\n\r\n    //页面容器\r\n    protected view;\r\n\r\n    //事件\r\n    protected doEvents=[];\r\n\r\n\r\n    //面板隐藏显示实例\r\n    protected panelsAn=new AnimationGui(SceneManager.ins.scene,GuiManager.ins.fullscreenUI)\r\n\r\n    constructor(){\r\n        super()\r\n        this.initUI();\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    public show(data): void {\r\n        this.updateData()\r\n        this.addEvent();\r\n        GuiManager.ins.changeGui(this.parent);\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(): void {\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开前\r\n     * */\r\n    protected onOpen(...args){\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开后\r\n     * */\r\n    protected onOpened(...args){\r\n\r\n    }\r\n\r\n\r\n    public init(){\r\n        DisplayPool.ins.displayPool[ModuleName.GAME_PLAY_GUI]=this;\r\n    }\r\n\r\n\r\n    /**\r\n     * 添加事件\r\n     * */\r\n    protected addEvent(){\r\n\r\n    }\r\n\r\n\r\n    protected removeEvent(){\r\n\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 更新页面\r\n     * @param args\r\n     */\r\n    public updateData(...args): void {\r\n        this.removeEvent()\r\n        if (!this.isInit) {\r\n            this.initUI();\r\n            this.isInit = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭前\r\n     * */\r\n    protected onClose(){\r\n    }\r\n\r\n    /**\r\n     * 关闭后\r\n     * */\r\n    protected onClosed(){\r\n        this.removeEvent()\r\n       // NetManager.ins.getInfo(this, DataManager.ins.gameCfgData.game.gameId);\r\n    }\r\n}","import {Module} from \"../Module\";\r\nimport {AnimationGui} from \"../../others/AnimationGui\";\r\nimport {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {DisplayPool} from \"../../others/DisplayPool\";\r\nimport {ModuleName} from \"../../enum/ModuleName\";\r\nimport {GlobalManager} from \"../../manager/GlobalManager\";\r\n\r\n\r\nexport class StartGui extends Module {\r\n\r\n    //规则元素\r\n    protected section: any;\r\n\r\n    //元素对象集合\r\n    protected scene;\r\n\r\n    //舞台容器\r\n    protected parent;\r\n\r\n    //页面容器\r\n    protected view;\r\n\r\n    //事件\r\n    protected doEvents=[];\r\n\r\n    //游戏场景对象\r\n\r\n    protected gameSceneObject:any;\r\n\r\n\r\n    //面板隐藏显示实例\r\n    protected panelsAn=new AnimationGui(SceneManager.ins.scene,GuiManager.ins.fullscreenUI)\r\n\r\n    constructor(){\r\n        super()\r\n        this.initUI();\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    public show(data): void {\r\n        this.removeEvent();\r\n        this.updateData()\r\n        this.addEvent();\r\n        GuiManager.ins.changeGui(this.parent);\r\n    }\r\n\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(): void {\r\n        this.removeEvent();\r\n        this.panelsAn.hide(this.view,()=>{\r\n            this.onClose()\r\n        },()=>{\r\n            this.onClosed()\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开前\r\n     * */\r\n    protected onOpen(...args){\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开后\r\n     * */\r\n    protected onOpened(...args){\r\n\r\n    }\r\n\r\n\r\n    public init(){\r\n        DisplayPool.ins.displayPool[ModuleName.GAME_START_GUI]=this;\r\n    }\r\n\r\n\r\n    /**\r\n     * 添加事件\r\n     * */\r\n    protected addEvent(){\r\n\r\n    }\r\n\r\n\r\n    protected removeEvent(){\r\n    }\r\n\r\n\r\n    protected onClick_ruleBtn(): void {\r\n\r\n\r\n    }\r\n\r\n    protected onClick_optionBtn(): void {\r\n\r\n\r\n\r\n    }\r\n\r\n    protected onClick_startBtn(): void {\r\n        GlobalManager.ins.openModule(ModuleName.GAME_PLAY_GUI);\r\n        GlobalManager.ins.openModule(ModuleName.GAME_PLAY_SCENE);\r\n    }\r\n\r\n    /**\r\n     * 更新页面\r\n     * @param args\r\n     */\r\n    public updateData(...args): void {\r\n        if (!this.isInit) {\r\n            this.initUI();\r\n            this.isInit = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭前\r\n     * */\r\n    protected onClose(){\r\n        this.removeHtml()\r\n        //NetManager.ins.getInfo(this, DataManager.ins.gameCfgData.game.gameId);\r\n       // this.view.removeControl(this.optionsList)\r\n    }\r\n\r\n    protected removeHtml(){\r\n     //   console.log(this.section)\r\n        if(this.section){\r\n            // alert()\r\n            document.body.removeChild(this.section);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭后\r\n     * */\r\n    protected onClosed(){\r\n        this.removeEvent()\r\n      //  GlobalManager.ins.openModule(\"StartGuiCon\");\r\n      //  GuiManager.ins.removeGui(this.parent);\r\n    }\r\n}","import {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {Module} from \"../Module\";\r\n\r\nexport class Guis extends Module{\r\n    constructor(){\r\n        super();\r\n    }\r\n    //销毁\r\n}","import {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {Module} from \"../Module\";\r\n\r\nimport {AnimationGui} from \"../../others/AnimationGui\";\r\n\r\nexport class Panels extends Module{\r\n    //元素对象集合\r\n    protected scene;\r\n\r\n    //舞台容器\r\n    protected parent;\r\n\r\n    //页面容器\r\n    protected view;\r\n\r\n    //面板隐藏显示实例\r\n    protected panelsAn=new AnimationGui(SceneManager.ins.scene,GuiManager.ins.fullscreenUI)\r\n\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    protected show(open?,opened?): void {\r\n        this.addEvent();\r\n        this.panelsAn.show(this.view,open,opened)\r\n    }\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(close?,closed?): void {\r\n        this.removeEvent();\r\n        this.panelsAn.hide(this.view,close,closed)\r\n    }\r\n\r\n    //销毁\r\n}","/**\r\n * GUI控制器\r\n * */\r\nimport {GuiManager} from \"../manager/GuiManager\";\r\n\r\nexport class GuiCreate{\r\n\r\n\r\n    private panelOut=new BABYLON.GUI.StackPanel();\r\n\r\n    private static  instance: GuiCreate;\r\n\r\n    public static  get  ins():GuiCreate{\r\n        if(!this.instance){\r\n            this.instance=new GuiCreate()\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){}\r\n\r\n\r\n    public createList(name,options,scaleUi){\r\n        var rectOut=new BABYLON.GUI.Rectangle();\r\n        rectOut.thickness=0;\r\n        rectOut.isPointerBlocker=true;\r\n        rectOut.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;\r\n        rectOut.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        for (var key in options) {\r\n            if(rectOut[key]){\r\n                rectOut[key] = options[key];\r\n            }\r\n        }\r\n//            panelOut.height=1;\r\n        if(options&&options.isVertical){\r\n            this.panelOut.horizontalAlignment=2;\r\n            this.panelOut.verticalAlignment=0;\r\n            this.panelOut.isVertical  =true;\r\n            var mouse={\r\n                up:0,\r\n                down:0,\r\n            };\r\n            mouse.up=parseInt(this.panelOut.top.toString());\r\n            rectOut.onPointerDownObservable.add(function(e){\r\n                mouse.down= e.y;\r\n            });\r\n            rectOut.onPointerUpObservable.add((e)=>{\r\n                var topY=parseInt(this.panelOut.top.toString());\r\n                mouse.up=topY;\r\n                if(topY>0){\r\n                    this.panelOut.top=\"0px\";\r\n                    mouse.up= 0;\r\n                }\r\n                else if(parseInt(this.panelOut.top.toString())<parseInt(rectOut.height.toString())-parseInt(this.panelOut.height.toString())){\r\n                    var l=(parseInt(rectOut.height.toString())-parseInt(this.panelOut.height.toString()))*scaleUi;\r\n                    this.panelOut.top=l.toString()+\"px\";\r\n                    mouse.up= parseInt(this.panelOut.top);\r\n                }\r\n            });\r\n            rectOut.onPointerMoveObservable.add((e)=>{\r\n                var m=e.y-mouse.down;\r\n                var mul=(mouse.up+m)*scaleUi;\r\n                this.panelOut.top= mul.toString()+\"px\";\r\n            });\r\n        }else {\r\n            this.panelOut.horizontalAlignment=0;\r\n            this.panelOut.verticalAlignment=2;\r\n            this.panelOut.isVertical  =false;\r\n            var mouse={\r\n                up:0,\r\n                down:0\r\n            };\r\n            mouse.up=parseInt(this.panelOut.left.toString());\r\n            rectOut.onPointerDownObservable.add((e)=>{\r\n                mouse.down= e.x;\r\n            });\r\n            rectOut.onPointerUpObservable.add((e)=>{\r\n                var leftY=parseInt(this.panelOut.left.toString());\r\n                mouse.up=leftY;\r\n                if(leftY>0){\r\n                    this.panelOut.left=\"0px\";\r\n                    mouse.up= 0;\r\n                }\r\n                else if(parseInt(this.panelOut.left.toString())<parseInt(rectOut.width.toString())-parseInt(this.panelOut.width.toString())){\r\n                    var l=(parseInt(rectOut.width.toString())-parseInt(this.panelOut.width.toString()))*scaleUi;\r\n                    this.panelOut.left=l.toString()+\"px\";\r\n                    mouse.up= parseInt(this.panelOut.left);\r\n                }\r\n            });\r\n            rectOut.onPointerMoveObservable.add(function(e){\r\n                var m=e.x-mouse.down;\r\n                var mul=(mouse.up+m)*scaleUi;\r\n                this.panelOut.left= mul.toString()+\"px\";\r\n            });\r\n        }\r\n        rectOut.addControl(this.panelOut);\r\n        return rectOut\r\n    }\r\n\r\n\r\n    /**\r\n     * 横向滚动的奖品列表\r\n     * @example\r\n     *  this.optionsList({\r\n                    itemWidth:\"130px\",\r\n                    itemHeight:\"170px\",\r\n                    itemPaddingRight:\"30px\",\r\n                    logoWidth:\"100px\",\r\n                    logoHeight:\"100px\",\r\n                    logoTop:\"0px\",\r\n                    textWidth:\"100px\",\r\n                    textHeight:\"30px\",\r\n                    textTop:\"140px\",\r\n                    isVertical:false,\r\n                },data,this.guiObject)\r\n     *\r\n     * */\r\n    public optionsListCon(config,data,listTemplate){\r\n        var scaleUi=GuiManager.ins.fullscreenUI.idealWidth/document.getElementById(\"renderCanvas\").offsetWidth;\r\n        var prizeDatalist=this.createList(\"list\",{width:config.bodyWidth,height:config.bodyHeight,top:config.bodyTop,left:config.bodyLeft,isVertical:config.isVertical},scaleUi);\r\n        var _length=this.panelOut.children.length\r\n        if(_length>0){\r\n            for(var i=0;i<_length;i++){\r\n                this.panelOut.removeControl(this.panelOut.children[0])\r\n            }\r\n        }\r\n        data.optionList.forEach((_list)=>{\r\n            var list=listTemplate(config,_list)\r\n            this.panelOut.addControl(list)\r\n        })\r\n        return prizeDatalist\r\n    }\r\n\r\n}","/**\r\n * Created by rjf on 2017/10/10.\r\n * 粒子控制器\r\n */\r\n\r\nexport class particleCon {\r\n    private static instance: particleCon;\r\n    constructor(position,scene,particle){\r\n        this.fountain = BABYLON.Mesh.CreateBox(\"fountain\", 1.0, scene);\r\n        this.fountain.isPickable=false\r\n        this.fountain.visibility=0;\r\n        this.fountain.rotation.x=Math.PI*0.9;\r\n        this.particleSystem=particle;\r\n        //定义发射器\r\n        this.particleSystem.emitter = this.fountain; // the starting object, the emitter, a box in this case.\r\n        this.particleSystem.stop();\r\n        this.fountain.position=position;\r\n    }\r\n\r\n    private particleSystem;\r\n\r\n    private fountain;\r\n\r\n    public start(){\r\n        this.particleSystem.start();\r\n    }\r\n\r\n    public stop(){\r\n        this.particleSystem.stop();\r\n    }\r\n    public Position(position){\r\n        this.fountain.position=position;\r\n    }\r\n\r\n    public Parent(parent){\r\n        this.fountain.parent=parent;\r\n    }\r\n}\r\n\r\n","import {GuiCreate} from \"./GuiCreate\";\r\n\r\n/**\r\n * Created by renjianfeng\r\n *动画控制器\r\n */\r\nexport class AnimationCon {\r\n    private static instance: AnimationCon;\r\n    private setbeginAnimation;\r\n\r\n    public static  get  ins():AnimationCon{\r\n        if(!this.instance){\r\n            this.instance=new AnimationCon()\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){}\r\n\r\n    public animationBody(object,scene){\r\n        //动画模式\r\n        var _endattr;\r\n\r\n        //动画对象\r\n        var _mesh;\r\n\r\n        //动画属性\r\n        var _attr;\r\n\r\n        //动画速度\r\n        var _speed;\r\n\r\n        //动画帧\r\n        var _keys;\r\n\r\n        //动画结束回调函数\r\n        var _endCall;\r\n\r\n        //动画数据类型\r\n        var _typeData\r\n\r\n        //动画数据类型\r\n        var _loop;\r\n\r\n        if(object.endattr!=null){\r\n            _endattr=object.endattr;\r\n        }else{\r\n            _endattr=BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE;\r\n        }\r\n\r\n        if(object.mesh!=null){\r\n            _mesh=object.mesh;\r\n        }else {\r\n            _mesh=null;\r\n            console.error(\"动画对象不能为空！\")\r\n        }\r\n\r\n        if(object.attr!=null){\r\n            _attr=object.attr;\r\n        }else {\r\n            _attr=null;\r\n            console.error(\"动画对象属性不能为空！\")\r\n        }\r\n\r\n        if(object.speed!=null){\r\n            _speed=object.speed;\r\n        }else {\r\n            _speed=10;\r\n        }\r\n\r\n        if(object.keys!=null){\r\n            _keys=object.keys;\r\n        }else {\r\n            _keys=[];\r\n        }\r\n\r\n        if(object.endCall!=null){\r\n            _endCall=object.endCall\r\n        }else{\r\n            _endCall=function(){}\r\n        }\r\n\r\n\r\n        if(object.typeData!=null){\r\n            _typeData=object.typedata\r\n        }else{\r\n            _typeData=BABYLON.Animation.ANIMATIONTYPE_FLOAT\r\n        }\r\n\r\n\r\n        if(object.loop!=null){\r\n            _loop=object.loop\r\n        }else{\r\n            _loop=false;\r\n        }\r\n\r\n        var animationBox = new BABYLON.Animation(\"myAnimation\", _attr, _speed, _typeData, _endattr);\r\n        var keys = [];\r\n        keys=_keys\r\n        animationBox.setKeys(keys);\r\n        _mesh.animations.push(animationBox);\r\n        this.setbeginAnimation=scene.beginAnimation(_mesh, 0, _keys[_keys.length-1].frame, _loop);\r\n        this.setbeginAnimation.onAnimationEnd=function(){\r\n            _endCall()\r\n        }\r\n    }\r\n\r\n    public Pause(){\r\n        this.setbeginAnimation.pause()\r\n    }\r\n    public Reset(){\r\n        this.setbeginAnimation.reset()\r\n    }\r\n    public Speed(i){\r\n        this.setbeginAnimation.speedRatio=i\r\n    }\r\n\r\n}\r\n\r\n","/**\r\n *Created by renjianfeng\r\n */\r\nexport class AssetsManager {\r\n    private _resourceData;\r\n    private _resourceObject:object;\r\n\r\n\r\n    private static instance: AssetsManager;\r\n\r\n    public static get ins(): AssetsManager {\r\n        if (!this.instance) {\r\n            this.instance = new AssetsManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        //this._resourceData=ResourceCon.ins.resource;\r\n        this._resourceObject={\r\n            binarys:{},\r\n            images:{},\r\n            models:{},\r\n            textures:{},\r\n            cubeTextures:{}\r\n        }\r\n    }\r\n\r\n    public set resourceData(resource){\r\n        this._resourceData=resource;\r\n    }\r\n\r\n    public loadFile(sceneNames:Array<string>,scene,callback,progress){\r\n\r\n        let assetsManager = new BABYLON.AssetsManager(scene);\r\n\r\n        sceneNames.forEach(function(sceneName){\r\n            //加载模型\r\n            var _thisModel={}\r\n            this._resourceData[sceneName].models.forEach(function(model){\r\n                let meshTask = assetsManager.addMeshTask(\r\n                    \"skull task\",\r\n                    \"\",\r\n                    model.filePath,\r\n                    model.fileName\r\n                );\r\n                meshTask.onSuccess = function (task) {\r\n\r\n                    console.log(\"meshTask\")\r\n                    console.log(task)\r\n                  /*  let _thisMesh = BABYLON.MeshBuilder.CreateBox(\"\", {}, scene);\r\n                    _thisMesh.isVisible=false;\r\n                    _thisMesh.position=new BABYLON.Vector3(0,0,0);\r\n                    task.loadedMeshes.forEach(function(mesh){\r\n                        mesh.isVisible=false;\r\n                       // mesh.position=new BABYLON.Vector3(0,0,0);\r\n                        mesh.parent=_thisMesh;\r\n                     /!*   mesh.getChildMeshes(false,function(child){\r\n                            child.parent=_thisMesh;\r\n                        })*!/\r\n                        //_thisMesh.addChild(mesh)\r\n                    }.bind(this))*/\r\n\r\n                    task.loadedMeshes.forEach(function(mesh){\r\n                        mesh.isVisible=false;\r\n                        mesh.name=\"noneisVisible_\"+mesh;\r\n                    })\r\n\r\n                    let _thisMesh=task;\r\n\r\n                   // this._resourceObject.models[model.name]=_thisMesh;\r\n                    _thisModel[model.name]=_thisMesh\r\n                    this._resourceObject.models[sceneName]=_thisModel;\r\n\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n            //加载图片\r\n            var _thisImage={}\r\n            this._resourceData[sceneName].images.forEach(function(image){\r\n                let imageTask = assetsManager.addImageTask(\r\n                    \"image task\",\r\n                    image.filePath+image.fileName,\r\n                );\r\n                imageTask.onSuccess = function (task) {\r\n                    _thisImage[image.name]=task.image\r\n                    this._resourceObject.images[sceneName]=_thisImage;\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n\r\n\r\n            //加载贴图\r\n            var _thisTexture={}\r\n            this._resourceData[sceneName].textures.forEach(function(texture){\r\n                let textureTask = assetsManager.addTextureTask(\r\n                    \"texture task\",\r\n                    texture.filePath+texture.fileName,\r\n                );\r\n                textureTask.onSuccess = function (task) {\r\n                    _thisTexture[texture.name]=task.texture\r\n                    this._resourceObject.textures[sceneName]=_thisTexture;\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n            //加载二进制文件\r\n            var _thisBinary={}\r\n            this._resourceData[sceneName].binarys.forEach(function(binary){\r\n                let binaryTask = assetsManager.addBinaryFileTask(\r\n                    \"binary task\",\r\n                    binary.filePath+binary.fileName,\r\n                );\r\n                binaryTask.onSuccess = function (task) {\r\n                    console.log(6666677)\r\n\r\n                    _thisBinary[binary.name]=task.data\r\n                    _thisBinary[binary.name][\"url\"]=task.url\r\n                    _thisBinary[binary.name][\"rootUrl\"]=binary.filePath\r\n                    _thisBinary[binary.name][\"sceneFilename\"]=binary.fileName\r\n                    this._resourceObject.binarys[sceneName]=_thisBinary;\r\n\r\n                    console.log(_thisBinary[binary.name])\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n            //加载天空盒子/环境贴图\r\n            var _thisCubeTexture={}\r\n            this._resourceData[sceneName].cubeTextures.forEach(function(cubeTexture){\r\n                let cubeTextureTask = assetsManager.addCubeTextureTask(\r\n                    \"cubeTexture task\",\r\n                    cubeTexture.filePath+cubeTexture.fileName,\r\n                );\r\n                cubeTextureTask.onSuccess = function (task) {\r\n                    _thisCubeTexture[cubeTexture.name]=task.texture\r\n                    this._resourceObject.cubeTextures[sceneName]=_thisCubeTexture;\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n        }.bind(this))\r\n\r\n        assetsManager.load();\r\n\r\n\r\n        //加载成功一个子元素调用\r\n        assetsManager.onProgress=function(task) {\r\n            var _this={\r\n                totalTasksCount:assetsManager._totalTasksCount,\r\n                waitingTasksCount:assetsManager._waitingTasksCount,\r\n                loadCount:(assetsManager._totalTasksCount-assetsManager._waitingTasksCount)/assetsManager._totalTasksCount\r\n            }\r\n            progress(_this)\r\n\r\n        }.bind(this);\r\n\r\n        //全部加载成功调用\r\n        assetsManager.onFinish=function(task) {\r\n            callback()\r\n        }.bind(this);\r\n\r\n    }\r\n\r\n    public get resourceObject(){\r\n        return this._resourceObject;\r\n    }\r\n\r\n}","/**\r\n *Created by cuiliqiang on 2018/3/13\r\n */\r\nexport enum WeatherState {\r\n    //晴天\r\n    SUNNY_DAY = 0,\r\n    //雨天\r\n    RAIN_DAY = 1,\r\n    //下午\r\n    AFTERNOON_DAY = 2,\r\n    //晚上\r\n    NIGHT_DAY = 3,\r\n}\r\n","import {Module} from \"../Module\";\r\nimport {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GlobalManager} from \"../../manager/GlobalManager\";\r\nimport {ModuleName} from \"../../enum/ModuleName\";\r\n\r\nexport class GameScenes extends Module{\r\n\r\n    //场景名称\r\n    protected sceneName:string;\r\n\r\n    protected isInit:boolean;\r\n\r\n    /**\r\n     * 是否校验积分\r\n     */\r\n    protected checkScore: boolean;\r\n\r\n    /**\r\n     * 开始游戏数据\r\n     */\r\n  //  protected doStartData: DoStartData;\r\n\r\n    /**\r\n     * 扩展数据\r\n     * */\r\n    protected other: any;\r\n\r\n\r\n    protected score;\r\n\r\n    // protected display:any;\r\n\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    //销毁\r\n    public dispose(){\r\n        var j;\r\n        for(j in this.display){\r\n            console.log(this.display[j])\r\n            if( this.display[j]){\r\n                this.display[j].dispose()\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public show(data){\r\n        this.resetGame()\r\n        SceneManager.ins.change(this.display);\r\n    }\r\n\r\n    protected resetGame(){\r\n\r\n    }\r\n\r\n    protected gameOver(): void {\r\n        this.removeEvent();\r\n        //将最高纪录缓存\r\n    }\r\n}","import {SceneManager} from \"../public/index\"\r\nimport {AssetsManager} from \"../public/index\"\r\n\r\n\r\n/**\r\n * 全局执行函数\r\n *\r\n *\r\n* */\r\nexport class SceneBeforeCall {\r\n    private static instance: SceneBeforeCall;\r\n\r\n    public static get ins(): SceneBeforeCall {\r\n        if (!this.instance) {\r\n            this.instance = new SceneBeforeCall();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    public game_bg:any;\r\n\r\n    constructor(){}\r\n\r\n    public musicLoop(){\r\n      /*  this.game_bg = new BABYLON.Sound(\"Cello\",AssetsManager.ins.resourceObject[\"binarys\"][\"gameScene\"][\"game_bg\"][\"url\"], SceneManager.ins.scene,()=>{\r\n            this.game_bg.play()\r\n            this.game_bg.setVolume(0.5)\r\n        },{loop:true});*/\r\n    }\r\n}","import {ResourceData} from \"../public/index\"\r\n\r\nexport class ResourceCon {\r\n\r\n    private _resource;\r\n\r\n    private static instance: ResourceCon;\r\n\r\n    public static get ins(): ResourceCon {\r\n        if (!this.instance) {\r\n            this.instance = new ResourceCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    private pathFirst=window[\"resPath\"]\r\n\r\n    constructor(){\r\n        let gameScene:ResourceData;\r\n\r\n        gameScene={\r\n            binarys:[\r\n                {name:\"rain\", filePath:this.pathFirst+\"src/Resource/gameScene/binarys/\", fileName:\"rain.mp4\"},\r\n            ],\r\n            images:[\r\n               /*  {name:\"test\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"cursor_default.png\",},\r\n                {name:\"beginBtn\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"beginBtn.png\",},\r\n                {name:\"bg\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"bg.jpg\",},\r\n                {name:\"close\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"close.png\",},\r\n                {name:\"win_m\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"win_m.png\",},\r\n                {name:\"bg_modle\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"bg_modle.png\",},\r\n                {name:\"btn_left\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_left.png\",},\r\n                {name:\"btn_right\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_right.png\",},\r\n                {name:\"btn_py\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_py.png\",},\r\n                {name:\"btn_dq\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_dq.png\",},\r\n                {name:\"prizeBtn\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"prizeBtn.png\",},\r\n                {name:\"ruleBtn\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"ruleBtn.png\",}, */\r\n\r\n                //光晕\r\n                {name:\"Bphl4qj\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"Bphl4qj.png\"},\r\n                {name:\"HRsf4I5\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"HRsf4I5.png\"},\r\n                {name:\"IIyZhcg\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"IIyZhcg.png\"},\r\n                {name:\"it5c3Vr\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"it5c3Vr.png\"},\r\n                {name:\"ty\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"ty.png\"},\r\n                {name:\"XaJRD9j\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"XaJRD9j.png\"},\r\n\r\n                //ui\r\n\r\n                {name:\"after\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"after.jpg\"},\r\n                {name:\"night\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"night.jpg\"},\r\n                {name:\"rain\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"rain.jpg\"},\r\n                {name:\"sun\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"sun.jpg\"},\r\n                {name:\"map1\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"map_1.jpg\"},\r\n                {name:\"map2\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"map_2.jpg\"},\r\n                {name:\"map3\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"map_3.jpg\"},\r\n                {name:\"logo\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"logo.png\"},\r\n            ],\r\n            models:[\r\n                {name:\"car\", filePath:this.pathFirst+\"src/Resource/gameScene/models/car2/\", fileName:\"car20.babylon\"},\r\n                {name:\"wheel\", filePath:this.pathFirst+\"src/Resource/gameScene/models/car2/\", fileName:\"wheel.babylon\"},\r\n                {name:\"map1\", filePath:this.pathFirst+\"src/Resource/gameScene/models/height_m2/\", fileName:\"height_m18.babylon\"},\r\n                {name:\"map2\", filePath:this.pathFirst+\"src/Resource/gameScene/models/height_m2/\", fileName:\"height_m15.babylon\"},\r\n                {name:\"map3\", filePath:this.pathFirst+\"src/Resource/gameScene/models/height_m2/\", fileName:\"height_m2.babylon\"},\r\n            ],\r\n            textures:[\r\n                {name:\"grass\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"grass.png\"},\r\n                {name:\"grass2\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"grass.jpg\"},\r\n                {name:\"ground\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"ground.jpg\"},\r\n                {name:\"maptr\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"maptr.jpg\"},\r\n                {name:\"maptr2\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"maptr5.jpg\"},\r\n                {name:\"stainedGlass\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"stainedGlass.png\"},\r\n                {name:\"waterbump\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"waterbump.png\"},\r\n                {name:\"yu\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"yu.png\"},\r\n                {name:\"lighting\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"lighting4.png\"},\r\n\r\n            ],\r\n            cubeTextures:[\r\n                {name:\"skybox\", filePath:this.pathFirst+\"src/Resource/gameScene/cubeTextures/skybox/\", fileName:\"skybox\",}\r\n            ]\r\n        };\r\n\r\n\r\n\r\n        this._resource={\r\n            gameScene:gameScene,\r\n        }\r\n    }\r\n\r\n    public get resource(): object {\r\n        return this._resource;\r\n    }\r\n}","\r\nimport {ResourceCon} from \"./other/ResourceCon\";\r\nimport {SceneBeforeCall} from \"./other/SceneBeforeCall\";\r\nimport {AssetsManager} from \"./public/index\"\r\nimport {SceneManager} from \"./public/index\";\r\nimport {GlobalManager} from \"./public/index\";\r\nimport {DisplayPool} from \"./public/index\";\r\nimport {ModuleName} from \"./public/index\"\r\nimport {ExGameSceneCon} from \"./Scene/GameScene/ExGameSceneCon\";\r\nimport {ExGameSceneGuiCon} from \"./Gui/GameSceneGui/ExGameSceneGuiCon\";\r\nimport {ExStartGuiCon} from \"./Gui/StartGui/ExStartGuiCon\";\r\n\r\n\r\n\r\nexport class Before{\r\n\r\n\r\n    private static instance: Before;\r\n\r\n    public static get ins(): Before {\r\n        if (!this.instance) {\r\n            this.instance = new Before();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n\r\n    public update(){\r\n        localStorage.map=\"1\"\r\n        localStorage.car_x=0;\r\n        localStorage.car_y=151;\r\n        localStorage.car_z=226;\r\n        AssetsManager.ins.resourceData=ResourceCon.ins.resource;\r\n        AssetsManager.ins.loadFile([\"gameScene\"],SceneManager.ins.scene,function(){\r\n            this.initModule()\r\n            console.log(DisplayPool.ins.displayPool)\r\n            GlobalManager.ins.openModule(ModuleName.GAME_START_GUI);\r\n            SceneBeforeCall.ins.musicLoop();\r\n        }.bind(this),function(e){\r\n            console.log(e.loadCount)\r\n        }.bind(this))\r\n    }\r\n\r\n    protected addEvent(): void {\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 安装GUI/3D场景模块\r\n     * */\r\n\r\n    public initModule(){\r\n        //游戏3D场景\r\n        ExGameSceneCon.ins.init();\r\n        ExStartGuiCon.ins.init();\r\n        ExGameSceneGuiCon.ins.init();\r\n    }\r\n\r\n}\r\n","\r\nimport {Before} from \"./Before\";\r\n\r\nwindow.addEventListener(\"load\",()=>{\r\n\r\n    var ua = navigator.userAgent;\r\n\r\n    var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/),\r\n\r\n        isIphone =!ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/),\r\n\r\n        isAndroid = ua.match(/(Android)\\s+([\\d.]+)/),\r\n\r\n        isMobile = isIphone || isAndroid;\r\n\r\n//判断\r\n\r\n    if(isMobile){\r\ndocument.body.innerHTML= `\r\n    <style>\r\n        body{\r\n        text-align: center;\r\n        font-size: 1rem;\r\n        color: #349ccd;\r\n        }\r\n\r\n    h1{\r\n    margin-top: 10rem;\r\n    }\r\n    </style> \r\n    <h1>Hi!</h1>\r\n    Please access through PC, mobile phone temporarily not supported!\" <br>(请通过PC访问，手机暂时不支持！)`;\r\n    }else{\r\n        Before.ins.update();\r\n    }\r\n\r\n\r\n})\r\n"],"sourceRoot":""}