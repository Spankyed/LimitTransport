{"version":3,"sources":["webpack://Hi/webpack/bootstrap","webpack://Hi/./src/public/index.ts","webpack://Hi/./src/public/components/Module.ts","webpack://Hi/./src/public/manager/GuiManager.ts","webpack://Hi/./src/public/manager/SceneManager.ts","webpack://Hi/./src/public/others/AnimationGui.ts","webpack://Hi/./src/public/others/DisplayPool.ts","webpack://Hi/./src/public/enum/ModuleName.ts","webpack://Hi/./src/other/EventCon.ts","webpack://Hi/./src/Scene/GameScene/ExGameSceneCon.ts","webpack://Hi/./src/public/manager/GlobalManager.ts","webpack://Hi/./src/Gui/StartGui/ExStartGui.ts","webpack://Hi/./src/Gui/StartGui/ExStartGuiCon.ts","webpack://Hi/./src/Gui/GameSceneGui/ExGameSceneGui.ts","webpack://Hi/./src/Gui/GameSceneGui/ExGameSceneGuiCon.ts","webpack://Hi/./src/Scene/GameScene/UseMaterial.ts","webpack://Hi/./src/Scene/GameScene/CannonCreateObj.ts","webpack://Hi/./src/Scene/GameScene/ExGameScene.ts","webpack://Hi/./src/public/components/game/GameSceneGui.ts","webpack://Hi/./src/public/components/game/StartGui.ts","webpack://Hi/./src/public/components/game/Guis.ts","webpack://Hi/./src/public/components/game/Panels.ts","webpack://Hi/./src/public/others/GuiCreate.ts","webpack://Hi/./src/public/others/particleCon.ts","webpack://Hi/./src/public/others/AnimationCon.ts","webpack://Hi/./src/public/manager/AssetsManager.ts","webpack://Hi/./src/public/enum/WeatherState.ts","webpack://Hi/./src/public/components/game/GameScenes.ts","webpack://Hi/./src/other/SceneBeforeCall.ts","webpack://Hi/./src/other/ResourceCon.ts","webpack://Hi/./src/Before.ts","webpack://Hi/./src/Main.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","e","GameScenes_1","GameScenes","ModuleName_1","ModuleName","WeatherState_1","WeatherState","AssetsManager_1","AssetsManager","GuiManager_1","GuiManager","SceneManager_1","SceneManager","GlobalManager_1","GlobalManager","AnimationCon_1","AnimationCon","AnimationGui_1","AnimationGui","particleCon_1","particleCon","GuiCreate_1","GuiCreate","Panels_1","Panels","Module_1","Module","Guis_1","Guis","StartGui_1","StartGui","GameSceneGui_1","GameSceneGui","DisplayPool_1","DisplayPool","initUI","show","args","_i","arguments","length","this","addEvent","hide","removeEvent","updateData","isInit","addClick","display","callback","onPointerUpObservable","add","removeClick","event","remove","delayEnable","delay","mouseEnable","mouseChildren","timeoutId","clearTimeout","setTimeout","dispose","guiPoll","_lastGui","_fullscreenUI","BABYLON","GUI","AdvancedDynamicTexture","CreateFullscreenUI","instance","changeGui","gui","_length","rootContainer","children","removeControl","addControl","appendGui","removeGui","removeAll","openPanel","closePanel","_canvas","document","querySelector","_engine","Engine","createScene","scene","Scene","_onPointerUp","_onPointerDown","_onPointerMove","a","Tools","GetPointerPrefix","removeEventListener","window","pointerId","addEventListener","FreeCamera","Vector3","_scene","runRenderLoop","render","TWEEN","update","resize","change","_a","ins","meshes","stage","advancedTexture","open","opened","keys","push","frame","animationX","Animation","ANIMATIONTYPE_FLOAT","ANIMATIONLOOPMODE_CYCLE","setKeys","animationY","animations","beginAnimation","close","closed","_this","displayPool","LOADING_GUI","WAITING_PANEL","MSG_PANEL","RULE_PANEL","LOSE_PANEL","GAME_START_GUI","GAME_PLAY_SCENE","GAME_PLAY_GUI","EventCon","gold","Observable","index_1","index_2","index_3","EventCon_1","ExGameScene_1","index_4","index_5","CannonCreateObj_1","UseMaterial_1","index_6","ExGameSceneCon","_super","importMeshes","rootUrl","resourceObject","models","gameScene","car","sceneFilename","wheel","map","__extends","init","resetGame","ImportMeshes","newMeshes","ExGameScene","creatScene","score","_str","notifyObservers","forEach","mesh","shadowGenerator","getShadowMap","renderList","receiveShadows","getMeshByName","scaling","rotation","Math","PI","position","isVisible","ground","console","log","copyFromFloats","bakeCurrentTransformIntoVertices","material","terrainMaterial","UseMaterial","setCarMaterial","gl","cannonCreateObj","CannonCreateObj","HeightMap","carCtrl","setInterval","light3","x","y","z","waterRenderList","localStorage","weatherState","RAIN_DAY","setLightning","setRain","setCarLight","fogMode","FOGMODE_EXP","fogDensity","fogColor","Color3","GlowLayer","addIncludedOnlyMesh","postProcess","depth","postProcess1","light","intensity","light2","lensFlareSystem3","SUNNY_DAY","alpha","NIGHT_DAY","AFTERNOON_DAY","steering","parent","setCameraParent","gameDeState","viewCtrl","water","addToRenderList","_children","tailFlower","particleRain","start","engine","Position","absolutePosition","light4","lightLook","setDirectionToTarget","view","camera2","detachControl","canvas","activeCamera","camera","beta","attachControl","camera2Box","setTarget","target","_gold","onSuccess","_meshes","_skeletons","_loadCount","list","SceneLoader","ImportMesh","_mesh","_skeleton","error","openModule","moduleName","apply","ExStartGui","creatUI","Rectangle","viewHtml","viewNode","createElement","id","innerHTML","sceneChild","ExStartGui_1","ExGameSceneCon_1","public_1","ExStartGuiCon","guiObject","gameSceneObject","body","appendChild","doEvents","viewPlay","getElementById","onClick_startBtn","querySelectorAll","setAttribute","path","style","backgroundImage","images","rain","src","sun","after","night","removeChild","ExGameSceneGui","ExGameSceneGui_1","ExGameSceneGuiCon","_btnState","btnLeft","viewButton","viewReset","location","reload","StandardMaterial","probe","ReflectionProbe","getMaterialByName","reflectionTexture","cubeTexture","level","subMaterials","attachToMesh","bxg","PBRMaterial","albedoColor","metallic","roughness","emissiveColor","emissiveTexture","diffuseTexture","disableLighting","diffuseColor","specularColor","opacityTexture","hasAlpha","backFaceCulling","text","forceOn","brakeOn","babylonWheelBodies","sphere","wheelBodies","zxState","brakeForce","maxSteerVal","maxForce","gravityY","options","radius","directionLocal","CANNON","Vec3","suspensionStiffness","suspensionRestLength","frictionSlip","dampingRelaxation","dampingCompression","maxSuspensionForce","rollInfluence","axleLocal","chassisConnectionPointLocal","maxSuspensionTravel","customSlidingRotationalSpeed","useCustomSlidingRotationalSpeed","gravity","pointDepth","pos","getVerticesData","VertexBuffer","PositionKind","matrix","arraySize","sqrt","elementSize","min","getBoundingInfo","boundingBox","extendSize","minY","round","max","loc","slice","newValue","shape","Heightfield","heightBody","Body","mass","quaternion","setFromAxisAngle","world","createPhysics","hBody","World","set","broadphase","NaiveBroadphase","defaultContactMaterial","friction","groundMaterial","Material","wheelMaterial","wheelGroundContactMaterial","ContactMaterial","restitution","contactEquationStiffness","addContactMaterial","cannonCar","createCannonVehicle","sizeXYZ","chassisShape","Box","chassisBody","addShape","angularVelocity","babylonCarBox","createBabylonChassisBody","vehicle","RaycastVehicle","addWheel","addToWorld","wheelInfos","cylinderShape","Cylinder","wheelBody","type","KINEMATIC","collisionFilterGroup","q","Quaternion","createBabylonWheelBodies","w1","clone","w2","w3","w4","updateWheelTransform","worldTransform","copy","rotationQuaternion","w","step","size","shapes","halfExtents","meshFromShape","MeshBuilder","CreateBox","height","width","boundingSphereRadius","CreateCylinder","createBabylonBody","meshBox","createCannonBox","boxBody","babylonBox","handlerDown","handlerUp","SteerVal","onAfterRenderObservable","setSteeringValue","setBrake","keyCode","applyEngineForce","clearColor","Color4","ArcRotateCamera","upperRadiusLimit","lowerRadiusLimit","visibility","UniversalCamera","minZ","HemisphericLight","DirectionalLight","shadowFrustumSize","shadowMinZ","shadowMaxZ","skybox","Mesh","skyboxMaterial","cubeTextures","coordinatesMode","Texture","SKYBOX_MODE","TerrainMaterial","mixTexture","textures","maptr","diffuseTexture1","grass","uScale","vScale","diffuseTexture2","diffuseTexture3","ParticleSystem","particleTexture","yu","minEmitBox","maxEmitBox","color1","color2","colorDead","minSize","maxSize","minLifeTime","maxLifeTime","emitRate","blendMode","BLENDMODE_STANDARD","direction1","direction2","minEmitPower","maxEmitPower","updateSpeed","ShadowGenerator","bias","usePercentageCloserFiltering","filteringQuality","forceBackFacesOnly","RefractionPostProcess","videoTexture","VideoTexture","binarys","url","registerBeforeRender","isReady","video","loop","play","refractionTexture","SpotLight","range","projectionTexture","stainedGlass","CreateGround","waterMesh","WaterMaterial","Vector2","bumpTexture","waterbump","windForce","waveHeight","bumpHeight","waterColor","colorBlendFactor","lens3","CreateSphere","LensFlareSystem","LensFlare","ty","Bphl4qj","IIyZhcg","HRsf4I5","XaJRD9j","it5c3Vr","panelsAn","fullscreenUI","data","onOpen","onOpened","onClose","onClosed","onClick_ruleBtn","onClick_optionBtn","removeHtml","section","panelOut","StackPanel","createList","scaleUi","mouse","rectOut","thickness","isPointerBlocker","verticalAlignment","Control","VERTICAL_ALIGNMENT_TOP","horizontalAlignment","HORIZONTAL_ALIGNMENT_LEFT","isVertical","up","down","parseInt","top","toString","onPointerDownObservable","topY","onPointerMoveObservable","mul","left","leftY","optionsListCon","config","listTemplate","idealWidth","offsetWidth","prizeDatalist","bodyWidth","bodyHeight","bodyTop","bodyLeft","optionList","_list","particle","fountain","isPickable","particleSystem","emitter","stop","Parent","animationBody","_endattr","_attr","_speed","_keys","_endCall","_typeData","_loop","endattr","attr","speed","endCall","typeData","typedata","animationBox","setbeginAnimation","onAnimationEnd","Pause","pause","Reset","reset","Speed","speedRatio","_resourceObject","resource","_resourceData","loadFile","sceneNames","progress","assetsManager","sceneName","_thisModel","model","addMeshTask","filePath","fileName","task","loadedMeshes","_thisMesh","_thisImage","image","addImageTask","_thisTexture","texture","addTextureTask","_thisBinary","binary","addBinaryFileTask","_thisCubeTexture","addCubeTextureTask","load","onProgress","totalTasksCount","_totalTasksCount","waitingTasksCount","_waitingTasksCount","loadCount","onFinish","j","gameOver","SceneBeforeCall","musicLoop","ResourceCon","pathFirst","resPath","_resource","ResourceCon_1","SceneBeforeCall_1","ExGameSceneGuiCon_1","ExStartGuiCon_1","Before","resourceData","initModule","Before_1"],"mappings":"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","file":"hi.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 30);\n","\r\nimport {GameScenes} from \"./components/game/GameScenes\";\r\nimport {ResourceData} from \"./interface/ResourceData\";\r\nimport {fileData} from \"./interface/fileData\";\r\nimport {ModuleName} from \"./enum/ModuleName\";\r\nimport {WeatherState} from \"./enum/WeatherState\";\r\nimport {AssetsManager} from \"./manager/AssetsManager\";\r\nimport {GuiManager} from \"./manager/GuiManager\";\r\nimport {SceneManager} from \"./manager/SceneManager\";\r\nimport {GlobalManager} from \"./manager/GlobalManager\";\r\nimport {AnimationCon} from \"./others/AnimationCon\";\r\nimport {AnimationGui} from \"./others/AnimationGui\";\r\nimport {particleCon} from \"./others/particleCon\";\r\nimport {GuiCreate} from \"./others/GuiCreate\";\r\nimport {Panels} from \"./components/game/Panels\";\r\nimport {Module} from \"./components/Module\";\r\nimport {Guis} from \"./components/game/Guis\";\r\nimport {StartGui} from \"./components/game/StartGui\";\r\nimport {GameSceneGui} from \"./components/game/GameSceneGui\";\r\nimport {DisplayPool} from \"./others/DisplayPool\";\r\n\r\n\r\n\r\nexport {\r\n    //UI创建和scene创建\r\n    GameScenes,Panels,Module,Guis,DisplayPool,GameSceneGui,StartGui,\r\n    //other\r\n    AnimationCon,AnimationGui,particleCon,GuiCreate,\r\n    //接口\r\n    ResourceData,fileData,\r\n    //枚举\r\n     ModuleName,WeatherState,\r\n    //管理器\r\n    AssetsManager,GuiManager,SceneManager,GlobalManager,\r\n}","\r\n/**\r\n *Created by cuiliqiang on 2018/3/1\r\n * 组件基类\r\n */\r\n\r\n\r\nexport class Module {\r\n    private timeoutId;\r\n\r\n    /**\r\n     * 显示对象（皮肤）\r\n     */\r\n    protected display: any;\r\n    /**\r\n     * 是否初始化完成\r\n     */\r\n    protected isInit: boolean;\r\n    /**\r\n     * 点击事件回调池\r\n     */\r\n    private clickCallbackPool: any;\r\n\r\n    constructor() {\r\n      //  var skinClass: any = eval(this.module.skinName);\r\n       // this.display = new skinClass();\r\n       // this.clickCallbackPool = {};\r\n    }\r\n\r\n    /**\r\n     * 初始化UI\r\n     */\r\n    protected initUI(): void {\r\n\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    protected show(...args): void {\r\n        this.addEvent();\r\n    }\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(...args): void {\r\n        this.removeEvent();\r\n    }\r\n\r\n    /**\r\n     * 添加事件\r\n     */\r\n    protected addEvent(): void {\r\n\r\n    }\r\n\r\n    /**\r\n     * 移除事件\r\n     */\r\n    protected removeEvent(): void {\r\n\r\n    }\r\n\r\n    /**\r\n     * 更新页面\r\n     * @param args\r\n     */\r\n    public updateData(...args): void {\r\n        if (!this.isInit) {\r\n            this.initUI();\r\n            this.isInit = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 添加点击事件\r\n     * @param display\r\n     *\r\n     * @param callback\r\n     */\r\n    protected addClick(display: any, callback: Function) {\r\n        var _this= display.onPointerUpObservable.add(callback);\r\n        return _this;\r\n    }\r\n\r\n    /**\r\n     * 移除点击事件\r\n     * @param display\r\n     * @param callback\r\n     */\r\n    protected removeClick(display: any, event): void {\r\n        display.onPointerUpObservable.remove(event);\r\n      //  delete this.clickCallbackPool[display.instanceId];\r\n    }\r\n\r\n    /**\r\n     * 延时启用点击事件\r\n     * @param display 显示对象\r\n     * @param {number} delay 延时事件\r\n     */\r\n    protected delayEnable(display: any, delay?: number): void {\r\n        display.mouseEnable = display.mouseChildren = false;\r\n        //如果已经禁用事件重新计算\r\n        if (this.timeoutId) {\r\n            clearTimeout(this.timeoutId);\r\n        }\r\n\r\n        this.timeoutId = setTimeout(function () {\r\n            this.timeoutId = 0;\r\n            display.mouseEnable = display.mouseChildren = true;\r\n        }, delay ? delay : 500);\r\n    }\r\n\r\n\r\n    public dispose(): void {\r\n\r\n    }\r\n}","/**\r\n *Created by renjianfeng\r\n */\r\nexport class GuiManager {\r\n\r\n\r\n    private _fullscreenUI:any;\r\n\r\n    private _lastGui:any;\r\n\r\n    private guiPoll:any={};\r\n\r\n    private static instance: GuiManager;\r\n    public static get ins(): GuiManager {\r\n        if (!this.instance) {\r\n            this.instance = new GuiManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n\r\n    constructor(){\r\n        this._lastGui=null;\r\n        this._fullscreenUI=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI(\"GUI\");\r\n      //  this._fullscreenUI.idealWidth=750;\r\n    }\r\n\r\n    public changeGui(gui,...args){\r\n        var _length=this._fullscreenUI.rootContainer.children.length\r\n        for(var i=0;i<_length;i++){\r\n            this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0])\r\n        }\r\n        this._fullscreenUI.addControl(gui)\r\n        this._lastGui=gui\r\n    }\r\n\r\n\r\n    public appendGui(gui,...args){\r\n        this._fullscreenUI.addControl(gui)\r\n        this._lastGui=gui\r\n    }\r\n\r\n\r\n    public removeGui(gui,...args){\r\n        this._fullscreenUI.removeControl(this._lastGui)\r\n    }\r\n\r\n    public removeAll(gui,...args){\r\n        var _length=this._fullscreenUI.rootContainer.children.length\r\n        for(var i=0;i<_length;i++){\r\n            this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0])\r\n        }\r\n    }\r\n\r\n    public openPanel(gui){\r\n\r\n    }\r\n    public closePanel(gui){\r\n\r\n    }\r\n\r\n\r\n    public get fullscreenUI(){\r\n        return this._fullscreenUI;\r\n    }\r\n\r\n    public get lastGui(){\r\n        return this._lastGui;\r\n    }\r\n}\r\n","\r\n/**\r\n *Created by renjianfeng\r\n */\r\nimport Scene = BABYLON.Scene;\r\n\r\n\r\nexport class SceneManager{\r\n\r\n    public stage;\r\n    private _scene:Scene;\r\n    private _canvas;\r\n    private _engine;\r\n\r\n    private static instance: SceneManager;\r\n\r\n    public static get ins(): SceneManager {\r\n        if (!this.instance) {\r\n            this.instance = new SceneManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n\r\n    this._canvas = document.querySelector(\"#renderCanvas\");\r\n    this._engine = new BABYLON.Engine(this._canvas, true);\r\n        var createScene=function(){\r\n            {\r\n\r\n\r\n                var scene = new BABYLON.Scene(this._engine);\r\n\r\n                //下面的代码是为了设置微信上面的touch事件兼容\r\n\r\n                var n = scene._onPointerUp\r\n                    , o = scene._onPointerDown\r\n                    , r = scene._onPointerMove\r\n                    , a = BABYLON.Tools.GetPointerPrefix();\r\n                    this._canvas.removeEventListener(a + \"move\", r),\r\n                    this._canvas.removeEventListener(a + \"down\", o),\r\n                    window.removeEventListener(a + \"up\", n),\r\n                    scene._onPointerUp = function(e) {\r\n                        void 0 !== e.pointerId && n(e)\r\n                    }\r\n                    ,\r\n                    scene._onPointerDown = function(e) {\r\n                        void 0 !== e.pointerId && o(e)\r\n                    }\r\n                    ,\r\n                    scene._onPointerMove = function(e) {\r\n                        void 0 !== e.pointerId && r(e)\r\n                    }\r\n                    ,\r\n                    this._canvas.addEventListener(a + \"move\", scene._onPointerMove, !1),\r\n                    this._canvas.addEventListener(a + \"down\", scene._onPointerDown, !1),\r\n                    window.addEventListener(a + \"up\", scene._onPointerUp, !1);\r\n\r\n\r\n                //下面的代码是为了设置微信上面的touch事件兼容\r\n                var camera = new BABYLON.FreeCamera(\"baseCamera\", new BABYLON.Vector3(0, 0, 0), scene);\r\n\r\n              //  var sceneCall=new SceneCall(scene)\r\n\r\n             /*   this.stage = BABYLON.MeshBuilder.CreateBox(\"stage\", {}, scene);\r\n\r\n                this.stage.isVisible = false;*/\r\n\r\n                return scene;\r\n            }\r\n        }.bind(this)\r\n\r\n        this._scene = createScene();\r\n\r\n        this._engine.runRenderLoop(function () {\r\n            this._scene.render();\r\n            TWEEN.update();\r\n        }.bind(this));\r\n\r\n        window.addEventListener(\"resize\", function() {\r\n            this._engine.resize();\r\n        }.bind(this));\r\n    }\r\n\r\n   /* public get stage(): any {\r\n        return this._stage;\r\n    }*/\r\n\r\n    public get scene(): Scene {\r\n        return this._scene;\r\n    }\r\n\r\n    public get canvas(): any {\r\n        return this._canvas;\r\n    }\r\n\r\n    public get engine(): any {\r\n        return this._engine;\r\n    }\r\n\r\n    public change(display){\r\n       /* console.log(display)\r\n        var i;\r\n        for(i in display){\r\n            console.log(display[i])\r\n        }*/\r\n\r\n        for(var l of SceneManager.ins.scene.meshes){\r\n            l.dispose()\r\n        }\r\n\r\n        /*var j;\r\n        for(j in SceneManager.ins.stage){\r\n            console.log(SceneManager.ins.stage[j])\r\n            if( SceneManager.ins.stage[j]){\r\n                if(SceneManager.ins.stage[j].getChildMeshes){\r\n                    SceneManager.ins.stage[j].getChildMeshes(false,(child)=>{\r\n                        child.dispose();\r\n                    });\r\n                }\r\n                if( SceneManager.ins.stage[j].dispose){\r\n                    SceneManager.ins.stage[j].dispose()\r\n                }\r\n            }\r\n        }*/\r\n        SceneManager.ins.stage=display;\r\n    }\r\n\r\n  /*  public change(module){\r\n      //  console.log(this._stage._children)\r\n        if(this.stage._children){\r\n            this.stage._children.forEach(function (child) {\r\n                this.stage.removeChild(child)\r\n                child.dispose()\r\n            }.bind(this))\r\n        }\r\n        this.stage.addChild(module)\r\n      //  console.log( this._scene)\r\n    }*/\r\n}","/**\r\n * Created by renjianfeng\r\n * 弹框动画UI控制器\r\n */\r\n\r\nexport class AnimationGui {\r\n    private static instance: AnimationGui;\r\n\r\n    protected scene;\r\n    protected advancedTexture;\r\n\r\n    constructor(scene,advancedTexture){\r\n        this.scene=scene;\r\n        this.advancedTexture=advancedTexture\r\n    }\r\n\r\n    public show = function (gui,open?,opened?) {\r\n        var keys = [];\r\n        keys.push({\r\n            frame: 0,\r\n            value: 0.1\r\n        });\r\n        keys.push({\r\n            frame: 10,\r\n            value: 1\r\n        });\r\n        var animationX = new BABYLON.Animation(\"\", \"scaleX\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationX.setKeys(keys);\r\n        var animationY = new BABYLON.Animation(\"\", \"scaleY\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationY.setKeys(keys);\r\n        gui.animations = [];\r\n        gui.animations.push(animationX,animationY);\r\n        this.advancedTexture.addControl(gui);\r\n        if(open){\r\n            open()\r\n        }\r\n        this.scene.beginAnimation(gui, 0, 10, false,2,()=>{\r\n            if(opened){\r\n                opened()\r\n            }\r\n        });\r\n    };\r\n\r\n    public hide = function(gui,close?,closed?){\r\n        var keys = [];\r\n        keys.push({\r\n            frame: 0,\r\n            value: 1\r\n        });\r\n        keys.push({\r\n            frame: 10,\r\n            value: 0.1\r\n        });\r\n        var animationX = new BABYLON.Animation(\"\", \"scaleX\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationX.setKeys(keys);\r\n        var animationY = new BABYLON.Animation(\"\", \"scaleY\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationY.setKeys(keys);\r\n        gui.animations = [];\r\n        gui.animations.push(animationX,animationY);\r\n        if(close){\r\n            close()\r\n        }\r\n        this.scene.beginAnimation(gui, 0, 10, false,2,()=>{\r\n            this.advancedTexture.removeControl(gui);\r\n            //this.advancedTexture.dispose();\r\n            if(closed){\r\n                closed()\r\n            }\r\n        });\r\n    };\r\n\r\n}\r\n\r\n","export class DisplayPool{\r\n    private static instance: DisplayPool;\r\n\r\n    public static get ins(): DisplayPool {\r\n        if (!this.instance) {\r\n            this.instance = new DisplayPool();\r\n        }\r\n        return this.instance;\r\n    }\r\n    //场景名称\r\n    public displayPool: any = {};\r\n}","/**\r\n *Created by cuiliqiang on 2018/3/13\r\n */\r\nexport enum ModuleName {\r\n    //加载场景\r\n    LOADING_GUI = 'LoadingScene',\r\n    //等待面板\r\n    WAITING_PANEL = 'WaitingPanel',\r\n    //提示信息面板\r\n    MSG_PANEL = 'MsgPanel',\r\n    //游戏规则面板\r\n    RULE_PANEL = 'RulePanel',\r\n    //未中奖面板\r\n    LOSE_PANEL = 'LosePanel',\r\n    //开始场景\r\n    GAME_START_GUI = 'GameStartScene',\r\n    //游戏玩法场景\r\n    GAME_PLAY_SCENE = 'GamePlayScene',\r\n    //游戏玩法场景GUI\r\n    GAME_PLAY_GUI = 'GamePlayGui',\r\n\r\n}\r\n","\r\n/**\r\n * 全局事件传递\r\n * */\r\n\r\nexport class EventCon {\r\n\r\n    private static instance: EventCon;\r\n    public static get ins(): EventCon {\r\n        if (!this.instance) {\r\n            this.instance = new EventCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    //分数显示  从游戏场景到游戏GUI\r\n    public gold;\r\n\r\n    //控制车的方向按键  从游戏GUI到游戏场景\r\n    public key;\r\n\r\n    constructor(){\r\n        this.gold = new BABYLON.Observable();\r\n        this.key = new BABYLON.Observable();\r\n    }\r\n}","import {AssetsManager, SceneManager} from \"../../public/index\";\r\nimport {DisplayPool} from \"../../public/index\";\r\nimport {ModuleName} from \"../../public/index\";\r\nimport {EventCon} from \"../../other/EventCon\";\r\nimport {ExGameScene} from \"./ExGameScene\";\r\nimport {GameScenes} from \"../../public/index\";\r\nimport {particleCon} from \"../../public/index\";\r\nimport {CannonCreateObj} from \"./CannonCreateObj\";\r\nimport {UseMaterial} from \"./UseMaterial\";\r\nimport {WeatherState} from \"../../public/index\";\r\n\r\n\r\nexport class ExGameSceneCon extends GameScenes{\r\n    private _gold;\r\n    private static instance: ExGameSceneCon;\r\n\r\n    public static get ins(): ExGameSceneCon {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameSceneCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n\r\n    protected display;\r\n\r\n    protected scene;\r\n\r\n    private gameDeState;\r\n\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    protected importMeshes=[\r\n        {\r\n            rootUrl:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"car\"].rootUrl,\r\n            sceneFilename:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"car\"].sceneFilename\r\n        },\r\n        {\r\n            rootUrl:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"wheel\"].rootUrl,\r\n            sceneFilename:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"wheel\"].sceneFilename\r\n        },\r\n        {\r\n            rootUrl:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"map\"].rootUrl,\r\n            sceneFilename:AssetsManager.ins.resourceObject[\"models\"][\"gameScene\"][\"map\"].sceneFilename\r\n        }\r\n    ]\r\n\r\n\r\n    public init(){\r\n        DisplayPool.ins.displayPool[ModuleName.GAME_PLAY_SCENE]=this;\r\n    }\r\n\r\n    protected resetGame(){\r\n        this.ImportMeshes(this.importMeshes,(newMeshes)=>{\r\n            ExGameScene.ins.creatScene()\r\n            var scene=SceneManager.ins.scene;\r\n            this.scene=SceneManager.ins.scene;\r\n            //初始分数\r\n            this.score=0;\r\n            var _str=`当前得分:${this.score}分`\r\n            EventCon.ins.gold.notifyObservers(_str);\r\n            this.display=ExGameScene.ins.display;\r\n\r\n            scene.meshes.forEach((mesh)=>{\r\n                this.display.shadowGenerator.getShadowMap().renderList.push(mesh);\r\n                mesh.receiveShadows = true;\r\n            })\r\n\r\n\r\n\r\n\r\n           /* gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 4\"))\r\n            gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 3\"))*/\r\n       /*     gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 18\"))\r\n            gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 1\"))\r\n            gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 5\"))\r\n            gl.addExcludedMesh(this.scene.getMeshByName(\"Jeep GC-P 2\"))*/\r\n\r\n\r\n\r\n            scene.getMeshByName(\"car\").scaling=new BABYLON.Vector3(0.001,0.001,0.001);\r\n            scene.getMeshByName(\"car\").rotation=new BABYLON.Vector3(-Math.PI*1,Math.PI*0.5,Math.PI*0.5)\r\n            scene.getMeshByName(\"car\").position=new BABYLON.Vector3(1.7,0,0.6)\r\n\r\n           /* this.scene.getMeshByName(\"car\")._children.forEach((mesh)=>{\r\n                if(mesh.material.subMaterials){\r\n                    mesh.material.subMaterials.forEach((material)=>{\r\n                        material.backFaceCulling=false;\r\n                    })\r\n                }else{\r\n                    mesh.material.backFaceCulling=false;\r\n                }\r\n            })*/\r\n\r\n\r\n\r\n\r\n            scene.getMeshByName(\"w1\").rotation=new BABYLON.Vector3(0,0,-Math.PI*0.5)\r\n            scene.getMeshByName(\"w1\").scaling=new BABYLON.Vector3(0.001,0.001,0.001);\r\n            scene.getMeshByName(\"w1\").position=new BABYLON.Vector3(1.02,-1.2,2.38)\r\n            scene.getMeshByName(\"w1\").isVisible=false;\r\n\r\n            var ground = scene.getMeshByName(\"default\");\r\n            console.log(\"新地图\")\r\n            console.log(ground.name)\r\n\r\n            ground.scaling.copyFromFloats(1, 1, 1);\r\n\r\n            ground[\"bakeCurrentTransformIntoVertices\"]();\r\n\r\n            //ground.getVerticesData(BABYLON.VertexBuffer.PositionKind);\r\n\r\n            ground.material=this.display.terrainMaterial;\r\n\r\n\r\n            //设置材质\r\n\r\n            var useMaterial=new UseMaterial(scene)\r\n            useMaterial.setCarMaterial()\r\n\r\n            //创建物理世界\r\n            let cannonCreateObj=new CannonCreateObj(SceneManager.ins.scene,this.display.shadowGenerator)\r\n            cannonCreateObj.HeightMap(ground);\r\n            cannonCreateObj.carCtrl();\r\n\r\n\r\n            setInterval(()=>{\r\n                this.display.light3.position=new BABYLON.Vector3(\r\n                    this.scene.getMeshByName(\"carBox\").position.x,\r\n                    this.scene.getMeshByName(\"carBox\").position.y+1,\r\n                    this.scene.getMeshByName(\"carBox\").position.z-0\r\n                );\r\n            },500)\r\n\r\n\r\n            //湖水\r\n            this.waterRenderList()\r\n\r\n\r\n            if(localStorage.weatherState==WeatherState.RAIN_DAY){\r\n                //闪电\r\n                this.setLightning()\r\n\r\n                //下雨\r\n                this.setRain()\r\n\r\n                //车灯\r\n                this.setCarLight()\r\n\r\n\r\n                this.scene.fogMode = BABYLON.Scene.FOGMODE_EXP;\r\n                this.scene.fogDensity = 0.005;\r\n                this.scene.fogColor = new BABYLON.Color3(0.3,0.3,0.3);\r\n\r\n                var gl = new BABYLON.GlowLayer(\"glow\", scene);\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 25\"))\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 20\"))\r\n\r\n                this.display.postProcess.depth=0.08\r\n                this.display.postProcess1.depth=0.08\r\n\r\n                this.display.light.intensity=0.1\r\n                this.display.light2.intensity=0.1\r\n                this.display.light3.intensity=0.2\r\n                this.display.lensFlareSystem3.dispose()\r\n            }\r\n\r\n\r\n            if(localStorage.weatherState==WeatherState.SUNNY_DAY){\r\n\r\n                this.scene.fogMode = BABYLON.Scene.FOGMODE_EXP;\r\n                this.scene.fogDensity = 0.001;\r\n                this.scene.fogColor = new BABYLON.Color3(1,1,1);\r\n\r\n                this.scene.getMeshByName(\"Plane001\").material.alpha=0;\r\n                var gl = new BABYLON.GlowLayer(\"glow\", scene);\r\n               /* gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 25\"))*/\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 20\"))\r\n\r\n                this.scene.getMeshByName(\"Jeep GC-P 25\").material.alpha=0.3;\r\n\r\n                this.display.postProcess.depth=0\r\n                this.display.postProcess1.depth=0\r\n\r\n                this.display.light.intensity=0.2\r\n                this.display.light2.intensity=0.2\r\n                this.display.light3.intensity=1\r\n            }\r\n\r\n\r\n            if(localStorage.weatherState==WeatherState.NIGHT_DAY){\r\n\r\n                this.scene.fogMode = BABYLON.Scene.FOGMODE_EXP;\r\n                this.scene.fogDensity = 0.009;\r\n                this.scene.fogColor = new BABYLON.Color3(0,0,0);\r\n\r\n                //车灯\r\n                this.setCarLight()\r\n\r\n                this.scene.getMeshByName(\"Plane001\").material.alpha=0.3;\r\n                var gl = new BABYLON.GlowLayer(\"glow\", scene);\r\n                 gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 25\"))\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 20\"))\r\n\r\n                this.scene.getMeshByName(\"Jeep GC-P 25\").material.alpha=1;\r\n\r\n                this.display.postProcess.depth=0\r\n                this.display.postProcess1.depth=0\r\n\r\n                this.display.light.intensity=0.1\r\n                this.display.light2.intensity=0.1\r\n                this.display.light3.intensity=0.3\r\n                this.display.lensFlareSystem3.dispose()\r\n            }\r\n\r\n            if(localStorage.weatherState==WeatherState.AFTERNOON_DAY){\r\n\r\n                this.scene.fogMode = BABYLON.Scene.FOGMODE_EXP;\r\n                this.scene.fogDensity = 0.001;\r\n                this.scene.fogColor = new BABYLON.Color3(255/255,90/255,0/255);\r\n\r\n                //车灯\r\n                this.setCarLight()\r\n\r\n                this.scene.getMeshByName(\"Plane001\").material.alpha=0.3;\r\n                var gl = new BABYLON.GlowLayer(\"glow\", scene);\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 25\"))\r\n                gl.addIncludedOnlyMesh(this.scene.getMeshByName(\"Jeep GC-P 20\"))\r\n\r\n                this.scene.getMeshByName(\"Jeep GC-P 25\").material.alpha=1;\r\n\r\n                this.display.postProcess.depth=0\r\n                this.display.postProcess1.depth=0\r\n\r\n                this.display.light.intensity=0.1\r\n                this.display.light2.intensity=0.1\r\n                this.display.light3.intensity=0.3\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n            this.display.steering.parent=this.scene.getMeshByName(\"carBox\")\r\n            this.display.steering.position.z=0.7\r\n            this.display.steering.position.x=0.8\r\n            this.display.steering.position.y=-0.76\r\n\r\n            this.scene.getMeshByName(\"Jeep GC-P 15\").position=new BABYLON.Vector3(0,0,0)\r\n            this.scene.getMeshByName(\"Jeep GC-P 15\").parent=this.display.steering\r\n\r\n            //设置汽车和相机绑定\r\n            this.setCameraParent()\r\n\r\n\r\n            EventCon.ins.key.add((e)=>{\r\n                this.gameDeState=e\r\n                console.log(e)\r\n                this.viewCtrl(e)\r\n            });\r\n\r\n        })\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    /**\r\n     * 湖水\r\n     * */\r\n\r\n    private waterRenderList():void{\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"default\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"skyBox\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"car\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"w1_1\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"w2_1\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"w3_1\"));\r\n        this.display.water.addToRenderList(this.scene.getMeshByName(\"w4_1\"));\r\n        console.log(this.scene.getMeshByName(\"car\"))\r\n        this.scene.getMeshByName(\"car\")._children.forEach((mesh)=>{\r\n            this.display.water.addToRenderList(mesh);\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 闪电\r\n     * */\r\n\r\n    private setLightning():void{\r\n        setInterval(()=>{\r\n            this.display.light3.intensity = 2;\r\n            setTimeout(()=>{\r\n                this.display.light3.intensity = 0.3;\r\n            },100)\r\n\r\n            setTimeout(()=>{\r\n                this.display.light3.intensity = 1;\r\n            },500)\r\n\r\n            setTimeout(()=>{\r\n                this.display.light3.intensity = 0.3;\r\n            },600)\r\n        },6000)\r\n    }\r\n\r\n\r\n    /**\r\n     * 下雨\r\n     * */\r\n\r\n    private setRain():void{\r\n        //下雨\r\n        var tailFlower=new particleCon(new BABYLON.Vector3(0,50,0),this.scene, this.display.particleRain);\r\n        // tailFlower.Parent(scene.getMeshByName(\"car\"))\r\n        tailFlower.start()\r\n        SceneManager.ins.engine.runRenderLoop(()=>{\r\n            tailFlower.Position(new BABYLON.Vector3(\r\n                this.scene.getMeshByName(\"car\").absolutePosition.x+50,\r\n                this.scene.getMeshByName(\"car\").absolutePosition.y+50,\r\n                this.scene.getMeshByName(\"car\").absolutePosition.z) )\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 设置车灯\r\n     * */\r\n    private setCarLight():void{\r\n        this.display.light4.intensity=10;\r\n        SceneManager.ins.engine.runRenderLoop(()=>{\r\n            this.display.lightLook.parent=this.scene.getMeshByName(\"carBox\")\r\n            this.display.lightLook.position.x=12\r\n            this.display.light4.position=new BABYLON.Vector3(\r\n                this.scene.getMeshByName(\"carBox\").position.x,\r\n                this.scene.getMeshByName(\"carBox\").position.y+0.3,\r\n                this.scene.getMeshByName(\"carBox\").position.z);\r\n            this.display.light4.setDirectionToTarget(\r\n                new BABYLON.Vector3(\r\n                    this.display.lightLook.absolutePosition.x,\r\n                    this.display.lightLook.absolutePosition.y,\r\n                    this.display.lightLook.absolutePosition.z)\r\n            );\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 页面UI控制\r\n     * */\r\n    private viewCtrl(e):void{\r\n        var _state=e[\"view\"];\r\n        if(_state==true){\r\n\r\n            this.display.camera2.detachControl(SceneManager.ins.canvas,false);\r\n            this.scene.activeCamera=this.display.camera\r\n            this.display.camera.alpha=-Math.PI*1;\r\n            this.display.camera.beta=1.260483446598473\r\n            this.display.camera.attachControl(SceneManager.ins.canvas,true);\r\n\r\n        }else{\r\n            this.display.camera.detachControl(SceneManager.ins.canvas,false);\r\n            this.scene.activeCamera=this.display.camera2\r\n            this.display.camera2.rotation=new BABYLON.Vector3(0.1,Math.PI*0.5,0)\r\n            this.display.camera2.attachControl(SceneManager.ins.canvas,true);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 设置相机和汽车绑定\r\n     * */\r\n\r\n    private setCameraParent(){\r\n        this.display.camera2Box.parent=this.scene.getMeshByName(\"carBox\");\r\n        this.display.camera.setTarget(this.scene.getMeshByName(\"carBox\"));\r\n        this.display.camera.target=this.scene.getMeshByName(\"carBox\");\r\n    }\r\n\r\n\r\n    protected removeEvent(){\r\n       // SceneManager.ins.scene.onBeforeRenderObservable.remove(this.beforeEvent)\r\n    }\r\n\r\n    public get gold(){\r\n        return this._gold;\r\n    }\r\n\r\n    public ImportMeshes(importMeshes,onSuccess){\r\n        var _length=importMeshes.length;\r\n        var _meshes=[]\r\n        var _skeletons=[]\r\n        var _loadCount=0;\r\n        importMeshes.forEach((list)=>{\r\n            BABYLON.SceneLoader.ImportMesh(\r\n                \"\",\r\n                list.rootUrl,\r\n                list.sceneFilename,\r\n                SceneManager.ins.scene,\r\n                (_mesh,_skeleton)=> {\r\n                    try {\r\n                        _meshes.push(_mesh)\r\n                        _skeletons.push(_skeleton)\r\n                        _loadCount++\r\n                        if(_loadCount==_length){\r\n                            onSuccess(_meshes,_skeletons)\r\n                        }\r\n                    } catch (e) {\r\n                        console.error(e)\r\n                    }\r\n                }\r\n            );\r\n        })\r\n    }\r\n\r\n}\r\n","\r\n/**\r\n *Created by renjianfeng\r\n */\r\nimport {ModuleName} from \"../enum/ModuleName\";\r\nimport {DisplayPool} from \"../others/DisplayPool\";\r\nexport class GlobalManager {\r\n\r\n    //管理器单例\r\n    private static instance: GlobalManager;\r\n\r\n    public static get ins(): GlobalManager {\r\n        if (!this.instance) {\r\n            this.instance = new GlobalManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    /**\r\n     * 打开一个模块\r\n     * @param {ModuleName} moduleName\r\n     */\r\n    public openModule(moduleName:string, ...args): void {\r\n        DisplayPool.ins.displayPool[moduleName].show(...args)\r\n    }\r\n}","\r\nimport {AssetsManager} from \"../../public/index\";\r\nimport {WeatherState} from \"../../public/index\";\r\n\r\n\r\n\r\nexport class ExStartGui{\r\n\r\n    private sceneCon:any;\r\n    private parent:any;\r\n\r\n    private static instance: ExStartGui;\r\n\r\n    public static get ins(): ExStartGui {\r\n        if (!this.instance) {\r\n            this.instance = new ExStartGui();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        this.creatUI()\r\n    }\r\n\r\n    public creatUI(){\r\n        this.parent=new BABYLON.GUI.Rectangle()\r\n\r\n\r\n\r\n      /*  var tween = new TWEEN.Tween(startBtn);\r\n        tween.to({ scaleX: 0.8 ,scaleY: 0.8}, 500);\r\n        tween.start();\r\n        tween.repeat(Infinity)\r\n        tween.yoyo(true)*/\r\n\r\n        var viewHtml=`\r\n            <style>\r\n            .button-play{\r\n                position: fixed;\r\n                top: 50%;\r\n                left:50%;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 42px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n                width: 200px;\r\n                height: 80px;\r\n                margin-left: -100px;\r\n                margin-top: 200px;\r\n            }\r\n            .button-play:active{\r\n              transform: scale(0.8);\r\n            }\r\n            .weather-config{\r\n                position: fixed;\r\n                top: 50%;\r\n                left:50%;\r\n                display: block;\r\n                background: #ffffff;\r\n                color: #82bab3;\r\n                border: 0px solid ;\r\n                font-size: 24px;\r\n                border-radius: 5px;\r\n                transform: scale(1);\r\n                width: 1000px;\r\n                height: 260px;\r\n                margin-left: -500px;\r\n                margin-top: -200px;\r\n                text-align: center;\r\n               \r\n            }\r\n            .weather-config ul li{\r\n                display: inline-block;\r\n                height: 200px;\r\n                width: 200px;\r\n                margin: 0px 5px;\r\n                border: 1px solid #cccccc;\r\n                cursor: pointer;\r\n                background-size: 100% 100%;\r\n                text-shadow: 0px 0px 5px #444;\r\n            }\r\n            \r\n            .weather-config ul li:hover{\r\n                border: 1px solid royalblue;\r\n            }\r\n            .we-active{\r\n                border: 3px solid #000 !important;\r\n                opacity: 0.8;\r\n            }\r\n            .yw-text{\r\n              font-size: 14px;\r\n            }\r\n            .box-tip{\r\n            margin-top: 60px;\r\n            }\r\n            \r\n            </style>\r\n            \r\n            <div class=\"weather-config\">\r\n                <ul>\r\n                  <li id=\"RAIN_DAY\" class=\"we-active\">大雨磅礴<br><span class=\"yw-text\">The heavy rain made</span></li>\r\n                  <li id=\"SUNNY_DAY\">晴空万里<br><span class=\"yw-text\">a bright sky</span></li>\r\n                  <li id=\"AFTERNOON_DAY\">晚霞时分<br><span class=\"yw-text\">An evening at the</span></li>\r\n                  <li id=\"NIGHT_DAY\">漫漫长夜<br><span class=\"yw-text\">All night long</span></li>\r\n                </ul>\r\n                <div class=\"box-tip\">\r\n                 Direction(方向):【W,S,A,D】<br>\r\n                Brake(刹车):【Space】<br>\r\n              \r\n                </div>\r\n            </div>\r\n            \r\n            <button class=\"button-play\" id=\"button_play\">Play</button>\r\n        `;\r\n\r\n        var viewNode = document.createElement(\"div\");\r\n        viewNode.id = \"startNode\";\r\n        viewNode.innerHTML = viewHtml;\r\n\r\n        //交給控制器做交互\r\n        this.parent.sceneChild={\r\n            viewHtml:viewHtml,\r\n            viewNode:viewNode,\r\n        }\r\n\r\n       // this.sceneCon=new StartGuiCon(this.parent);\r\n    }\r\n\r\n    public get guiObject(){\r\n        return this.parent;\r\n    }\r\n}","import {ExStartGui} from \"./ExStartGui\";\r\nimport {AnimationCon} from \"../../public/index\";\r\nimport {StartGui} from \"../../public/index\";\r\nimport {WeatherState} from \"../../public/index\";\r\nimport {SceneManager} from \"../../public/index\";\r\nimport {ExGameSceneCon} from \"../../Scene/GameScene/ExGameSceneCon\";\r\nimport {EventCon} from \"../../other/EventCon\";\r\nimport {ModuleName} from \"../../public/enum/ModuleName\";\r\nimport {GlobalManager} from \"../../public/manager/GlobalManager\";\r\nimport {AssetsManager} from \"../../public\";\r\nexport class ExStartGuiCon extends StartGui{\r\n\r\n    /**\r\n     * 游戏业务基础数据\r\n     */\r\n\r\n\r\n    private static instance: ExStartGuiCon;\r\n\r\n    public static get ins(): ExStartGuiCon {\r\n        if (!this.instance) {\r\n            this.instance = new ExStartGuiCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        super()\r\n        this.scene=ExStartGui.ins.guiObject.sceneChild;\r\n        this.parent=ExStartGui.ins.guiObject;\r\n        this.gameSceneObject=ExGameSceneCon.ins;\r\n    }\r\n\r\n    public addEvent(){\r\n\r\n        localStorage.weatherState=WeatherState.RAIN_DAY;\r\n\r\n        document.body.appendChild(this.scene.viewNode)\r\n        this.doEvents[\"viewPlay\"]=document.getElementById(\"button_play\").addEventListener(\"click\",this.onClick_startBtn.bind(this))\r\n\r\n\r\n        this.doEvents[\"SUNNY_DAY\"]=document.getElementById(\"SUNNY_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.SUNNY_DAY;\r\n            console.log(\"当前dom\")\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n\r\n        this.doEvents[\"RAIN_DAY\"]=document.getElementById(\"RAIN_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.RAIN_DAY;\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n\r\n        this.doEvents[\"AFTERNOON_DAY\"]=document.getElementById(\"AFTERNOON_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.AFTERNOON_DAY;\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n\r\n        this.doEvents[\"NIGHT_DAY\"]=document.getElementById(\"NIGHT_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.NIGHT_DAY;\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n\r\n\r\n        document.getElementById(\"RAIN_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"rain\"].src+\")\"\r\n        document.getElementById(\"SUNNY_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"sun\"].src+\")\"\r\n        document.getElementById(\"AFTERNOON_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"after\"].src+\")\"\r\n        document.getElementById(\"NIGHT_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"night\"].src+\")\"\r\n\r\n    }\r\n\r\n\r\n    protected onClick_startBtn() {\r\n        super.onClick_startBtn()\r\n        this.removeEvent()\r\n    }\r\n\r\n\r\n    public removeEvent(){\r\n        super.removeEvent()\r\n        if(document.getElementById(\"startNode\")){\r\n            try {\r\n                document.body.removeChild(this.scene.viewNode)\r\n            }catch (e) {\r\n                console.log(e)\r\n            }\r\n        }\r\n    }\r\n}","\r\n\r\nimport {AssetsManager} from \"../../public/index\";\r\n\r\nexport class ExGameSceneGui{\r\n\r\n    private sceneCon:any;\r\n    private parent:any;\r\n\r\n    private static instance: ExGameSceneGui;\r\n\r\n    public static get ins(): ExGameSceneGui {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameSceneGui();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n            this.creatUI()\r\n    }\r\n\r\n    public creatUI(){\r\n\r\n        this.parent=new BABYLON.GUI.Rectangle()\r\n\r\n        var viewHtml=`\r\n            <style>\r\n            .button-view{\r\n                position: fixed;\r\n                top: 20px;\r\n                left:20px;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 18px;\r\n                padding: 8px 20px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n            }\r\n            .button-view:active{\r\n              transform: scale(0.8);\r\n            }\r\n            .button-reset{\r\n                position: fixed;\r\n                top: 20px;\r\n                right:20px;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 18px;\r\n                padding: 8px 20px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n            }\r\n            .button-reset:active{\r\n              transform: scale(0.8);\r\n            }\r\n            </style>\r\n            \r\n            <button class=\"button-view\" id=\"button_view\">View</button>\r\n            <button class=\"button-reset\" id=\"button_reset\">Reset</button>\r\n        `;\r\n\r\n        var viewNode = document.createElement(\"div\");\r\n        viewNode.id = \"viewNode\";\r\n        viewNode.innerHTML = viewHtml;\r\n\r\n        //交給控制器做交互\r\n        this.parent.sceneChild={\r\n            viewHtml:viewHtml,\r\n            viewNode:viewNode,\r\n        }\r\n\r\n       // this.sceneCon=new GameSceneGuiCon(this.parent);\r\n    }\r\n\r\n    public get guiObject(){\r\n        return this.parent;\r\n    }\r\n\r\n  /*  public set guiObjectDo(obj){\r\n        this.parent=obj;\r\n    }*/\r\n}","import {EventCon} from \"../../other/EventCon\";\r\nimport {ExGameSceneGui} from \"./ExGameSceneGui\";\r\nimport {GameSceneGui} from \"../../public/index\";\r\n\r\nexport class ExGameSceneGuiCon extends GameSceneGui{\r\n\r\n\r\n    private static instance: ExGameSceneGuiCon;\r\n\r\n    public static get ins(): ExGameSceneGuiCon {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameSceneGuiCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        super()\r\n        this.scene=ExGameSceneGui.ins.guiObject.sceneChild\r\n        this.parent=ExGameSceneGui.ins.guiObject;\r\n    }\r\n\r\n\r\n    public addEvent(){\r\n        var _btnState=[]\r\n        _btnState[\"view\"]=true;\r\n        console.log(\"按键事件\")\r\n        console.log(this.scene.btnLeft)\r\n\r\n       // var viewNode=\r\n        document.body.appendChild(this.scene.viewNode)\r\n\r\n        this.doEvents[\"viewButton\"]=document.getElementById(\"button_view\").addEventListener(\"click\",()=>{\r\n            _btnState[\"view\"]=!_btnState[\"view\"];\r\n            EventCon.ins.key.notifyObservers(_btnState);\r\n        })\r\n\r\n\r\n        this.doEvents[\"viewReset\"]=document.getElementById(\"button_reset\").addEventListener(\"click\",()=>{\r\n            location.reload();\r\n        })\r\n       // document.getElementById(\"viewNode\").innerHTML=this.scene.viewHtml\r\n    }\r\n\r\n\r\n\r\n    public removeEvent(){\r\n        if(document.getElementById(\"viewNode\")){\r\n            try {\r\n                document.body.removeChild(this.scene.viewNode)\r\n            }catch (e) {\r\n                console.log(e)\r\n            }\r\n        }\r\n        //EventCon.ins.gold.remove( this.doEvents[\"gold\"]);\r\n    }\r\n}","export class UseMaterial {\r\n\r\n    private scene\r\n    constructor(scene){\r\n        this.scene=scene;\r\n    }\r\n\r\n    public setCarMaterial(){\r\n\r\n\r\n\r\n\r\n\r\n\r\n        var material=new BABYLON.StandardMaterial(\"ss\",this.scene)\r\n\r\n\r\n\r\n        var probe = new BABYLON.ReflectionProbe(\"main\", 64, this.scene);\r\n        probe.renderList.push( this.scene.getMeshByName(\"default\"));\r\n        probe.renderList.push(this.scene.getMeshByName(\"skyBox\"));\r\n        this.scene.getMaterialByName(\"Material#2\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#2\")[\"reflectionTexture\"].level=0.4\r\n        this.scene.getMeshByName(\"Jeep GC-P 5\").material[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Материал #2\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        // scene.getMaterialByName(\"Материал #2\").reflectionTexture.level=0.1\r\n        this.scene.getMaterialByName(\"Material#12\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        // scene.getMaterialByName(\"Material#12\").reflectionTexture.level=0.1\r\n        this.scene.getMaterialByName(\"Материал #13\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#3\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#1\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n\r\n        this.scene.getMeshByName(\"w1\").material.subMaterials[0][\"reflectionTexture\"] = probe.cubeTexture;\r\n\r\n       /* this.scene.getMaterialByName(\"Material#9\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#13\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#10\")[\"reflectionTexture\"] = probe.cubeTexture;\r\n        this.scene.getMaterialByName(\"Material#20\")[\"reflectionTexture\"] = probe.cubeTexture;*/\r\n\r\n        // scene.getMaterialByName(\"Материал #13\").reflectionTexture.level=0.1\r\n        probe.attachToMesh(this.scene.getMeshByName(\"car\"));\r\n\r\n\r\n        var bxg = new BABYLON.PBRMaterial(\"bxg\", this.scene);\r\n        bxg.albedoColor=new BABYLON.Color3(1,1,1)\r\n        bxg.metallic=1;\r\n        bxg.roughness=0;\r\n        bxg.reflectionTexture=probe.cubeTexture;\r\n\r\n        this.scene.getMeshByName(\"Jeep GC-P 11\").material=bxg\r\n\r\n\r\n\r\n        console.log(\"灯\")\r\n\r\n\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.emissiveColor=new BABYLON.Color3(1,1,1)\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.emissiveTexture=this.scene.getMeshByName(\"Jeep GC-P 25\").material.diffuseTexture;\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.disableLighting=true;\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.diffuseColor = new BABYLON.Color3(1, 1, 1);\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.specularColor = new BABYLON.Color3(1, 1, 1);\r\n        this.scene.getMeshByName(\"Jeep GC-P 25\").material.alpha=1;\r\n\r\n\r\n\r\n        this.scene.getMeshByName(\"Plane001\").material.opacityTexture=this.scene.getMaterialByName(\"carlight\").emissiveTexture;\r\n        this.scene.getMeshByName(\"Plane001\").material.alpha=0.2;\r\n        this.scene.getMeshByName(\"Plane001\").material.hasAlpha=false;\r\n        this.scene.getMeshByName(\"Plane001\").material.backFaceCulling=false;\r\n\r\n\r\n        this.scene.getMeshByName(\"Jeep GC-P 20\").material.emissiveTexture=this.scene.getMeshByName(\"Jeep GC-P 20\").material.diffuseTexture;\r\n        this.scene.getMeshByName(\"Jeep GC-P 20\").material.emissiveTexture.level=0.1;\r\n        this.scene.getMeshByName(\"Jeep GC-P 20\").material.emissiveColor=new BABYLON.Color3(1,0,0);\r\n\r\n        console.log(\"灯光\")\r\n        console.log(this.scene.getMaterialByName(\"carlight\"))\r\n\r\n       // this.scene.getMeshByName(\"Jeep GC-P 15\").material[\"reflectionTexture\"] = probe.cubeTexture;\r\n\r\n        console.log(this.scene.getMeshByName(\"Jeep GC-P 25\").material)\r\n\r\n    }\r\n}","import {SceneManager} from \"../../public\";\r\n\r\nexport class CannonCreateObj {\r\n    public heightBody;\r\n    public chassisShape;\r\n\r\n    private _gold;\r\n    private vehicle;\r\n    private world;\r\n    private text={\r\n        forceOn:0,\r\n        brakeOn:0,\r\n    };\r\n    private vehicleBox;\r\n    private ground;\r\n    private camera\r\n    private scene\r\n    private gui;\r\n    private shadowGenerator;\r\n    private vehicleSetup;\r\n    private music1;\r\n    private babylonWheelBodies = [];\r\n    private sphere = [];\r\n    private wheelBodies = [];\r\n    private babylonCarBox;\r\n    private chassisBody;\r\n    private cannonCar;\r\n    private zxState=0;\r\n\r\n    private boxBody;\r\n    private babylonBox;\r\n\r\n    private camera2Box;\r\n\r\n    //制动力\r\n    private  brakeForce = 100;\r\n\r\n    //最大转向\r\n    private  maxSteerVal = 0.5;\r\n\r\n    //最大动力\r\n    private  maxForce = 1000;\r\n\r\n    //重力\r\n    private  gravityY = -19;\r\n\r\n\r\n    constructor(scene,shadowGenerator){\r\n        this.scene=scene;\r\n        this.shadowGenerator=shadowGenerator;\r\n    }\r\n\r\n\r\n    private  options = {\r\n        radius: 0.5,\r\n        directionLocal: new CANNON.Vec3(0, 0, -1),\r\n        suspensionStiffness: 30,\r\n        suspensionRestLength: 0.3,\r\n        frictionSlip: 5,\r\n        dampingRelaxation: 2.3,\r\n        dampingCompression: 4.4,\r\n        maxSuspensionForce: 10000000,\r\n        rollInfluence:  0.01,\r\n        axleLocal: new CANNON.Vec3(0, 1, 0),\r\n        chassisConnectionPointLocal: new CANNON.Vec3(1, 1, 0),\r\n        maxSuspensionTravel: 0.3,\r\n        customSlidingRotationalSpeed: -300,\r\n        useCustomSlidingRotationalSpeed: true\r\n    };\r\n\r\n    //重力\r\n    private  gravity = new BABYLON.Vector3(0, -16, 0);\r\n\r\n    public HeightMap(object, pointDepth?:any){\r\n        var pos = object.getVerticesData(BABYLON.VertexBuffer.PositionKind);\r\n        var matrix = [];\r\n        //For now pointDepth will not be used and will be automatically calculated.\r\n        //Future reference - try and find the best place to add a reference to the pointDepth variable.\r\n        var arraySize = pointDepth || ~~(Math.sqrt(pos.length / 3) - 1);\r\n        var dim = Math.min(object.getBoundingInfo().boundingBox.extendSize.x, object.getBoundingInfo().boundingBox.extendSize.z);\r\n        var elementSize = dim * 2 / arraySize;\r\n        var minY = object.getBoundingInfo().boundingBox.extendSize.y;\r\n\r\n        for (var i = 0; i < pos.length; i = i + 3) {\r\n            var x = Math.round((pos[i + 0]) / elementSize + arraySize / 2);\r\n            var z = Math.round(((pos[i + 2]) / elementSize - arraySize / 2) * -1);\r\n            var y = pos[i + 1] + minY;\r\n            if (!matrix[x]) {\r\n                matrix[x] = [];\r\n            }\r\n            if (!matrix[x][z]) {\r\n                matrix[x][z] = y;\r\n\r\n            }\r\n            matrix[x][z] = Math.max(y, matrix[x][z]);\r\n\r\n        }\r\n\r\n\r\n        for (var x = 0; x <= arraySize; ++x) {\r\n            if (!matrix[x]) {\r\n                var loc = 1;\r\n                while (!matrix[(x + loc) % arraySize]) {\r\n                    loc++;\r\n                }\r\n                matrix[x] = matrix[(x + loc) % arraySize].slice();\r\n\r\n            }\r\n            for (var z = 0; z <= arraySize; ++z) {\r\n                if (!matrix[x][z]) {\r\n                    var loc = 1;\r\n                    var newValue;\r\n                    while (newValue === undefined) {\r\n                        newValue = matrix[x][(z + loc++) % arraySize];\r\n                    }\r\n                    matrix[x][z] = newValue;\r\n\r\n                }\r\n            }\r\n        }\r\n        //console.log(elementSize);\r\n        var shape = new CANNON.Heightfield(matrix, {\r\n            elementSize: elementSize\r\n        });\r\n\r\n\r\n        console.log(object.getBoundingInfo().boundingBox)\r\n\r\n\r\n        this.heightBody = new CANNON.Body({mass: 0, shape: shape}); // Step 2\r\n        this.heightBody.position.y = -object.getBoundingInfo().boundingBox.extendSize.y;\r\n        this.heightBody.position.x = -object.getBoundingInfo().boundingBox.extendSize.x;\r\n        this.heightBody.position.z = object.getBoundingInfo().boundingBox.extendSize.z;\r\n        this.heightBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);\r\n\r\n        this.world = this.createPhysics(this.heightBody);\r\n\r\n    }\r\n\r\n\r\n    //创建物理世界\r\n    public createPhysics(hBody){\r\n        this.world = new CANNON.World();\r\n        this.world.gravity.set(this.gravity.x, this.gravity.y, this.gravity.z);\r\n        this.world.broadphase = new CANNON.NaiveBroadphase();\r\n        this.world.defaultContactMaterial.friction = 0.001;\r\n\r\n        var groundMaterial = new CANNON.Material(\"groundMaterial\");\r\n        var wheelMaterial = new CANNON.Material(\"wheelMaterial\");\r\n        var wheelGroundContactMaterial = window[\"wheelGroundContactMaterial\"] = new CANNON.ContactMaterial(wheelMaterial, groundMaterial, {\r\n            friction: 0,\r\n            restitution: 0,\r\n            contactEquationStiffness: 1000\r\n        });\r\n\r\n        // We must add the contact materials to the world\r\n        this.world.addContactMaterial(wheelGroundContactMaterial);\r\n\r\n        //console.log(\"tets\");\r\n        this.world.add(hBody);\r\n        this.cannonCar = this.createCannonVehicle();\r\n       // alert()\r\n        return this.world;\r\n    }\r\n\r\n    //创建车辆\r\n    public createCannonVehicle(){\r\n        var sizeXYZ = new CANNON.Vec3(4, 1, 0.5);\r\n        this.chassisShape = new CANNON.Box(sizeXYZ);\r\n        this.chassisBody = new CANNON.Body({ mass: 500 });\r\n        this.chassisBody.addShape(this.chassisShape);\r\n        this.chassisBody.position.set(0, 50, 140);\r\n        this.chassisBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);\r\n        this.chassisBody.angularVelocity.set(0, 0, 0.2);\r\n        this.babylonCarBox = this.createBabylonChassisBody(this.chassisBody);\r\n        this.vehicle = new CANNON.RaycastVehicle({\r\n            chassisBody: this.chassisBody,\r\n        });\r\n        this.options.chassisConnectionPointLocal.set(2.5, 1.2, -0.3);\r\n        this.vehicle.addWheel(this.options);\r\n        this.options.chassisConnectionPointLocal.set(2.5, -1.2, -0.3);\r\n        this.vehicle.addWheel(this.options);\r\n        this.options.chassisConnectionPointLocal.set(-2.5, 1.2, -0.3);\r\n        this.vehicle.addWheel(this.options);\r\n        this.options.chassisConnectionPointLocal.set(-2.5, -1.2, -0.3);\r\n        this.vehicle.addWheel(this.options);\r\n        this.vehicle.addToWorld(this.world);\r\n        var wheelBodies = [];\r\n        for(var i=0; i<this.vehicle.wheelInfos.length; i++){\r\n            var wheel = this.vehicle.wheelInfos[i];\r\n            //console.log(wheel);\r\n            var cylinderShape = new CANNON.Cylinder(wheel.radius, wheel.radius, wheel.radius / 2, 20);\r\n            var wheelBody = new CANNON.Body({\r\n                mass: 300\r\n            });\r\n            wheelBody.type = CANNON.Body.KINEMATIC;\r\n\r\n            wheelBody.collisionFilterGroup = 0; // turn off collisions\r\n            var q = new CANNON.Quaternion();\r\n            q.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), Math.PI / 2);\r\n            wheelBody.addShape(cylinderShape, new CANNON.Vec3(), q);\r\n            wheelBodies.push(wheelBody);\r\n            this.createBabylonWheelBodies(wheelBody);\r\n            //  demo.addVisual(wheelBody);\r\n            this.world.add(wheelBody);\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        var w1=this.scene.getMeshByName(\"w1\").clone();w1.isVisible=true;\r\n        w1.name=\"w1_1\";\r\n        w1.rotation.z=-Math.PI*0.5\r\n        this.shadowGenerator.getShadowMap().renderList.push(w1);\r\n\r\n        w1.material.subMaterials.forEach((material)=>{\r\n            material.backFaceCulling=false;\r\n        })\r\n        // w1.flipFaces()\r\n        var w2=this.scene.getMeshByName(\"w1\").clone();w2.isVisible=true;\r\n        w2.rotation.z=-Math.PI*0.5\r\n        w2.name=\"w2_1\";\r\n\r\n        this.shadowGenerator.getShadowMap().renderList.push(w2);\r\n        var w3=this.scene.getMeshByName(\"w1\").clone();w3.isVisible=true;\r\n        w3.rotation.z=-Math.PI*0.5\r\n        w3.name=\"w3_1\";\r\n        this.shadowGenerator.getShadowMap().renderList.push(w3);\r\n\r\n        var w4=this.scene.getMeshByName(\"w1\").clone();w4.isVisible=true;\r\n        w4.rotation.z=-Math.PI*0.5\r\n        w4.name=\"w4_1\";\r\n\r\n        w2.scaling.x=-this.scene.getMeshByName(\"w1\").scaling.x;\r\n        w2.position.y=-this.scene.getMeshByName(\"w1\").position.y;\r\n        w4.scaling.x=-this.scene.getMeshByName(\"w1\").scaling.x;\r\n        w4.position.y=-this.scene.getMeshByName(\"w1\").position.y;\r\n        this.shadowGenerator.getShadowMap().renderList.push(w4);\r\n\r\n        this.world.addEventListener('postStep',()=>{\r\n            this.scene.getMeshByName(\"w1\").rotation.y=3\r\n            for (var i = 0; i < this.vehicle.wheelInfos.length; i++) {\r\n                this.vehicle.updateWheelTransform(i);\r\n                var t = this.vehicle.wheelInfos[i].worldTransform;\r\n                //console.log(t);\r\n                var wheelBody = wheelBodies[i];\r\n                wheelBody.position.copy(t.position);\r\n                wheelBody.quaternion.copy(t.quaternion);\r\n                if(this.babylonWheelBodies[i]){\r\n                  //  console.log(wheelBody.position)\r\n                    this.babylonWheelBodies[i].position = wheelBody.position;\r\n                    this.babylonWheelBodies[i].rotationQuaternion = new BABYLON.Quaternion(t.quaternion.x,t.quaternion.y,t.quaternion.z,t.quaternion.w);\r\n                }\r\n\r\n                w1.parent=this.babylonWheelBodies[0];\r\n                w2.parent=this.babylonWheelBodies[1];\r\n                w3.parent=this.babylonWheelBodies[2];\r\n                w4.parent=this.babylonWheelBodies[3];\r\n            }\r\n        });\r\n        SceneManager.ins.engine.runRenderLoop(()=>{\r\n            if(this.world){\r\n                this.world.step(1.0 / 60.0);\r\n            }\r\n            if(this.babylonCarBox){\r\n                this.babylonCarBox.position = this.chassisBody.position;\r\n                this.babylonCarBox.rotationQuaternion = new BABYLON.Quaternion(this.chassisBody.quaternion.x, this.chassisBody.quaternion.y, this.chassisBody.quaternion.z, this.chassisBody.quaternion.w);\r\n            }\r\n        });\r\n        return this.vehicle;\r\n    }\r\n\r\n    //创建车体\r\n    public createBabylonChassisBody(body){\r\n        var shape = body.shapes[0];\r\n        var size = shape.halfExtents;\r\n        var meshFromShape = BABYLON.MeshBuilder.CreateBox(\"carBox\", {height: size.y * 2, width:size.x * 2, depth:size.z * 2}, this.scene);\r\n        meshFromShape.rotationQuaternion = new BABYLON.Quaternion();\r\n        meshFromShape.isVisible=false;\r\n        //meshFromShape.receiveShadows = true;\r\n       // shadowGenerator.getShadowMap().renderList.push(meshFromShape);\r\n        this.scene.getMeshByName(\"car\").parent= meshFromShape\r\n        //console.log(shadowGenerator.getShadowMap().renderList);\r\n        return meshFromShape;\r\n    };\r\n\r\n    //创建车轮\r\n    public createBabylonWheelBodies(body){\r\n        var shape = body.shapes[0];\r\n        var size = shape.boundingSphereRadius;\r\n        //console.log(shape);\r\n        var wheel = BABYLON.MeshBuilder.CreateCylinder(\"wheel\", {height:size}, this.scene);\r\n        wheel.scaling.z = size * 2;\r\n        wheel.scaling.x = size * 2;\r\n        wheel.rotationQuaternion = new BABYLON.Quaternion();\r\n        wheel.receiveShadows = true;\r\n        wheel.isVisible=false;\r\n        //shadowGenerator.getShadowMap().renderList.push(wheel);\r\n        this.babylonWheelBodies.push(wheel);\r\n    };\r\n\r\n    //创建box\r\n    public createBabylonBody(body){\r\n        var shape = body.shapes[0];\r\n        var size = shape.halfExtents;\r\n        var meshBox = BABYLON.MeshBuilder.CreateBox(\"boxdh\", {height: size.y * 2, width:size.x * 2, depth:size.z * 2}, this.scene);\r\n        meshBox.rotationQuaternion = new BABYLON.Quaternion();\r\n        //meshFromShape.receiveShadows = true;\r\n        //shadowGenerator.getShadowMap().renderList.push(meshBox);\r\n        //console.log(shadowGenerator.getShadowMap().renderList);\r\n        return meshBox;\r\n    };\r\n\r\n\r\n    //创建盒子\r\n    public createCannonBox(){\r\n        var sizeXYZ = new CANNON.Vec3(2, 1, 0.5);\r\n        this.chassisShape = new CANNON.Box(sizeXYZ);\r\n        this.boxBody = new CANNON.Body({ mass: 10 });\r\n        this.boxBody.addShape(this.chassisShape);\r\n        this.boxBody.position.set(0, 100, 140);\r\n        this.boxBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);\r\n        this.boxBody.angularVelocity.set(0, 0, 0.2);\r\n        this.babylonBox = this.createBabylonBody(this.boxBody);\r\n        this.world.add(this.boxBody)\r\n        // babylonBox\r\n    }\r\n\r\n\r\n    /**\r\n     * 汽车控制\r\n     * */\r\n\r\n    public carCtrl(){\r\n\r\n        document.addEventListener(\"keydown\",(e)=>{\r\n            console.log(5555666)\r\n            this.handlerDown(e)\r\n        })\r\n\r\n        document.addEventListener(\"keyup\",(e)=>{\r\n            this.handlerUp(e)\r\n        })\r\n\r\n        var SteerVal=0\r\n        this.scene.onAfterRenderObservable.add(()=>{\r\n            if(this.zxState==0){\r\n                //SteerVal=0\r\n                if(SteerVal>0){\r\n                    SteerVal-=0.03\r\n                    if(SteerVal<=0.03){\r\n                        SteerVal=0\r\n                    }\r\n\r\n                }else if(SteerVal<0){\r\n                    SteerVal+=0.03\r\n\r\n                    if(SteerVal>=-0.03){\r\n                        SteerVal=0\r\n                    }\r\n                }\r\n\r\n\r\n            }else if(this.zxState==1){\r\n                if(SteerVal>this.maxSteerVal){\r\n                    SteerVal=SteerVal\r\n                }else{\r\n                    SteerVal+=0.03\r\n                }\r\n            }else if(this.zxState==2){\r\n                if(SteerVal<-this.maxSteerVal){\r\n                    SteerVal=SteerVal\r\n                }else{\r\n                    SteerVal-=0.03\r\n                }\r\n            }\r\n            if(this.cannonCar){\r\n               /* console.log(\"转向\")\r\n                console.log(SteerVal)*/\r\n\r\n               this.scene.getMeshByName(\"steering\").rotation.x=-SteerVal*4\r\n                this.cannonCar.setSteeringValue(SteerVal, 1);\r\n                this.cannonCar.setSteeringValue(SteerVal, 0);\r\n            }\r\n        })\r\n\r\n\r\n    }\r\n\r\n\r\n    /**\r\n    * 键盘松开\r\n    * */\r\n    public handlerUp(event){\r\n\r\n        this.cannonCar.setBrake(0, 0);\r\n        this.cannonCar.setBrake(0, 1);\r\n        this.cannonCar.setBrake(0, 2);\r\n        this.cannonCar.setBrake(0, 3);\r\n        if(event.keyCode === 87){\r\n            this.cannonCar.applyEngineForce(0, 0);\r\n            this.cannonCar.applyEngineForce(0, 1);\r\n            this.cannonCar.applyEngineForce(0, 2);\r\n            this.cannonCar.applyEngineForce(0, 3);\r\n        }\r\n\r\n        if(event.keyCode === 83){\r\n            this.cannonCar.applyEngineForce(0, 0);\r\n            this.cannonCar.applyEngineForce(0, 1);\r\n            this.cannonCar.applyEngineForce(0, 2);\r\n            this.cannonCar.applyEngineForce(0, 3);\r\n        }\r\n\r\n        if(event.keyCode === 32){\r\n            this.cannonCar.setBrake(0, 0);\r\n            this.cannonCar.setBrake(0, 1);\r\n            this.cannonCar.setBrake(0, 2);\r\n            this.cannonCar.setBrake(0, 3);\r\n            this.scene.getMeshByName(\"Jeep GC-P 20\").material.emissiveTexture.level=0.1;\r\n        }\r\n        if(event.keyCode === 65){\r\n            this.zxState=0\r\n        }\r\n\r\n        if(event.keyCode === 68){\r\n            this.zxState=0\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 键盘按下\r\n     * */\r\n    public handlerDown(event){\r\n\r\n        this.cannonCar.setBrake(0, 0);\r\n        this.cannonCar.setBrake(0, 1);\r\n        this.cannonCar.setBrake(0, 2);\r\n        this.cannonCar.setBrake(0, 3);\r\n\r\n        if(event.keyCode === 87){\r\n            if(this.text.forceOn === 1){\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 2);\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 3);\r\n            } else if(this.text.forceOn === 2){\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 0);\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 1);\r\n            } else {\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 0);\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 1);\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 2);\r\n                this.cannonCar.applyEngineForce(-this.maxForce, 3);\r\n            }\r\n        }\r\n\r\n        if(event.keyCode === 83){\r\n            if(this.text.forceOn === 1){\r\n                this.cannonCar.applyEngineForce(this.maxForce, 2);\r\n                this.cannonCar.applyEngineForce(this.maxForce, 3);\r\n            } else if(this.text.forceOn === 2){\r\n                this.cannonCar.applyEngineForce(this.maxForce, 0);\r\n                this.cannonCar.applyEngineForce(this.maxForce, 1);\r\n            } else {\r\n                this.cannonCar.applyEngineForce(this.maxForce, 0);\r\n                this.cannonCar.applyEngineForce(this.maxForce, 1);\r\n                this.cannonCar.applyEngineForce(this.maxForce, 2);\r\n                this.cannonCar.applyEngineForce(this.maxForce, 3);\r\n            }\r\n        }\r\n\r\n        if(event.keyCode === 32){\r\n            //console.log(text.brakeOn);\r\n            if(this.text.brakeOn === 1){\r\n                this.cannonCar.setBrake(this.brakeForce, 2);\r\n                this.cannonCar.setBrake(this.brakeForce, 3);\r\n            } else if(this.text.brakeOn === 2){\r\n                this.cannonCar.setBrake(this.brakeForce, 0);\r\n                this.cannonCar.setBrake(this.brakeForce, 1);\r\n            }else{\r\n                this.cannonCar.setBrake(this.brakeForce, 0);\r\n                this.cannonCar.setBrake(this.brakeForce, 1);\r\n                this.cannonCar.setBrake(this.brakeForce, 2);\r\n                this.cannonCar.setBrake(this.brakeForce, 3);\r\n            }\r\n\r\n            this.scene.getMeshByName(\"Jeep GC-P 20\").material.emissiveTexture.level=1;\r\n        }\r\n\r\n\r\n        if(event.keyCode === 65){\r\n            this.zxState=2\r\n        }\r\n\r\n        if(event.keyCode === 68){\r\n            this.zxState=1\r\n        }\r\n    }\r\n}","\r\nimport {AssetsManager} from \"../../public/index\"\r\nimport {SceneManager} from \"../../public/index\"\r\nimport {WeatherState} from \"../../public/index\";\r\n\r\nexport class ExGameScene{\r\n\r\n    private static instance: ExGameScene;\r\n\r\n    public static get ins(): ExGameScene {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameScene();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    public display;\r\n\r\n    protected scene;\r\n\r\n    constructor(){\r\n       // super()\r\n    }\r\n\r\n\r\n    public creatScene(){\r\n        this.scene=SceneManager.ins.scene\r\n        //设置背景色\r\n        this.scene.clearColor=new BABYLON.Color4(52/255,156/255,255/255)\r\n\r\n        /**\r\n         * 室外相机\r\n         * */\r\n        var  camera = new BABYLON.ArcRotateCamera(\"ArcRotateCamera\", 1, 0.8, 10, new BABYLON.Vector3(0, 200, 0), this.scene);\r\n        camera.alpha=-Math.PI*1\r\n        camera.beta=1.260483446598473\r\n        camera.attachControl(SceneManager.ins.canvas, false);\r\n        camera.upperRadiusLimit=15\r\n        camera.lowerRadiusLimit=15\r\n        this.scene.activeCamera=camera;\r\n\r\n\r\n        /**\r\n         * 室内相机校准模型\r\n         * */\r\n        var camera2Box = BABYLON.MeshBuilder.CreateBox(\"camera2Box\", {height:  2, width: 2, depth: 2}, this.scene);\r\n        camera2Box.isVisible=false;\r\n        camera2Box.rotation=new BABYLON.Vector3(Math.PI*0.5,0,0)\r\n\r\n\r\n        var steering = BABYLON.MeshBuilder.CreateBox(\"steering\", {height:  2000, width: 2000, depth: 2000}, this.scene);\r\n        steering.visibility=0;\r\n        steering.scaling=new BABYLON.Vector3(0.001,0.001,0.001)\r\n        steering.rotation=new BABYLON.Vector3(0,0.3,Math.PI*0.5)\r\n\r\n        /**\r\n         * 室内相机\r\n         * */\r\n        var camera2 = new BABYLON.UniversalCamera(\"UniversalCamera\", new BABYLON.Vector3(0.2, 1.1, 0.6), this.scene);\r\n        camera2.rotation.y=Math.PI*0.5\r\n        camera2.attachControl(SceneManager.ins.canvas);\r\n        camera2.detachControl(SceneManager.ins.canvas);\r\n        camera2.minZ=0;\r\n        camera2.parent=camera2Box;\r\n\r\n\r\n\r\n      /*  this.scene.fogMode = BABYLON.Scene.FOGMODE_EXP;\r\n        this.scene.fogDensity = 0.001;\r\n        this.scene.fogColor = new BABYLON.Color3(1,1,1);*/\r\n\r\n\r\n        /**\r\n         * 环境光\r\n         * */\r\n        var light = new BABYLON.HemisphericLight(\"HemiLight\", new BABYLON.Vector3(0, 10, 0), this.scene);\r\n        light.intensity=0.1\r\n        var light2 = new BABYLON.HemisphericLight(\"HemiLight\", new BABYLON.Vector3(0, -10, 0), this.scene);\r\n        light2.intensity=0.1\r\n\r\n        /**\r\n         * 平行光\r\n         * */\r\n        var light3 = new BABYLON.DirectionalLight(\"DirectionalLight\", new BABYLON.Vector3(0.2, -0.3, 0.2), this.scene);\r\n        light3.intensity=0.2\r\n        //  light3.autoUpdateExtends=false;\r\n        light3.shadowFrustumSize=200\r\n        light3.shadowMinZ=-100\r\n        light3.shadowMaxZ=100\r\n\r\n\r\n\r\n        /**\r\n         * 天空盒子\r\n         * */\r\n        var skybox = BABYLON.Mesh.CreateBox(\"skyBox\", 600.0, this.scene);\r\n        var skyboxMaterial = new BABYLON.StandardMaterial(\"skyBox\", this.scene);\r\n        skyboxMaterial.backFaceCulling = false;\r\n        skyboxMaterial.reflectionTexture =  AssetsManager.ins.resourceObject[\"cubeTextures\"][\"gameScene\"][\"skybox\"].clone()\r\n        skyboxMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;\r\n        skyboxMaterial.diffuseColor = new BABYLON.Color3(0, 0, 0);\r\n        skyboxMaterial.specularColor = new BABYLON.Color3(0, 0, 0);\r\n        //   skyboxMaterial.emissiveColor  = new BABYLON.Color3(0, 0, 0);\r\n        skyboxMaterial.disableLighting = false;\r\n        skybox.material = skyboxMaterial;\r\n\r\n\r\n\r\n        var terrainMaterial = new BABYLON[\"TerrainMaterial\"](\"terrainMaterial\", this.scene);\r\n        terrainMaterial.mixTexture = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"maptr\"].clone()\r\n        terrainMaterial.diffuseTexture1 = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"grass\"].clone()\r\n        terrainMaterial.diffuseTexture1.uScale=20\r\n        terrainMaterial.diffuseTexture1.vScale=20\r\n        terrainMaterial.diffuseTexture2 = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"ground\"].clone()\r\n        terrainMaterial.diffuseTexture2.uScale=20\r\n        terrainMaterial.diffuseTexture2.vScale=20\r\n        terrainMaterial.diffuseTexture3 = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"ground\"].clone()\r\n        terrainMaterial.diffuseTexture3.uScale=20\r\n        terrainMaterial.diffuseTexture3.vScale=20\r\n\r\n\r\n    /*    var terrainMaterial = new BABYLON.StandardMaterial(\"texture1\", this.scene);\r\n        terrainMaterial.diffuseTexture = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"ground\"].clone()\r\n        terrainMaterial.specularColor=new BABYLON.Color3(0,0,0)\r\n        terrainMaterial.diffuseTexture[\"uScale\"]=20\r\n        terrainMaterial.diffuseTexture[\"vScale\"]=20*/\r\n\r\n\r\n        //雨粒子\r\n        var particleRain = new BABYLON.ParticleSystem(\"particles\", 2000, this.scene);\r\n\r\n        //粒子的纹理\r\n        particleRain.particleTexture = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"yu\"].clone()\r\n        particleRain.minEmitBox = new BABYLON.Vector3(-100, -100, 0); // Starting all From\r\n        particleRain.maxEmitBox = new BABYLON.Vector3(100, 100, 0); // Starting all From\r\n        particleRain.color1 = new BABYLON.Color4(255/255, 255/255, 255/255 ,1);\r\n        particleRain.color2 = new BABYLON.Color4(255/255, 255/255, 255/255,1);\r\n        particleRain.colorDead = new BABYLON.Color4(255/255, 255/255, 255/255,1);\r\n        particleRain.gravity = new BABYLON.Vector3(0, -9.81, -2);\r\n        particleRain.minSize = 5;\r\n        particleRain.maxSize = 5;\r\n        particleRain.minLifeTime = 5;\r\n        particleRain.maxLifeTime = 5;\r\n\r\n        particleRain.emitRate = 600;\r\n\r\n        // particleSystem.manualEmitCount = 300;\r\n        particleRain.blendMode = BABYLON.ParticleSystem.BLENDMODE_STANDARD;\r\n        particleRain.direction1 = new BABYLON.Vector3(1, 1, 1);\r\n        particleRain.direction2 = new BABYLON.Vector3(-1, -1, -1);\r\n        // Speed\r\n        particleRain.minEmitPower = 1;\r\n        particleRain.maxEmitPower = 1;\r\n        particleRain.updateSpeed = 0.3;\r\n\r\n        var shadowGenerator = new BABYLON.ShadowGenerator(4096, light3);\r\n        shadowGenerator.bias = 0.0004;\r\n        shadowGenerator.usePercentageCloserFiltering = true;\r\n        shadowGenerator.filteringQuality=0.1;\r\n        shadowGenerator.forceBackFacesOnly=true;\r\n\r\n\r\n\r\n\r\n\r\n        var postProcess = new BABYLON.RefractionPostProcess(\"Refraction\", \"\", new BABYLON.Color3(1.0, 1.0, 1.0), 0.05, 0.01, 1.0, camera);\r\n        var postProcess1 = new BABYLON.RefractionPostProcess(\"Refraction\", \"\", new BABYLON.Color3(1.0, 1.0, 1.0), 0.05, 0.01, 1.0, camera2);\r\n\r\n\r\n        var videoTexture =new BABYLON.VideoTexture(\"video\", [AssetsManager.ins.resourceObject[\"binarys\"][\"gameScene\"][\"rain\"].url], this.scene, true);\r\n        this.scene.registerBeforeRender(function(){\r\n            if(videoTexture.isReady()==true){\r\n                videoTexture.video.loop=true   //有效\r\n                videoTexture.video.play()   //有效\r\n            }\r\n        })\r\n\r\n        postProcess.refractionTexture=videoTexture\r\n        postProcess1.refractionTexture=videoTexture\r\n\r\n       // var pipeline = new BABYLON.StandardRenderingPipeline(\"standard\", this.scene, 0.5 / devicePixelRatio, null, [camera]);\r\n        //pipeline.lensTexture = new BABYLON.Texture(\"textures/lensdirt.jpg\", this.scene);\r\n\r\n\r\n\r\n     /*   var pipeline = new BABYLON.DefaultRenderingPipeline(\r\n            \"default\", // The name of the pipeline\r\n            true, // Do you want HDR textures ?\r\n            this.scene, // The scene instance\r\n            [camera] // The list of cameras to be attached to\r\n        );*/\r\n\r\n\r\n\r\n\r\n        var light4 = new BABYLON.SpotLight(\"spotLight\", new BABYLON.Vector3(0, 0, 0), new BABYLON.Vector3(1, 0, 0), 1.2, 1.3, this.scene);\r\n        light4.range=60;\r\n        light4.intensity = 0;\r\n        light4.projectionTexture = new BABYLON.Texture(AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"stainedGlass\"], this.scene);\r\n\r\n\r\n        var lightLook = BABYLON.Mesh.CreateGround(\"ground1\", 3, 3, 0, this.scene);\r\n        lightLook.isVisible=false;\r\n\r\n        // 水材质\r\n        var waterMesh = BABYLON.Mesh.CreateGround(\"waterMesh\", 512, 512, 32, this.scene, false);\r\n        waterMesh.position.y=43;\r\n        var water = new BABYLON[\"WaterMaterial\"](\"water\", this.scene, new BABYLON.Vector2(512, 512));\r\n        water.backFaceCulling = true;\r\n        water.bumpTexture = new BABYLON.Texture(AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"waterbump\"], this.scene);\r\n        water.windForce = -10;\r\n        water.waveHeight = 0;\r\n        water.bumpHeight = 0.5;\r\n        water.waterColor = new BABYLON.Color3(158/255, 133/255, 93/255);\r\n        water.colorBlendFactor = 0.4;\r\n        waterMesh.material = water;\r\n\r\n        var lens3 = BABYLON.Mesh.CreateSphere(\"centerHidenPick\", 16, 0.1, this.scene);\r\n        lens3.visibility=0\r\n        lens3.position=new BABYLON.Vector3(1350.799, 1000.817, -3000)\r\n        //添加光晕\r\n         var lensFlareSystem3 = new BABYLON.LensFlareSystem(\"lensFlareSystem\", lens3, this.scene);\r\n         var flare00 = new BABYLON.LensFlare(1.5, 1, new BABYLON.Color3(1,1,1), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"ty\"].src, lensFlareSystem3);\r\n         var flare01 = new BABYLON.LensFlare(0.24, 1, new BABYLON.Color3(0,1,0), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"Bphl4qj\"].src, lensFlareSystem3);\r\n         var flare02 = new BABYLON.LensFlare(0.28, 1, new BABYLON.Color3(0,0,1), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"Bphl4qj\"].src, lensFlareSystem3);\r\n         var flare03 = new BABYLON.LensFlare(0.2, 0.8, new BABYLON.Color3(.5,.7,1), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"IIyZhcg\"].src, lensFlareSystem3);\r\n         var flare04 = new BABYLON.LensFlare(0.2, 0.6, new BABYLON.Color3(.5,.5,1), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"HRsf4I5\"].src, lensFlareSystem3);\r\n         var flare05 = new BABYLON.LensFlare(0.4, 0.5, new BABYLON.Color3(.4,.6,.9),  AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"XaJRD9j\"].src, lensFlareSystem3);\r\n         var flare06 = new BABYLON.LensFlare(0.1, 0.35, new BABYLON.Color3(.5,.5,.9), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"it5c3Vr\"].src, lensFlareSystem3);\r\n         var flare07 = new BABYLON.LensFlare(0.12, -0.5, new BABYLON.Color3(.9,.75,.5), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"XaJRD9j\"].src, lensFlareSystem3);\r\n         var flare08 = new BABYLON.LensFlare(0.25, -0.25, new BABYLON.Color3(1,.85,.5), AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"IIyZhcg\"].src, lensFlareSystem3);\r\n\r\n        this.display={\r\n            camera:camera,\r\n            camera2:camera2,\r\n            light:light,\r\n            light2:light2,\r\n            light3:light3,\r\n            light4:light4,\r\n            lightLook:lightLook,\r\n            camera2Box:camera2Box,\r\n            skybox:skybox,\r\n            particleRain:particleRain,\r\n            terrainMaterial:terrainMaterial,\r\n            shadowGenerator:shadowGenerator,\r\n            waterMesh:waterMesh,\r\n            water:water,\r\n            steering:steering,\r\n            postProcess:postProcess,\r\n            postProcess1:postProcess1,\r\n            lensFlareSystem3:lensFlareSystem3,\r\n        }\r\n\r\n        console.log(this.display)\r\n\r\n      //  GameSceneCon.ins.resetGame(this.display);\r\n    }\r\n\r\n}\r\n\r\n\r\n","import {Module} from \"../Module\";\r\nimport {AnimationGui} from \"../../others/AnimationGui\";\r\nimport {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {ModuleName} from \"../../enum/ModuleName\";\r\nimport {DisplayPool} from \"../../others/DisplayPool\";\r\n\r\n\r\nexport class GameSceneGui extends Module{\r\n\r\n    //规则元素\r\n    protected section: any;\r\n\r\n    //元素对象集合\r\n    protected scene;\r\n\r\n    //舞台容器\r\n    protected parent;\r\n\r\n    //页面容器\r\n    protected view;\r\n\r\n    //事件\r\n    protected doEvents=[];\r\n\r\n\r\n    //面板隐藏显示实例\r\n    protected panelsAn=new AnimationGui(SceneManager.ins.scene,GuiManager.ins.fullscreenUI)\r\n\r\n    constructor(){\r\n        super()\r\n        this.initUI();\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    public show(data): void {\r\n        this.updateData()\r\n        this.addEvent();\r\n        GuiManager.ins.changeGui(this.parent);\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(): void {\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开前\r\n     * */\r\n    protected onOpen(...args){\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开后\r\n     * */\r\n    protected onOpened(...args){\r\n\r\n    }\r\n\r\n\r\n    public init(){\r\n        DisplayPool.ins.displayPool[ModuleName.GAME_PLAY_GUI]=this;\r\n    }\r\n\r\n\r\n    /**\r\n     * 添加事件\r\n     * */\r\n    protected addEvent(){\r\n\r\n    }\r\n\r\n\r\n    protected removeEvent(){\r\n\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 更新页面\r\n     * @param args\r\n     */\r\n    public updateData(...args): void {\r\n        this.removeEvent()\r\n        if (!this.isInit) {\r\n            this.initUI();\r\n            this.isInit = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭前\r\n     * */\r\n    protected onClose(){\r\n    }\r\n\r\n    /**\r\n     * 关闭后\r\n     * */\r\n    protected onClosed(){\r\n        this.removeEvent()\r\n       // NetManager.ins.getInfo(this, DataManager.ins.gameCfgData.game.gameId);\r\n    }\r\n}","import {Module} from \"../Module\";\r\nimport {AnimationGui} from \"../../others/AnimationGui\";\r\nimport {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {DisplayPool} from \"../../others/DisplayPool\";\r\nimport {ModuleName} from \"../../enum/ModuleName\";\r\nimport {GlobalManager} from \"../../manager/GlobalManager\";\r\n\r\n\r\nexport class StartGui extends Module {\r\n\r\n    //规则元素\r\n    protected section: any;\r\n\r\n    //元素对象集合\r\n    protected scene;\r\n\r\n    //舞台容器\r\n    protected parent;\r\n\r\n    //页面容器\r\n    protected view;\r\n\r\n    //事件\r\n    protected doEvents=[];\r\n\r\n    //游戏场景对象\r\n\r\n    protected gameSceneObject:any;\r\n\r\n\r\n    //面板隐藏显示实例\r\n    protected panelsAn=new AnimationGui(SceneManager.ins.scene,GuiManager.ins.fullscreenUI)\r\n\r\n    constructor(){\r\n        super()\r\n        this.initUI();\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    public show(data): void {\r\n        this.removeEvent();\r\n        this.updateData()\r\n        this.addEvent();\r\n        GuiManager.ins.changeGui(this.parent);\r\n    }\r\n\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(): void {\r\n        this.removeEvent();\r\n        this.panelsAn.hide(this.view,()=>{\r\n            this.onClose()\r\n        },()=>{\r\n            this.onClosed()\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开前\r\n     * */\r\n    protected onOpen(...args){\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开后\r\n     * */\r\n    protected onOpened(...args){\r\n\r\n    }\r\n\r\n\r\n    public init(){\r\n        DisplayPool.ins.displayPool[ModuleName.GAME_START_GUI]=this;\r\n    }\r\n\r\n\r\n    /**\r\n     * 添加事件\r\n     * */\r\n    protected addEvent(){\r\n\r\n    }\r\n\r\n\r\n    protected removeEvent(){\r\n    }\r\n\r\n\r\n    protected onClick_ruleBtn(): void {\r\n\r\n\r\n    }\r\n\r\n    protected onClick_optionBtn(): void {\r\n\r\n\r\n\r\n    }\r\n\r\n    protected onClick_startBtn(): void {\r\n        GlobalManager.ins.openModule(ModuleName.GAME_PLAY_GUI);\r\n        GlobalManager.ins.openModule(ModuleName.GAME_PLAY_SCENE);\r\n    }\r\n\r\n    /**\r\n     * 更新页面\r\n     * @param args\r\n     */\r\n    public updateData(...args): void {\r\n        if (!this.isInit) {\r\n            this.initUI();\r\n            this.isInit = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭前\r\n     * */\r\n    protected onClose(){\r\n        this.removeHtml()\r\n        //NetManager.ins.getInfo(this, DataManager.ins.gameCfgData.game.gameId);\r\n       // this.view.removeControl(this.optionsList)\r\n    }\r\n\r\n    protected removeHtml(){\r\n     //   console.log(this.section)\r\n        if(this.section){\r\n            // alert()\r\n            document.body.removeChild(this.section);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭后\r\n     * */\r\n    protected onClosed(){\r\n        this.removeEvent()\r\n      //  GlobalManager.ins.openModule(\"StartGuiCon\");\r\n      //  GuiManager.ins.removeGui(this.parent);\r\n    }\r\n}","import {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {Module} from \"../Module\";\r\n\r\nexport class Guis extends Module{\r\n    constructor(){\r\n        super();\r\n    }\r\n    //销毁\r\n}","import {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {Module} from \"../Module\";\r\n\r\nimport {AnimationGui} from \"../../others/AnimationGui\";\r\n\r\nexport class Panels extends Module{\r\n    //元素对象集合\r\n    protected scene;\r\n\r\n    //舞台容器\r\n    protected parent;\r\n\r\n    //页面容器\r\n    protected view;\r\n\r\n    //面板隐藏显示实例\r\n    protected panelsAn=new AnimationGui(SceneManager.ins.scene,GuiManager.ins.fullscreenUI)\r\n\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    protected show(open?,opened?): void {\r\n        this.addEvent();\r\n        this.panelsAn.show(this.view,open,opened)\r\n    }\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(close?,closed?): void {\r\n        this.removeEvent();\r\n        this.panelsAn.hide(this.view,close,closed)\r\n    }\r\n\r\n    //销毁\r\n}","/**\r\n * GUI控制器\r\n * */\r\nimport {GuiManager} from \"../manager/GuiManager\";\r\n\r\nexport class GuiCreate{\r\n\r\n\r\n    private panelOut=new BABYLON.GUI.StackPanel();\r\n\r\n    private static  instance: GuiCreate;\r\n\r\n    public static  get  ins():GuiCreate{\r\n        if(!this.instance){\r\n            this.instance=new GuiCreate()\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){}\r\n\r\n\r\n    public createList(name,options,scaleUi){\r\n        var rectOut=new BABYLON.GUI.Rectangle();\r\n        rectOut.thickness=0;\r\n        rectOut.isPointerBlocker=true;\r\n        rectOut.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;\r\n        rectOut.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        for (var key in options) {\r\n            if(rectOut[key]){\r\n                rectOut[key] = options[key];\r\n            }\r\n        }\r\n//            panelOut.height=1;\r\n        if(options&&options.isVertical){\r\n            this.panelOut.horizontalAlignment=2;\r\n            this.panelOut.verticalAlignment=0;\r\n            this.panelOut.isVertical  =true;\r\n            var mouse={\r\n                up:0,\r\n                down:0,\r\n            };\r\n            mouse.up=parseInt(this.panelOut.top.toString());\r\n            rectOut.onPointerDownObservable.add(function(e){\r\n                mouse.down= e.y;\r\n            });\r\n            rectOut.onPointerUpObservable.add((e)=>{\r\n                var topY=parseInt(this.panelOut.top.toString());\r\n                mouse.up=topY;\r\n                if(topY>0){\r\n                    this.panelOut.top=\"0px\";\r\n                    mouse.up= 0;\r\n                }\r\n                else if(parseInt(this.panelOut.top.toString())<parseInt(rectOut.height.toString())-parseInt(this.panelOut.height.toString())){\r\n                    var l=(parseInt(rectOut.height.toString())-parseInt(this.panelOut.height.toString()))*scaleUi;\r\n                    this.panelOut.top=l.toString()+\"px\";\r\n                    mouse.up= parseInt(this.panelOut.top);\r\n                }\r\n            });\r\n            rectOut.onPointerMoveObservable.add((e)=>{\r\n                var m=e.y-mouse.down;\r\n                var mul=(mouse.up+m)*scaleUi;\r\n                this.panelOut.top= mul.toString()+\"px\";\r\n            });\r\n        }else {\r\n            this.panelOut.horizontalAlignment=0;\r\n            this.panelOut.verticalAlignment=2;\r\n            this.panelOut.isVertical  =false;\r\n            var mouse={\r\n                up:0,\r\n                down:0\r\n            };\r\n            mouse.up=parseInt(this.panelOut.left.toString());\r\n            rectOut.onPointerDownObservable.add((e)=>{\r\n                mouse.down= e.x;\r\n            });\r\n            rectOut.onPointerUpObservable.add((e)=>{\r\n                var leftY=parseInt(this.panelOut.left.toString());\r\n                mouse.up=leftY;\r\n                if(leftY>0){\r\n                    this.panelOut.left=\"0px\";\r\n                    mouse.up= 0;\r\n                }\r\n                else if(parseInt(this.panelOut.left.toString())<parseInt(rectOut.width.toString())-parseInt(this.panelOut.width.toString())){\r\n                    var l=(parseInt(rectOut.width.toString())-parseInt(this.panelOut.width.toString()))*scaleUi;\r\n                    this.panelOut.left=l.toString()+\"px\";\r\n                    mouse.up= parseInt(this.panelOut.left);\r\n                }\r\n            });\r\n            rectOut.onPointerMoveObservable.add(function(e){\r\n                var m=e.x-mouse.down;\r\n                var mul=(mouse.up+m)*scaleUi;\r\n                this.panelOut.left= mul.toString()+\"px\";\r\n            });\r\n        }\r\n        rectOut.addControl(this.panelOut);\r\n        return rectOut\r\n    }\r\n\r\n\r\n    /**\r\n     * 横向滚动的奖品列表\r\n     * @example\r\n     *  this.optionsList({\r\n                    itemWidth:\"130px\",\r\n                    itemHeight:\"170px\",\r\n                    itemPaddingRight:\"30px\",\r\n                    logoWidth:\"100px\",\r\n                    logoHeight:\"100px\",\r\n                    logoTop:\"0px\",\r\n                    textWidth:\"100px\",\r\n                    textHeight:\"30px\",\r\n                    textTop:\"140px\",\r\n                    isVertical:false,\r\n                },data,this.guiObject)\r\n     *\r\n     * */\r\n    public optionsListCon(config,data,listTemplate){\r\n        var scaleUi=GuiManager.ins.fullscreenUI.idealWidth/document.getElementById(\"renderCanvas\").offsetWidth;\r\n        var prizeDatalist=this.createList(\"list\",{width:config.bodyWidth,height:config.bodyHeight,top:config.bodyTop,left:config.bodyLeft,isVertical:config.isVertical},scaleUi);\r\n        var _length=this.panelOut.children.length\r\n        if(_length>0){\r\n            for(var i=0;i<_length;i++){\r\n                this.panelOut.removeControl(this.panelOut.children[0])\r\n            }\r\n        }\r\n        data.optionList.forEach((_list)=>{\r\n            var list=listTemplate(config,_list)\r\n            this.panelOut.addControl(list)\r\n        })\r\n        return prizeDatalist\r\n    }\r\n\r\n}","/**\r\n * Created by rjf on 2017/10/10.\r\n * 粒子控制器\r\n */\r\n\r\nexport class particleCon {\r\n    private static instance: particleCon;\r\n    constructor(position,scene,particle){\r\n        this.fountain = BABYLON.Mesh.CreateBox(\"fountain\", 1.0, scene);\r\n        this.fountain.isPickable=false\r\n        this.fountain.visibility=0;\r\n        this.fountain.rotation.x=Math.PI*0.9;\r\n        this.particleSystem=particle;\r\n        //定义发射器\r\n        this.particleSystem.emitter = this.fountain; // the starting object, the emitter, a box in this case.\r\n        this.particleSystem.stop();\r\n        this.fountain.position=position;\r\n    }\r\n\r\n    private particleSystem;\r\n\r\n    private fountain;\r\n\r\n    public start(){\r\n        this.particleSystem.start();\r\n    }\r\n\r\n    public stop(){\r\n        this.particleSystem.stop();\r\n    }\r\n    public Position(position){\r\n        this.fountain.position=position;\r\n    }\r\n\r\n    public Parent(parent){\r\n        this.fountain.parent=parent;\r\n    }\r\n}\r\n\r\n","import {GuiCreate} from \"./GuiCreate\";\r\n\r\n/**\r\n * Created by renjianfeng\r\n *动画控制器\r\n */\r\nexport class AnimationCon {\r\n    private static instance: AnimationCon;\r\n    private setbeginAnimation;\r\n\r\n    public static  get  ins():AnimationCon{\r\n        if(!this.instance){\r\n            this.instance=new AnimationCon()\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){}\r\n\r\n    public animationBody(object,scene){\r\n        //动画模式\r\n        var _endattr;\r\n\r\n        //动画对象\r\n        var _mesh;\r\n\r\n        //动画属性\r\n        var _attr;\r\n\r\n        //动画速度\r\n        var _speed;\r\n\r\n        //动画帧\r\n        var _keys;\r\n\r\n        //动画结束回调函数\r\n        var _endCall;\r\n\r\n        //动画数据类型\r\n        var _typeData\r\n\r\n        //动画数据类型\r\n        var _loop;\r\n\r\n        if(object.endattr!=null){\r\n            _endattr=object.endattr;\r\n        }else{\r\n            _endattr=BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE;\r\n        }\r\n\r\n        if(object.mesh!=null){\r\n            _mesh=object.mesh;\r\n        }else {\r\n            _mesh=null;\r\n            console.error(\"动画对象不能为空！\")\r\n        }\r\n\r\n        if(object.attr!=null){\r\n            _attr=object.attr;\r\n        }else {\r\n            _attr=null;\r\n            console.error(\"动画对象属性不能为空！\")\r\n        }\r\n\r\n        if(object.speed!=null){\r\n            _speed=object.speed;\r\n        }else {\r\n            _speed=10;\r\n        }\r\n\r\n        if(object.keys!=null){\r\n            _keys=object.keys;\r\n        }else {\r\n            _keys=[];\r\n        }\r\n\r\n        if(object.endCall!=null){\r\n            _endCall=object.endCall\r\n        }else{\r\n            _endCall=function(){}\r\n        }\r\n\r\n\r\n        if(object.typeData!=null){\r\n            _typeData=object.typedata\r\n        }else{\r\n            _typeData=BABYLON.Animation.ANIMATIONTYPE_FLOAT\r\n        }\r\n\r\n\r\n        if(object.loop!=null){\r\n            _loop=object.loop\r\n        }else{\r\n            _loop=false;\r\n        }\r\n\r\n        var animationBox = new BABYLON.Animation(\"myAnimation\", _attr, _speed, _typeData, _endattr);\r\n        var keys = [];\r\n        keys=_keys\r\n        animationBox.setKeys(keys);\r\n        _mesh.animations.push(animationBox);\r\n        this.setbeginAnimation=scene.beginAnimation(_mesh, 0, _keys[_keys.length-1].frame, _loop);\r\n        this.setbeginAnimation.onAnimationEnd=function(){\r\n            _endCall()\r\n        }\r\n    }\r\n\r\n    public Pause(){\r\n        this.setbeginAnimation.pause()\r\n    }\r\n    public Reset(){\r\n        this.setbeginAnimation.reset()\r\n    }\r\n    public Speed(i){\r\n        this.setbeginAnimation.speedRatio=i\r\n    }\r\n\r\n}\r\n\r\n","/**\r\n *Created by renjianfeng\r\n */\r\nexport class AssetsManager {\r\n    private _resourceData;\r\n    private _resourceObject:object;\r\n\r\n\r\n    private static instance: AssetsManager;\r\n\r\n    public static get ins(): AssetsManager {\r\n        if (!this.instance) {\r\n            this.instance = new AssetsManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        //this._resourceData=ResourceCon.ins.resource;\r\n        this._resourceObject={\r\n            binarys:{},\r\n            images:{},\r\n            models:{},\r\n            textures:{},\r\n            cubeTextures:{}\r\n        }\r\n    }\r\n\r\n    public set resourceData(resource){\r\n        this._resourceData=resource;\r\n    }\r\n\r\n    public loadFile(sceneNames:Array<string>,scene,callback,progress){\r\n\r\n        let assetsManager = new BABYLON.AssetsManager(scene);\r\n\r\n        sceneNames.forEach(function(sceneName){\r\n            //加载模型\r\n            var _thisModel={}\r\n            this._resourceData[sceneName].models.forEach(function(model){\r\n                let meshTask = assetsManager.addMeshTask(\r\n                    \"skull task\",\r\n                    \"\",\r\n                    model.filePath,\r\n                    model.fileName\r\n                );\r\n                meshTask.onSuccess = function (task) {\r\n\r\n                    console.log(\"meshTask\")\r\n                    console.log(task)\r\n                  /*  let _thisMesh = BABYLON.MeshBuilder.CreateBox(\"\", {}, scene);\r\n                    _thisMesh.isVisible=false;\r\n                    _thisMesh.position=new BABYLON.Vector3(0,0,0);\r\n                    task.loadedMeshes.forEach(function(mesh){\r\n                        mesh.isVisible=false;\r\n                       // mesh.position=new BABYLON.Vector3(0,0,0);\r\n                        mesh.parent=_thisMesh;\r\n                     /!*   mesh.getChildMeshes(false,function(child){\r\n                            child.parent=_thisMesh;\r\n                        })*!/\r\n                        //_thisMesh.addChild(mesh)\r\n                    }.bind(this))*/\r\n\r\n                    task.loadedMeshes.forEach(function(mesh){\r\n                        mesh.isVisible=false;\r\n                        mesh.name=\"noneisVisible_\"+mesh;\r\n                    })\r\n\r\n                    let _thisMesh=task;\r\n\r\n                   // this._resourceObject.models[model.name]=_thisMesh;\r\n                    _thisModel[model.name]=_thisMesh\r\n                    this._resourceObject.models[sceneName]=_thisModel;\r\n\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n            //加载图片\r\n            var _thisImage={}\r\n            this._resourceData[sceneName].images.forEach(function(image){\r\n                let imageTask = assetsManager.addImageTask(\r\n                    \"image task\",\r\n                    image.filePath+image.fileName,\r\n                );\r\n                imageTask.onSuccess = function (task) {\r\n                    _thisImage[image.name]=task.image\r\n                    this._resourceObject.images[sceneName]=_thisImage;\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n\r\n\r\n            //加载贴图\r\n            var _thisTexture={}\r\n            this._resourceData[sceneName].textures.forEach(function(texture){\r\n                let textureTask = assetsManager.addTextureTask(\r\n                    \"texture task\",\r\n                    texture.filePath+texture.fileName,\r\n                );\r\n                textureTask.onSuccess = function (task) {\r\n                    _thisTexture[texture.name]=task.texture\r\n                    this._resourceObject.textures[sceneName]=_thisTexture;\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n            //加载二进制文件\r\n            var _thisBinary={}\r\n            this._resourceData[sceneName].binarys.forEach(function(binary){\r\n                let binaryTask = assetsManager.addBinaryFileTask(\r\n                    \"binary task\",\r\n                    binary.filePath+binary.fileName,\r\n                );\r\n                binaryTask.onSuccess = function (task) {\r\n                    console.log(6666677)\r\n\r\n                    _thisBinary[binary.name]=task.data\r\n                    _thisBinary[binary.name][\"url\"]=task.url\r\n                    _thisBinary[binary.name][\"rootUrl\"]=binary.filePath\r\n                    _thisBinary[binary.name][\"sceneFilename\"]=binary.fileName\r\n                    this._resourceObject.binarys[sceneName]=_thisBinary;\r\n\r\n                    console.log(_thisBinary[binary.name])\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n            //加载天空盒子/环境贴图\r\n            var _thisCubeTexture={}\r\n            this._resourceData[sceneName].cubeTextures.forEach(function(cubeTexture){\r\n                let cubeTextureTask = assetsManager.addCubeTextureTask(\r\n                    \"cubeTexture task\",\r\n                    cubeTexture.filePath+cubeTexture.fileName,\r\n                );\r\n                cubeTextureTask.onSuccess = function (task) {\r\n                    _thisCubeTexture[cubeTexture.name]=task.texture\r\n                    this._resourceObject.cubeTextures[sceneName]=_thisCubeTexture;\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n        }.bind(this))\r\n\r\n        assetsManager.load();\r\n\r\n\r\n        //加载成功一个子元素调用\r\n        assetsManager.onProgress=function(task) {\r\n            var _this={\r\n                totalTasksCount:assetsManager._totalTasksCount,\r\n                waitingTasksCount:assetsManager._waitingTasksCount,\r\n                loadCount:(assetsManager._totalTasksCount-assetsManager._waitingTasksCount)/assetsManager._totalTasksCount\r\n            }\r\n            progress(_this)\r\n\r\n        }.bind(this);\r\n\r\n        //全部加载成功调用\r\n        assetsManager.onFinish=function(task) {\r\n            callback()\r\n        }.bind(this);\r\n\r\n    }\r\n\r\n    public get resourceObject(){\r\n        return this._resourceObject;\r\n    }\r\n\r\n}","/**\r\n *Created by cuiliqiang on 2018/3/13\r\n */\r\nexport enum WeatherState {\r\n    //晴天\r\n    SUNNY_DAY = 0,\r\n    //雨天\r\n    RAIN_DAY = 1,\r\n    //下午\r\n    AFTERNOON_DAY = 2,\r\n    //晚上\r\n    NIGHT_DAY = 3,\r\n}\r\n","import {Module} from \"../Module\";\r\nimport {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GlobalManager} from \"../../manager/GlobalManager\";\r\nimport {ModuleName} from \"../../enum/ModuleName\";\r\n\r\nexport class GameScenes extends Module{\r\n\r\n    //场景名称\r\n    protected sceneName:string;\r\n\r\n    protected isInit:boolean;\r\n\r\n    /**\r\n     * 是否校验积分\r\n     */\r\n    protected checkScore: boolean;\r\n\r\n    /**\r\n     * 开始游戏数据\r\n     */\r\n  //  protected doStartData: DoStartData;\r\n\r\n    /**\r\n     * 扩展数据\r\n     * */\r\n    protected other: any;\r\n\r\n\r\n    protected score;\r\n\r\n    // protected display:any;\r\n\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    //销毁\r\n    public dispose(){\r\n        var j;\r\n        for(j in this.display){\r\n            console.log(this.display[j])\r\n            if( this.display[j]){\r\n                this.display[j].dispose()\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public show(data){\r\n        this.resetGame()\r\n        SceneManager.ins.change(this.display);\r\n    }\r\n\r\n    protected resetGame(){\r\n\r\n    }\r\n\r\n    protected gameOver(): void {\r\n        this.removeEvent();\r\n        //将最高纪录缓存\r\n    }\r\n}","import {SceneManager} from \"../public/index\"\r\nimport {AssetsManager} from \"../public/index\"\r\n\r\n\r\n/**\r\n * 全局执行函数\r\n *\r\n *\r\n* */\r\nexport class SceneBeforeCall {\r\n    private static instance: SceneBeforeCall;\r\n\r\n    public static get ins(): SceneBeforeCall {\r\n        if (!this.instance) {\r\n            this.instance = new SceneBeforeCall();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    public game_bg:any;\r\n\r\n    constructor(){}\r\n\r\n    public musicLoop(){\r\n      /*  this.game_bg = new BABYLON.Sound(\"Cello\",AssetsManager.ins.resourceObject[\"binarys\"][\"gameScene\"][\"game_bg\"][\"url\"], SceneManager.ins.scene,()=>{\r\n            this.game_bg.play()\r\n            this.game_bg.setVolume(0.5)\r\n        },{loop:true});*/\r\n    }\r\n}","import {ResourceData} from \"../public/index\"\r\n\r\nexport class ResourceCon {\r\n\r\n    private _resource;\r\n\r\n    private static instance: ResourceCon;\r\n\r\n    public static get ins(): ResourceCon {\r\n        if (!this.instance) {\r\n            this.instance = new ResourceCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    private pathFirst=window[\"resPath\"]\r\n\r\n    constructor(){\r\n        let gameScene:ResourceData;\r\n\r\n        gameScene={\r\n            binarys:[\r\n                {name:\"rain\", filePath:this.pathFirst+\"src/Resource/gameScene/binarys/\", fileName:\"rain.mp4\"},\r\n            ],\r\n            images:[\r\n                {name:\"test\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"cursor_default.png\",},\r\n                {name:\"beginBtn\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"beginBtn.png\",},\r\n                {name:\"bg\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"bg.jpg\",},\r\n                {name:\"close\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"close.png\",},\r\n                {name:\"win_m\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"win_m.png\",},\r\n                {name:\"bg_modle\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"bg_modle.png\",},\r\n                {name:\"btn_left\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_left.png\",},\r\n                {name:\"btn_right\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_right.png\",},\r\n                {name:\"btn_py\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_py.png\",},\r\n                {name:\"btn_dq\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_dq.png\",},\r\n                {name:\"prizeBtn\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"prizeBtn.png\",},\r\n                {name:\"ruleBtn\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"ruleBtn.png\",},\r\n\r\n                //光晕\r\n                {name:\"Bphl4qj\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"Bphl4qj.png\"},\r\n                {name:\"HRsf4I5\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"HRsf4I5.png\"},\r\n                {name:\"IIyZhcg\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"IIyZhcg.png\"},\r\n                {name:\"it5c3Vr\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"it5c3Vr.png\"},\r\n                {name:\"ty\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"ty.png\"},\r\n                {name:\"XaJRD9j\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"XaJRD9j.png\"},\r\n\r\n                //ui\r\n\r\n                {name:\"after\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"after.jpg\"},\r\n                {name:\"night\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"night.jpg\"},\r\n                {name:\"rain\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"rain.jpg\"},\r\n                {name:\"sun\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"sun.jpg\"},\r\n            ],\r\n            models:[\r\n                {name:\"car\", filePath:this.pathFirst+\"src/Resource/gameScene/models/car2/\", fileName:\"car20.babylon\"},\r\n                {name:\"wheel\", filePath:this.pathFirst+\"src/Resource/gameScene/models/car2/\", fileName:\"wheel.babylon\"},\r\n                {name:\"map\", filePath:this.pathFirst+\"src/Resource/gameScene/models/height_m2/\", fileName:\"height_m2.babylon\"},\r\n            ],\r\n            textures:[\r\n                {name:\"grass\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"grass.png\"},\r\n                {name:\"grass2\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"grass.jpg\"},\r\n                {name:\"ground\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"ground.jpg\"},\r\n                {name:\"maptr\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"maptr.jpg\"},\r\n                {name:\"stainedGlass\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"stainedGlass.png\"},\r\n                {name:\"waterbump\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"waterbump.png\"},\r\n                {name:\"yu\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"yu.png\"},\r\n\r\n            ],\r\n            cubeTextures:[\r\n                {name:\"skybox\", filePath:this.pathFirst+\"src/Resource/gameScene/cubeTextures/skybox/\", fileName:\"skybox\",}\r\n            ]\r\n        };\r\n\r\n\r\n\r\n        this._resource={\r\n            gameScene:gameScene,\r\n        }\r\n    }\r\n\r\n    public get resource(): object {\r\n        return this._resource;\r\n    }\r\n}","\r\nimport {ResourceCon} from \"./other/ResourceCon\";\r\nimport {SceneBeforeCall} from \"./other/SceneBeforeCall\";\r\nimport {AssetsManager} from \"./public/index\"\r\nimport {SceneManager} from \"./public/index\";\r\nimport {GlobalManager} from \"./public/index\";\r\nimport {DisplayPool} from \"./public/index\";\r\nimport {ModuleName} from \"./public/index\"\r\nimport {ExGameSceneCon} from \"./Scene/GameScene/ExGameSceneCon\";\r\nimport {ExGameSceneGuiCon} from \"./Gui/GameSceneGui/ExGameSceneGuiCon\";\r\nimport {ExStartGuiCon} from \"./Gui/StartGui/ExStartGuiCon\";\r\n\r\n\r\n\r\nexport class Before{\r\n\r\n\r\n    private static instance: Before;\r\n\r\n    public static get ins(): Before {\r\n        if (!this.instance) {\r\n            this.instance = new Before();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n\r\n    public update(){\r\n        AssetsManager.ins.resourceData=ResourceCon.ins.resource;\r\n        AssetsManager.ins.loadFile([\"gameScene\"],SceneManager.ins.scene,function(){\r\n            this.initModule()\r\n            console.log(DisplayPool.ins.displayPool)\r\n            GlobalManager.ins.openModule(ModuleName.GAME_START_GUI);\r\n            SceneBeforeCall.ins.musicLoop();\r\n        }.bind(this),function(e){\r\n            console.log(e.loadCount)\r\n        }.bind(this))\r\n    }\r\n\r\n    protected addEvent(): void {\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 安装GUI/3D场景模块\r\n     * */\r\n\r\n    public initModule(){\r\n        //游戏3D场景\r\n        ExGameSceneCon.ins.init();\r\n        ExStartGuiCon.ins.init();\r\n        ExGameSceneGuiCon.ins.init();\r\n    }\r\n\r\n}\r\n","\r\nimport {Before} from \"./Before\";\r\n\r\nwindow.addEventListener(\"load\",function(){\r\n    Before.ins.update();\r\n})\r\n"],"sourceRoot":""}